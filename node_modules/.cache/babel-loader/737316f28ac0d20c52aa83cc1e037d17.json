{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _createForOfIteratorHelper = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _require = require('abstract-leveldown'),\n    AbstractLevelDOWN = _require.AbstractLevelDOWN;\n\nvar inherits = require('inherits');\n\nvar DeferredIterator = require('./deferred-iterator');\n\nvar DeferredChainedBatch = require('./deferred-chained-batch');\n\nvar getCallback = require('./util').getCallback;\n\nvar deferrables = ['put', 'get', 'getMany', 'del', 'batch', 'clear'];\nvar optionalDeferrables = ['approximateSize', 'compactRange'];\nvar kInnerDb = Symbol('innerDb');\nvar kOperations = Symbol('operations');\nvar kPromise = Symbol('promise');\n\nfunction DeferredLevelDOWN(db) {\n  AbstractLevelDOWN.call(this, db.supports || {}); // TODO (future major): remove this fallback; db must have manifest that\n  // declares approximateSize and compactRange in additionalMethods.\n\n  var _iterator = _createForOfIteratorHelper(optionalDeferrables),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var m = _step.value;\n\n      if (typeof db[m] === 'function' && !this.supports.additionalMethods[m]) {\n        this.supports.additionalMethods[m] = true;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  this[kInnerDb] = db;\n  this[kOperations] = [];\n  implement(this);\n}\n\ninherits(DeferredLevelDOWN, AbstractLevelDOWN);\nDeferredLevelDOWN.prototype.type = 'deferred-leveldown'; // Backwards compatibility for reachdown and subleveldown\n\nObject.defineProperty(DeferredLevelDOWN.prototype, '_db', {\n  enumerable: true,\n  get: function get() {\n    return this[kInnerDb];\n  }\n});\n\nDeferredLevelDOWN.prototype._open = function (options, callback) {\n  var _this = this;\n\n  var onopen = function onopen(err) {\n    if (err || _this[kInnerDb].status !== 'open') {\n      // TODO: reject scheduled operations\n      return callback(err || new Error('Database is not open'));\n    }\n\n    var operations = _this[kOperations];\n    _this[kOperations] = [];\n\n    var _iterator2 = _createForOfIteratorHelper(operations),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var op = _step2.value;\n\n        if (op.iterator) {\n          op.iterator.setDb(_this[kInnerDb]);\n        } else {\n          var _this$kInnerDb;\n\n          (_this$kInnerDb = _this[kInnerDb])[op.method].apply(_this$kInnerDb, _toConsumableArray(op.args));\n        }\n      }\n      /* istanbul ignore if: assertion */\n\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    if (_this[kOperations].length > 0) {\n      throw new Error('Did not expect further operations');\n    }\n\n    callback();\n  };\n\n  if (this[kInnerDb].status === 'new' || this[kInnerDb].status === 'closed') {\n    this[kInnerDb].open(options, onopen);\n  } else {\n    this._nextTick(onopen);\n  }\n};\n\nDeferredLevelDOWN.prototype._close = function (callback) {\n  this[kInnerDb].close(callback);\n};\n\nDeferredLevelDOWN.prototype._isOperational = function () {\n  return this.status === 'opening';\n};\n\nfunction implement(self) {\n  var additionalMethods = Object.keys(self.supports.additionalMethods);\n\n  var _iterator3 = _createForOfIteratorHelper(deferrables.concat(additionalMethods)),\n      _step3;\n\n  try {\n    var _loop = function _loop() {\n      var method = _step3.value;\n\n      // Override the public rather than private methods to cover cases where abstract-leveldown\n      // has a fast-path like on db.batch([]) which bypasses _batch() because the array is empty.\n      self[method] = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (method === 'batch' && args.length === 0) {\n          return new DeferredChainedBatch(this);\n        } else if (this.status === 'open') {\n          var _this$kInnerDb2;\n\n          return (_this$kInnerDb2 = this[kInnerDb])[method].apply(_this$kInnerDb2, args);\n        }\n\n        var callback = getCallback(args, kPromise);\n\n        if (this.status === 'opening') {\n          this[kOperations].push({\n            method: method,\n            args: args\n          });\n        } else {\n          this._nextTick(callback, new Error('Database is not open'));\n        }\n\n        return callback[kPromise];\n      };\n    };\n\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  self.iterator = function (options) {\n    if (this.status === 'open') {\n      return this[kInnerDb].iterator(options);\n    } else if (this.status === 'opening') {\n      var iterator = new DeferredIterator(this, options);\n      this[kOperations].push({\n        iterator: iterator\n      });\n      return iterator;\n    } else {\n      throw new Error('Database is not open');\n    }\n  };\n\n  var _iterator4 = _createForOfIteratorHelper(deferrables.concat(['iterator'])),\n      _step4;\n\n  try {\n    var _loop2 = function _loop2() {\n      var method = _step4.value;\n\n      self['_' + method] = function () {\n        /* istanbul ignore next: assertion */\n        throw new Error('Did not expect private method to be called: ' + method);\n      };\n    };\n\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      _loop2();\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n}\n\nmodule.exports = DeferredLevelDOWN;\nmodule.exports.DeferredIterator = DeferredIterator;","map":{"version":3,"names":["require","AbstractLevelDOWN","inherits","DeferredIterator","DeferredChainedBatch","getCallback","deferrables","optionalDeferrables","kInnerDb","Symbol","kOperations","kPromise","DeferredLevelDOWN","db","call","supports","m","additionalMethods","implement","prototype","type","Object","defineProperty","enumerable","get","_open","options","callback","onopen","err","status","Error","operations","op","iterator","setDb","method","args","length","open","_nextTick","_close","close","_isOperational","self","keys","concat","push","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/deferred-leveldown/deferred-leveldown.js"],"sourcesContent":["'use strict'\n\nconst { AbstractLevelDOWN } = require('abstract-leveldown')\nconst inherits = require('inherits')\nconst DeferredIterator = require('./deferred-iterator')\nconst DeferredChainedBatch = require('./deferred-chained-batch')\nconst getCallback = require('./util').getCallback\n\nconst deferrables = ['put', 'get', 'getMany', 'del', 'batch', 'clear']\nconst optionalDeferrables = ['approximateSize', 'compactRange']\n\nconst kInnerDb = Symbol('innerDb')\nconst kOperations = Symbol('operations')\nconst kPromise = Symbol('promise')\n\nfunction DeferredLevelDOWN (db) {\n  AbstractLevelDOWN.call(this, db.supports || {})\n\n  // TODO (future major): remove this fallback; db must have manifest that\n  // declares approximateSize and compactRange in additionalMethods.\n  for (const m of optionalDeferrables) {\n    if (typeof db[m] === 'function' && !this.supports.additionalMethods[m]) {\n      this.supports.additionalMethods[m] = true\n    }\n  }\n\n  this[kInnerDb] = db\n  this[kOperations] = []\n\n  implement(this)\n}\n\ninherits(DeferredLevelDOWN, AbstractLevelDOWN)\n\nDeferredLevelDOWN.prototype.type = 'deferred-leveldown'\n\n// Backwards compatibility for reachdown and subleveldown\nObject.defineProperty(DeferredLevelDOWN.prototype, '_db', {\n  enumerable: true,\n  get () {\n    return this[kInnerDb]\n  }\n})\n\nDeferredLevelDOWN.prototype._open = function (options, callback) {\n  const onopen = (err) => {\n    if (err || this[kInnerDb].status !== 'open') {\n      // TODO: reject scheduled operations\n      return callback(err || new Error('Database is not open'))\n    }\n\n    const operations = this[kOperations]\n    this[kOperations] = []\n\n    for (const op of operations) {\n      if (op.iterator) {\n        op.iterator.setDb(this[kInnerDb])\n      } else {\n        this[kInnerDb][op.method](...op.args)\n      }\n    }\n\n    /* istanbul ignore if: assertion */\n    if (this[kOperations].length > 0) {\n      throw new Error('Did not expect further operations')\n    }\n\n    callback()\n  }\n\n  if (this[kInnerDb].status === 'new' || this[kInnerDb].status === 'closed') {\n    this[kInnerDb].open(options, onopen)\n  } else {\n    this._nextTick(onopen)\n  }\n}\n\nDeferredLevelDOWN.prototype._close = function (callback) {\n  this[kInnerDb].close(callback)\n}\n\nDeferredLevelDOWN.prototype._isOperational = function () {\n  return this.status === 'opening'\n}\n\nfunction implement (self) {\n  const additionalMethods = Object.keys(self.supports.additionalMethods)\n\n  for (const method of deferrables.concat(additionalMethods)) {\n    // Override the public rather than private methods to cover cases where abstract-leveldown\n    // has a fast-path like on db.batch([]) which bypasses _batch() because the array is empty.\n    self[method] = function (...args) {\n      if (method === 'batch' && args.length === 0) {\n        return new DeferredChainedBatch(this)\n      } else if (this.status === 'open') {\n        return this[kInnerDb][method](...args)\n      }\n\n      const callback = getCallback(args, kPromise)\n\n      if (this.status === 'opening') {\n        this[kOperations].push({ method, args })\n      } else {\n        this._nextTick(callback, new Error('Database is not open'))\n      }\n\n      return callback[kPromise]\n    }\n  }\n\n  self.iterator = function (options) {\n    if (this.status === 'open') {\n      return this[kInnerDb].iterator(options)\n    } else if (this.status === 'opening') {\n      const iterator = new DeferredIterator(this, options)\n      this[kOperations].push({ iterator })\n      return iterator\n    } else {\n      throw new Error('Database is not open')\n    }\n  }\n\n  for (const method of deferrables.concat(['iterator'])) {\n    self['_' + method] = function () {\n      /* istanbul ignore next: assertion */\n      throw new Error('Did not expect private method to be called: ' + method)\n    }\n  }\n}\n\nmodule.exports = DeferredLevelDOWN\nmodule.exports.DeferredIterator = DeferredIterator\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}