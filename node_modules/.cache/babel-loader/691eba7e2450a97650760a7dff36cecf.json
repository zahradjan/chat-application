{"ast":null,"code":"var inherits = require('inherits');\n\nvar Readable = require('readable-stream').Readable;\n\nvar extend = require('xtend');\n\nmodule.exports = ReadStream;\ninherits(ReadStream, Readable);\n\nfunction ReadStream(iterator, options) {\n  if (!(this instanceof ReadStream)) return new ReadStream(iterator, options);\n  options = options || {};\n  Readable.call(this, extend(options, {\n    objectMode: true\n  }));\n  this._iterator = iterator;\n  this._options = options;\n  this.on('end', this.destroy.bind(this, null, null));\n}\n\nReadStream.prototype._read = function () {\n  var self = this;\n  var options = this._options;\n  if (this.destroyed) return;\n\n  this._iterator.next(function (err, key, value) {\n    if (self.destroyed) return;\n    if (err) return self.destroy(err);\n\n    if (key === undefined && value === undefined) {\n      self.push(null);\n    } else if (options.keys !== false && options.values === false) {\n      self.push(key);\n    } else if (options.keys === false && options.values !== false) {\n      self.push(value);\n    } else {\n      self.push({\n        key: key,\n        value: value\n      });\n    }\n  });\n};\n\nReadStream.prototype._destroy = function (err, callback) {\n  this._iterator.end(function (err2) {\n    callback(err || err2);\n  });\n};","map":{"version":3,"names":["inherits","require","Readable","extend","module","exports","ReadStream","iterator","options","call","objectMode","_iterator","_options","on","destroy","bind","prototype","_read","self","destroyed","next","err","key","value","undefined","push","keys","values","_destroy","callback","end","err2"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-keystore/node_modules/level-iterator-stream/index.js"],"sourcesContent":["var inherits = require('inherits')\nvar Readable = require('readable-stream').Readable\nvar extend = require('xtend')\n\nmodule.exports = ReadStream\ninherits(ReadStream, Readable)\n\nfunction ReadStream (iterator, options) {\n  if (!(this instanceof ReadStream)) return new ReadStream(iterator, options)\n  options = options || {}\n  Readable.call(this, extend(options, {\n    objectMode: true\n  }))\n  this._iterator = iterator\n  this._options = options\n  this.on('end', this.destroy.bind(this, null, null))\n}\n\nReadStream.prototype._read = function () {\n  var self = this\n  var options = this._options\n  if (this.destroyed) return\n\n  this._iterator.next(function (err, key, value) {\n    if (self.destroyed) return\n    if (err) return self.destroy(err)\n\n    if (key === undefined && value === undefined) {\n      self.push(null)\n    } else if (options.keys !== false && options.values === false) {\n      self.push(key)\n    } else if (options.keys === false && options.values !== false) {\n      self.push(value)\n    } else {\n      self.push({ key: key, value: value })\n    }\n  })\n}\n\nReadStream.prototype._destroy = function (err, callback) {\n  this._iterator.end(function (err2) {\n    callback(err || err2)\n  })\n}\n"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,iBAAD,CAAP,CAA2BC,QAA1C;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAAC,OAAD,CAApB;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,UAAjB;AACAN,QAAQ,CAACM,UAAD,EAAaJ,QAAb,CAAR;;AAEA,SAASI,UAAT,CAAqBC,QAArB,EAA+BC,OAA/B,EAAwC;EACtC,IAAI,EAAE,gBAAgBF,UAAlB,CAAJ,EAAmC,OAAO,IAAIA,UAAJ,CAAeC,QAAf,EAAyBC,OAAzB,CAAP;EACnCA,OAAO,GAAGA,OAAO,IAAI,EAArB;EACAN,QAAQ,CAACO,IAAT,CAAc,IAAd,EAAoBN,MAAM,CAACK,OAAD,EAAU;IAClCE,UAAU,EAAE;EADsB,CAAV,CAA1B;EAGA,KAAKC,SAAL,GAAiBJ,QAAjB;EACA,KAAKK,QAAL,GAAgBJ,OAAhB;EACA,KAAKK,EAAL,CAAQ,KAAR,EAAe,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B,IAA9B,CAAf;AACD;;AAEDT,UAAU,CAACU,SAAX,CAAqBC,KAArB,GAA6B,YAAY;EACvC,IAAIC,IAAI,GAAG,IAAX;EACA,IAAIV,OAAO,GAAG,KAAKI,QAAnB;EACA,IAAI,KAAKO,SAAT,EAAoB;;EAEpB,KAAKR,SAAL,CAAeS,IAAf,CAAoB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,KAApB,EAA2B;IAC7C,IAAIL,IAAI,CAACC,SAAT,EAAoB;IACpB,IAAIE,GAAJ,EAAS,OAAOH,IAAI,CAACJ,OAAL,CAAaO,GAAb,CAAP;;IAET,IAAIC,GAAG,KAAKE,SAAR,IAAqBD,KAAK,KAAKC,SAAnC,EAA8C;MAC5CN,IAAI,CAACO,IAAL,CAAU,IAAV;IACD,CAFD,MAEO,IAAIjB,OAAO,CAACkB,IAAR,KAAiB,KAAjB,IAA0BlB,OAAO,CAACmB,MAAR,KAAmB,KAAjD,EAAwD;MAC7DT,IAAI,CAACO,IAAL,CAAUH,GAAV;IACD,CAFM,MAEA,IAAId,OAAO,CAACkB,IAAR,KAAiB,KAAjB,IAA0BlB,OAAO,CAACmB,MAAR,KAAmB,KAAjD,EAAwD;MAC7DT,IAAI,CAACO,IAAL,CAAUF,KAAV;IACD,CAFM,MAEA;MACLL,IAAI,CAACO,IAAL,CAAU;QAAEH,GAAG,EAAEA,GAAP;QAAYC,KAAK,EAAEA;MAAnB,CAAV;IACD;EACF,CAbD;AAcD,CAnBD;;AAqBAjB,UAAU,CAACU,SAAX,CAAqBY,QAArB,GAAgC,UAAUP,GAAV,EAAeQ,QAAf,EAAyB;EACvD,KAAKlB,SAAL,CAAemB,GAAf,CAAmB,UAAUC,IAAV,EAAgB;IACjCF,QAAQ,CAACR,GAAG,IAAIU,IAAR,CAAR;EACD,CAFD;AAGD,CAJD"},"metadata":{},"sourceType":"script"}