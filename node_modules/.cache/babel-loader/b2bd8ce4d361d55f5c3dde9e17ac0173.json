{"ast":null,"code":"module.exports = async socket => {\n  // if the socket is closing or closed, return end\n  if (socket.readyState >= 2) {\n    throw new Error('socket closed');\n  } // if open, return\n\n\n  if (socket.readyState === 1) {\n    return;\n  }\n\n  return new Promise((resolve, reject) => {\n    const remove = socket && (socket.removeEventListener || socket.removeListener);\n\n    function cleanup() {\n      if (typeof remove === 'function') {\n        remove.call(socket, 'open', handleOpen);\n        remove.call(socket, 'error', handleErr);\n      }\n    }\n\n    function handleOpen() {\n      cleanup();\n      resolve();\n    }\n\n    function handleErr(evt) {\n      cleanup();\n      reject(evt);\n    }\n\n    socket.addEventListener('open', handleOpen);\n    socket.addEventListener('error', handleErr);\n  });\n};","map":{"version":3,"names":["module","exports","socket","readyState","Error","Promise","resolve","reject","remove","removeEventListener","removeListener","cleanup","call","handleOpen","handleErr","evt","addEventListener"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/it-ws/ready.js"],"sourcesContent":["module.exports = async socket => {\n  // if the socket is closing or closed, return end\n  if (socket.readyState >= 2) {\n    throw new Error('socket closed')\n  }\n\n  // if open, return\n  if (socket.readyState === 1) {\n    return\n  }\n\n  return new Promise((resolve, reject) => {\n    const remove = socket && (socket.removeEventListener || socket.removeListener)\n\n    function cleanup () {\n      if (typeof remove === 'function') {\n        remove.call(socket, 'open', handleOpen)\n        remove.call(socket, 'error', handleErr)\n      }\n    }\n\n    function handleOpen () {\n      cleanup(); resolve()\n    }\n\n    function handleErr (evt) {\n      cleanup(); reject(evt)\n    }\n\n    socket.addEventListener('open', handleOpen)\n    socket.addEventListener('error', handleErr)\n  })\n}\n"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,MAAMC,MAAN,IAAgB;EAC/B;EACA,IAAIA,MAAM,CAACC,UAAP,IAAqB,CAAzB,EAA4B;IAC1B,MAAM,IAAIC,KAAJ,CAAU,eAAV,CAAN;EACD,CAJ8B,CAM/B;;;EACA,IAAIF,MAAM,CAACC,UAAP,KAAsB,CAA1B,EAA6B;IAC3B;EACD;;EAED,OAAO,IAAIE,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtC,MAAMC,MAAM,GAAGN,MAAM,KAAKA,MAAM,CAACO,mBAAP,IAA8BP,MAAM,CAACQ,cAA1C,CAArB;;IAEA,SAASC,OAAT,GAAoB;MAClB,IAAI,OAAOH,MAAP,KAAkB,UAAtB,EAAkC;QAChCA,MAAM,CAACI,IAAP,CAAYV,MAAZ,EAAoB,MAApB,EAA4BW,UAA5B;QACAL,MAAM,CAACI,IAAP,CAAYV,MAAZ,EAAoB,OAApB,EAA6BY,SAA7B;MACD;IACF;;IAED,SAASD,UAAT,GAAuB;MACrBF,OAAO;MAAIL,OAAO;IACnB;;IAED,SAASQ,SAAT,CAAoBC,GAApB,EAAyB;MACvBJ,OAAO;MAAIJ,MAAM,CAACQ,GAAD,CAAN;IACZ;;IAEDb,MAAM,CAACc,gBAAP,CAAwB,MAAxB,EAAgCH,UAAhC;IACAX,MAAM,CAACc,gBAAP,CAAwB,OAAxB,EAAiCF,SAAjC;EACD,CApBM,CAAP;AAqBD,CAhCD"},"metadata":{},"sourceType":"script"}