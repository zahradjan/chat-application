{"ast":null,"code":"'use strict';\n\nfunction AbstractIterator(db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store');\n  }\n\n  this.db = db;\n  this._ended = false;\n  this._nexting = false;\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var _this = this;\n\n  // In callback mode, we return `this`\n  let ret = this;\n\n  if (callback === undefined) {\n    ret = new Promise(function (resolve, reject) {\n      callback = function (err, key, value) {\n        if (err) reject(err);else if (key === undefined && value === undefined) resolve();else resolve([key, value]);\n      };\n    });\n  } else if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument');\n  }\n\n  if (this._ended) {\n    this._nextTick(callback, new Error('cannot call next() after end()'));\n\n    return ret;\n  }\n\n  if (this._nexting) {\n    this._nextTick(callback, new Error('cannot call next() before previous next() has completed'));\n\n    return ret;\n  }\n\n  this._nexting = true;\n\n  this._next(function (err) {\n    _this._nexting = false;\n\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    callback(err, ...rest);\n  });\n\n  return ret;\n};\n\nAbstractIterator.prototype._next = function (callback) {\n  this._nextTick(callback);\n};\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()');\n  }\n\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed');\n  }\n\n  target = this.db._serializeKey(target);\n\n  this._seek(target);\n};\n\nAbstractIterator.prototype._seek = function (target) {};\n\nAbstractIterator.prototype.end = function (callback) {\n  let promise;\n\n  if (callback === undefined) {\n    promise = new Promise(function (resolve, reject) {\n      callback = function (err) {\n        if (err) reject(err);else resolve();\n      };\n    });\n  } else if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument');\n  }\n\n  if (this._ended) {\n    this._nextTick(callback, new Error('end() already called on iterator'));\n\n    return promise;\n  }\n\n  this._ended = true;\n\n  this._end(callback);\n\n  return promise;\n};\n\nAbstractIterator.prototype._end = function (callback) {\n  this._nextTick(callback);\n};\n\nAbstractIterator.prototype[Symbol.asyncIterator] = async function* () {\n  try {\n    let kv;\n\n    while ((kv = await this.next()) !== undefined) {\n      yield kv;\n    }\n  } finally {\n    if (!this._ended) await this.end();\n  }\n}; // Expose browser-compatible nextTick for dependents\n\n\nAbstractIterator.prototype._nextTick = require('./next-tick');\nmodule.exports = AbstractIterator;","map":{"version":3,"names":["AbstractIterator","db","TypeError","_ended","_nexting","prototype","next","callback","ret","undefined","Promise","resolve","reject","err","key","value","Error","_nextTick","_next","rest","seek","target","_serializeKey","_seek","end","promise","_end","Symbol","asyncIterator","kv","require","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/abstract-leveldown/abstract-iterator.js"],"sourcesContent":["'use strict'\n\nfunction AbstractIterator (db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store')\n  }\n\n  this.db = db\n  this._ended = false\n  this._nexting = false\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  // In callback mode, we return `this`\n  let ret = this\n\n  if (callback === undefined) {\n    ret = new Promise(function (resolve, reject) {\n      callback = function (err, key, value) {\n        if (err) reject(err)\n        else if (key === undefined && value === undefined) resolve()\n        else resolve([key, value])\n      }\n    })\n  } else if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument')\n  }\n\n  if (this._ended) {\n    this._nextTick(callback, new Error('cannot call next() after end()'))\n    return ret\n  }\n\n  if (this._nexting) {\n    this._nextTick(callback, new Error('cannot call next() before previous next() has completed'))\n    return ret\n  }\n\n  this._nexting = true\n  this._next((err, ...rest) => {\n    this._nexting = false\n    callback(err, ...rest)\n  })\n\n  return ret\n}\n\nAbstractIterator.prototype._next = function (callback) {\n  this._nextTick(callback)\n}\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()')\n  }\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed')\n  }\n\n  target = this.db._serializeKey(target)\n  this._seek(target)\n}\n\nAbstractIterator.prototype._seek = function (target) {}\n\nAbstractIterator.prototype.end = function (callback) {\n  let promise\n\n  if (callback === undefined) {\n    promise = new Promise(function (resolve, reject) {\n      callback = function (err) {\n        if (err) reject(err)\n        else resolve()\n      }\n    })\n  } else if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument')\n  }\n\n  if (this._ended) {\n    this._nextTick(callback, new Error('end() already called on iterator'))\n    return promise\n  }\n\n  this._ended = true\n  this._end(callback)\n\n  return promise\n}\n\nAbstractIterator.prototype._end = function (callback) {\n  this._nextTick(callback)\n}\n\nAbstractIterator.prototype[Symbol.asyncIterator] = async function * () {\n  try {\n    let kv\n\n    while ((kv = (await this.next())) !== undefined) {\n      yield kv\n    }\n  } finally {\n    if (!this._ended) await this.end()\n  }\n}\n\n// Expose browser-compatible nextTick for dependents\nAbstractIterator.prototype._nextTick = require('./next-tick')\n\nmodule.exports = AbstractIterator\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}