{"ast":null,"code":"'use strict';\n\nconst select = require('./select');\n\nconst handle = require('./handle');\n\nconst ls = require('./ls');\n\nconst {\n  PROTOCOL_ID\n} = require('./constants');\n\nexports.PROTOCOL_ID = PROTOCOL_ID;\n\nclass MultistreamSelect {\n  constructor(stream) {\n    this._stream = stream;\n    this._shaken = false;\n  } // Perform the multistream-select handshake\n\n\n  async _handshake() {\n    if (this._shaken) return;\n    const {\n      stream\n    } = await select(this._stream, PROTOCOL_ID);\n    this._stream = stream;\n    this._shaken = true;\n  }\n\n}\n\nclass Dialer extends MultistreamSelect {\n  select(protocols) {\n    return select(this._stream, protocols, this._shaken ? null : PROTOCOL_ID);\n  }\n\n  async ls() {\n    await this._handshake();\n    const {\n      stream,\n      protocols\n    } = await ls(this._stream);\n    this._stream = stream;\n    return protocols;\n  }\n\n}\n\nexports.Dialer = Dialer;\n\nclass Listener extends MultistreamSelect {\n  handle(protocols) {\n    return handle(this._stream, protocols);\n  }\n\n}\n\nexports.Listener = Listener;","map":{"version":3,"names":["select","require","handle","ls","PROTOCOL_ID","exports","MultistreamSelect","constructor","stream","_stream","_shaken","_handshake","Dialer","protocols","Listener"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/multistream-select/src/index.js"],"sourcesContent":["'use strict'\n\nconst select = require('./select')\nconst handle = require('./handle')\nconst ls = require('./ls')\nconst { PROTOCOL_ID } = require('./constants')\n\nexports.PROTOCOL_ID = PROTOCOL_ID\n\nclass MultistreamSelect {\n  constructor (stream) {\n    this._stream = stream\n    this._shaken = false\n  }\n\n  // Perform the multistream-select handshake\n  async _handshake () {\n    if (this._shaken) return\n    const { stream } = await select(this._stream, PROTOCOL_ID)\n    this._stream = stream\n    this._shaken = true\n  }\n}\n\nclass Dialer extends MultistreamSelect {\n  select (protocols) {\n    return select(this._stream, protocols, this._shaken ? null : PROTOCOL_ID)\n  }\n\n  async ls () {\n    await this._handshake()\n    const { stream, protocols } = await ls(this._stream)\n    this._stream = stream\n    return protocols\n  }\n}\n\nexports.Dialer = Dialer\n\nclass Listener extends MultistreamSelect {\n  handle (protocols) {\n    return handle(this._stream, protocols)\n  }\n}\n\nexports.Listener = Listener\n"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,MAAM;EAAEG;AAAF,IAAkBH,OAAO,CAAC,aAAD,CAA/B;;AAEAI,OAAO,CAACD,WAAR,GAAsBA,WAAtB;;AAEA,MAAME,iBAAN,CAAwB;EACtBC,WAAW,CAAEC,MAAF,EAAU;IACnB,KAAKC,OAAL,GAAeD,MAAf;IACA,KAAKE,OAAL,GAAe,KAAf;EACD,CAJqB,CAMtB;;;EACgB,MAAVC,UAAU,GAAI;IAClB,IAAI,KAAKD,OAAT,EAAkB;IAClB,MAAM;MAAEF;IAAF,IAAa,MAAMR,MAAM,CAAC,KAAKS,OAAN,EAAeL,WAAf,CAA/B;IACA,KAAKK,OAAL,GAAeD,MAAf;IACA,KAAKE,OAAL,GAAe,IAAf;EACD;;AAZqB;;AAexB,MAAME,MAAN,SAAqBN,iBAArB,CAAuC;EACrCN,MAAM,CAAEa,SAAF,EAAa;IACjB,OAAOb,MAAM,CAAC,KAAKS,OAAN,EAAeI,SAAf,EAA0B,KAAKH,OAAL,GAAe,IAAf,GAAsBN,WAAhD,CAAb;EACD;;EAEO,MAAFD,EAAE,GAAI;IACV,MAAM,KAAKQ,UAAL,EAAN;IACA,MAAM;MAAEH,MAAF;MAAUK;IAAV,IAAwB,MAAMV,EAAE,CAAC,KAAKM,OAAN,CAAtC;IACA,KAAKA,OAAL,GAAeD,MAAf;IACA,OAAOK,SAAP;EACD;;AAVoC;;AAavCR,OAAO,CAACO,MAAR,GAAiBA,MAAjB;;AAEA,MAAME,QAAN,SAAuBR,iBAAvB,CAAyC;EACvCJ,MAAM,CAAEW,SAAF,EAAa;IACjB,OAAOX,MAAM,CAAC,KAAKO,OAAN,EAAeI,SAAf,CAAb;EACD;;AAHsC;;AAMzCR,OAAO,CAACS,QAAR,GAAmBA,QAAnB"},"metadata":{},"sourceType":"script"}