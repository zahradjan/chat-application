{"ast":null,"code":"'use strict';\n\nconst Counter = require('crdts/src/G-Counter');\n\nclass CounterIndex {\n  constructor(id) {\n    this._index = new Counter(id);\n  }\n\n  get() {\n    return this._index;\n  }\n\n  updateIndex(oplog) {\n    if (this._index) {\n      const getCounter = e => e.payload.value.counters;\n\n      const mergeToIndex = _counters => this._index.merge({\n        _counters\n      });\n\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER').map(getCounter).forEach(mergeToIndex);\n    }\n  }\n\n}\n\nmodule.exports = CounterIndex;","map":{"version":3,"names":["Counter","require","CounterIndex","constructor","id","_index","get","updateIndex","oplog","getCounter","e","payload","value","counters","mergeToIndex","_counters","merge","values","filter","op","map","forEach","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-counterstore/src/CounterIndex.js"],"sourcesContent":["'use strict'\n\nconst Counter = require('crdts/src/G-Counter')\n\nclass CounterIndex {\n  constructor (id) {\n    this._index = new Counter(id)\n  }\n\n  get () {\n    return this._index\n  }\n\n  updateIndex (oplog) {\n    if (this._index) {\n      const getCounter = e => e.payload.value.counters\n      const mergeToIndex = _counters => this._index.merge({ _counters })\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER')\n        .map(getCounter)\n        .forEach(mergeToIndex)\n    }\n  }\n}\n\nmodule.exports = CounterIndex\n"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AAEA,MAAMC,YAAN,CAAmB;EACjBC,WAAW,CAAEC,EAAF,EAAM;IACf,KAAKC,MAAL,GAAc,IAAIL,OAAJ,CAAYI,EAAZ,CAAd;EACD;;EAEDE,GAAG,GAAI;IACL,OAAO,KAAKD,MAAZ;EACD;;EAEDE,WAAW,CAAEC,KAAF,EAAS;IAClB,IAAI,KAAKH,MAAT,EAAiB;MACf,MAAMI,UAAU,GAAGC,CAAC,IAAIA,CAAC,CAACC,OAAF,CAAUC,KAAV,CAAgBC,QAAxC;;MACA,MAAMC,YAAY,GAAGC,SAAS,IAAI,KAAKV,MAAL,CAAYW,KAAZ,CAAkB;QAAED;MAAF,CAAlB,CAAlC;;MACAP,KAAK,CAACS,MAAN,CAAaC,MAAb,CAAoBR,CAAC,IAAIA,CAAC,IAAIA,CAAC,CAACC,OAAF,CAAUQ,EAAV,KAAiB,SAA/C,EACGC,GADH,CACOX,UADP,EAEGY,OAFH,CAEWP,YAFX;IAGD;EACF;;AAjBgB;;AAoBnBQ,MAAM,CAACC,OAAP,GAAiBrB,YAAjB"},"metadata":{},"sourceType":"script"}