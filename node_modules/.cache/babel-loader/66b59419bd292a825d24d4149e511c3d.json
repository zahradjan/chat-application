{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ensureTopicStats = exports.createTopicStats = exports.createPeerStats = void 0;\n\nfunction createPeerStats() {\n  let ps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign(Object.assign({\n    connected: false,\n    expire: 0,\n    ips: [],\n    behaviourPenalty: 0\n  }, ps), {\n    topics: ps.topics ? Object.entries(ps.topics).reduce((topics, _ref) => {\n      let [topic, topicStats] = _ref;\n      topics[topic] = createTopicStats(topicStats);\n      return topics;\n    }, {}) : {}\n  });\n}\n\nexports.createPeerStats = createPeerStats;\n\nfunction createTopicStats() {\n  let ts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.assign({\n    inMesh: false,\n    graftTime: 0,\n    meshTime: 0,\n    firstMessageDeliveries: 0,\n    meshMessageDeliveries: 0,\n    meshMessageDeliveriesActive: false,\n    meshFailurePenalty: 0,\n    invalidMessageDeliveries: 0\n  }, ts);\n}\n\nexports.createTopicStats = createTopicStats;\n\nfunction ensureTopicStats(topic, ps, params) {\n  let ts = ps.topics[topic];\n\n  if (ts) {\n    return ts;\n  }\n\n  if (!params.topics[topic]) {\n    return undefined;\n  }\n\n  ps.topics[topic] = ts = createTopicStats();\n  return ts;\n}\n\nexports.ensureTopicStats = ensureTopicStats;","map":{"version":3,"names":["Object","defineProperty","exports","value","ensureTopicStats","createTopicStats","createPeerStats","ps","assign","connected","expire","ips","behaviourPenalty","topics","entries","reduce","topic","topicStats","ts","inMesh","graftTime","meshTime","firstMessageDeliveries","meshMessageDeliveries","meshMessageDeliveriesActive","meshFailurePenalty","invalidMessageDeliveries","params","undefined"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/libp2p-gossipsub/src/score/peer-stats.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ensureTopicStats = exports.createTopicStats = exports.createPeerStats = void 0;\nfunction createPeerStats(ps = {}) {\n    return Object.assign(Object.assign({ connected: false, expire: 0, ips: [], behaviourPenalty: 0 }, ps), { topics: ps.topics\n            ? Object.entries(ps.topics)\n                .reduce((topics, [topic, topicStats]) => {\n                topics[topic] = createTopicStats(topicStats);\n                return topics;\n            }, {})\n            : {} });\n}\nexports.createPeerStats = createPeerStats;\nfunction createTopicStats(ts = {}) {\n    return Object.assign({ inMesh: false, graftTime: 0, meshTime: 0, firstMessageDeliveries: 0, meshMessageDeliveries: 0, meshMessageDeliveriesActive: false, meshFailurePenalty: 0, invalidMessageDeliveries: 0 }, ts);\n}\nexports.createTopicStats = createTopicStats;\nfunction ensureTopicStats(topic, ps, params) {\n    let ts = ps.topics[topic];\n    if (ts) {\n        return ts;\n    }\n    if (!params.topics[topic]) {\n        return undefined;\n    }\n    ps.topics[topic] = ts = createTopicStats();\n    return ts;\n}\nexports.ensureTopicStats = ensureTopicStats;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,gBAAR,GAA2BF,OAAO,CAACG,gBAAR,GAA2BH,OAAO,CAACI,eAAR,GAA0B,KAAK,CAArF;;AACA,SAASA,eAAT,GAAkC;EAAA,IAATC,EAAS,uEAAJ,EAAI;EAC9B,OAAOP,MAAM,CAACQ,MAAP,CAAcR,MAAM,CAACQ,MAAP,CAAc;IAAEC,SAAS,EAAE,KAAb;IAAoBC,MAAM,EAAE,CAA5B;IAA+BC,GAAG,EAAE,EAApC;IAAwCC,gBAAgB,EAAE;EAA1D,CAAd,EAA6EL,EAA7E,CAAd,EAAgG;IAAEM,MAAM,EAAEN,EAAE,CAACM,MAAH,GACvGb,MAAM,CAACc,OAAP,CAAeP,EAAE,CAACM,MAAlB,EACGE,MADH,CACU,CAACF,MAAD,WAAiC;MAAA,IAAxB,CAACG,KAAD,EAAQC,UAAR,CAAwB;MACzCJ,MAAM,CAACG,KAAD,CAAN,GAAgBX,gBAAgB,CAACY,UAAD,CAAhC;MACA,OAAOJ,MAAP;IACH,CAJC,EAIC,EAJD,CADuG,GAMvG;EAN6F,CAAhG,CAAP;AAOH;;AACDX,OAAO,CAACI,eAAR,GAA0BA,eAA1B;;AACA,SAASD,gBAAT,GAAmC;EAAA,IAATa,EAAS,uEAAJ,EAAI;EAC/B,OAAOlB,MAAM,CAACQ,MAAP,CAAc;IAAEW,MAAM,EAAE,KAAV;IAAiBC,SAAS,EAAE,CAA5B;IAA+BC,QAAQ,EAAE,CAAzC;IAA4CC,sBAAsB,EAAE,CAApE;IAAuEC,qBAAqB,EAAE,CAA9F;IAAiGC,2BAA2B,EAAE,KAA9H;IAAqIC,kBAAkB,EAAE,CAAzJ;IAA4JC,wBAAwB,EAAE;EAAtL,CAAd,EAAyMR,EAAzM,CAAP;AACH;;AACDhB,OAAO,CAACG,gBAAR,GAA2BA,gBAA3B;;AACA,SAASD,gBAAT,CAA0BY,KAA1B,EAAiCT,EAAjC,EAAqCoB,MAArC,EAA6C;EACzC,IAAIT,EAAE,GAAGX,EAAE,CAACM,MAAH,CAAUG,KAAV,CAAT;;EACA,IAAIE,EAAJ,EAAQ;IACJ,OAAOA,EAAP;EACH;;EACD,IAAI,CAACS,MAAM,CAACd,MAAP,CAAcG,KAAd,CAAL,EAA2B;IACvB,OAAOY,SAAP;EACH;;EACDrB,EAAE,CAACM,MAAH,CAAUG,KAAV,IAAmBE,EAAE,GAAGb,gBAAgB,EAAxC;EACA,OAAOa,EAAP;AACH;;AACDhB,OAAO,CAACE,gBAAR,GAA2BA,gBAA3B"},"metadata":{},"sourceType":"script"}