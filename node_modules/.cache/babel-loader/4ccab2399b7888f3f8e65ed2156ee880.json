{"ast":null,"code":"'use strict';\n\nconst protocols = require('../protocols-table');\n\nconst {\n  code: dnsaddrCode\n} = protocols('dnsaddr');\n/**\n * @typedef {import('..').Multiaddr} Multiaddr\n */\n\n/**\n * Resolver for dnsaddr addresses.\n *\n * @param {Multiaddr} addr\n * @returns {Promise<string[]>}\n */\n\nasync function dnsaddrResolver(addr) {\n  const Resolver = require('./dns');\n\n  const resolver = new Resolver();\n  const peerId = addr.getPeerId();\n  const [, hostname] = addr.stringTuples().find(_ref => {\n    let [proto] = _ref;\n    return proto === dnsaddrCode;\n  }) || [];\n  const records = await resolver.resolveTxt(`_dnsaddr.${hostname}`);\n  let addresses = records.flat().map(a => a.split('=')[1]);\n\n  if (peerId) {\n    addresses = addresses.filter(entry => entry.includes(peerId));\n  }\n\n  return addresses;\n}\n\nmodule.exports = {\n  dnsaddrResolver\n};","map":{"version":3,"names":["protocols","require","code","dnsaddrCode","dnsaddrResolver","addr","Resolver","resolver","peerId","getPeerId","hostname","stringTuples","find","proto","records","resolveTxt","addresses","flat","map","a","split","filter","entry","includes","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/multiaddr/src/resolvers/index.js"],"sourcesContent":["'use strict'\n\nconst protocols = require('../protocols-table')\n\nconst { code: dnsaddrCode } = protocols('dnsaddr')\n\n/**\n * @typedef {import('..').Multiaddr} Multiaddr\n */\n\n/**\n * Resolver for dnsaddr addresses.\n *\n * @param {Multiaddr} addr\n * @returns {Promise<string[]>}\n */\nasync function dnsaddrResolver (addr) {\n  const Resolver = require('./dns')\n  const resolver = new Resolver()\n\n  const peerId = addr.getPeerId()\n  const [, hostname] = addr.stringTuples().find(([proto]) => proto === dnsaddrCode) || []\n\n  const records = await resolver.resolveTxt(`_dnsaddr.${hostname}`)\n  let addresses = records.flat().map((a) => a.split('=')[1])\n\n  if (peerId) {\n    addresses = addresses.filter((entry) => entry.includes(peerId))\n  }\n\n  return addresses\n}\n\nmodule.exports = {\n  dnsaddrResolver\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,SAAS,GAAGC,OAAO,CAAC,oBAAD,CAAzB;;AAEA,MAAM;EAAEC,IAAI,EAAEC;AAAR,IAAwBH,SAAS,CAAC,SAAD,CAAvC;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAeI,eAAf,CAAgCC,IAAhC,EAAsC;EACpC,MAAMC,QAAQ,GAAGL,OAAO,CAAC,OAAD,CAAxB;;EACA,MAAMM,QAAQ,GAAG,IAAID,QAAJ,EAAjB;EAEA,MAAME,MAAM,GAAGH,IAAI,CAACI,SAAL,EAAf;EACA,MAAM,GAAGC,QAAH,IAAeL,IAAI,CAACM,YAAL,GAAoBC,IAApB,CAAyB;IAAA,IAAC,CAACC,KAAD,CAAD;IAAA,OAAaA,KAAK,KAAKV,WAAvB;EAAA,CAAzB,KAAgE,EAArF;EAEA,MAAMW,OAAO,GAAG,MAAMP,QAAQ,CAACQ,UAAT,CAAqB,YAAWL,QAAS,EAAzC,CAAtB;EACA,IAAIM,SAAS,GAAGF,OAAO,CAACG,IAAR,GAAeC,GAAf,CAAoBC,CAAD,IAAOA,CAAC,CAACC,KAAF,CAAQ,GAAR,EAAa,CAAb,CAA1B,CAAhB;;EAEA,IAAIZ,MAAJ,EAAY;IACVQ,SAAS,GAAGA,SAAS,CAACK,MAAV,CAAkBC,KAAD,IAAWA,KAAK,CAACC,QAAN,CAAef,MAAf,CAA5B,CAAZ;EACD;;EAED,OAAOQ,SAAP;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiB;EACfrB;AADe,CAAjB"},"metadata":{},"sourceType":"script"}