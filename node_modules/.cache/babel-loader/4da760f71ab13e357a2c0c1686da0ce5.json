{"ast":null,"code":"import _slicedToArray from \"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\n/* eslint-disable prefer-destructuring */\n\n/* eslint-disable no-param-reassign */\nimport * as common from './common';\nimport * as constants4 from './v4/constants';\nimport * as constants6 from './v6/constants';\nimport * as helpers from './v6/helpers';\nimport { Address4 } from './ipv4';\nimport { ADDRESS_BOUNDARY, possibleElisions, simpleRegularExpression } from './v6/regular-expressions';\nimport { AddressError } from './address-error';\nimport { BigInteger } from 'jsbn';\nimport { sprintf } from 'sprintf-js';\n\nfunction assert(condition) {\n  if (!condition) {\n    throw new Error('Assertion failed.');\n  }\n}\n\nfunction addCommas(number) {\n  var r = /(\\d+)(\\d{3})/;\n\n  while (r.test(number)) {\n    number = number.replace(r, '$1,$2');\n  }\n\n  return number;\n}\n\nfunction spanLeadingZeroes4(n) {\n  n = n.replace(/^(0{1,})([1-9]+)$/, '<span class=\"parse-error\">$1</span>$2');\n  n = n.replace(/^(0{1,})(0)$/, '<span class=\"parse-error\">$1</span>$2');\n  return n;\n}\n/*\n * A helper function to compact an array\n */\n\n\nfunction compact(address, slice) {\n  var s1 = [];\n  var s2 = [];\n  var i;\n\n  for (i = 0; i < address.length; i++) {\n    if (i < slice[0]) {\n      s1.push(address[i]);\n    } else if (i > slice[1]) {\n      s2.push(address[i]);\n    }\n  }\n\n  return s1.concat(['compact']).concat(s2);\n}\n\nfunction paddedHex(octet) {\n  return sprintf('%04x', parseInt(octet, 16));\n}\n\nfunction unsignByte(b) {\n  // eslint-disable-next-line no-bitwise\n  return b & 0xff;\n}\n/**\n * Represents an IPv6 address\n * @class Address6\n * @param {string} address - An IPv6 address string\n * @param {number} [groups=8] - How many octets to parse\n * @example\n * var address = new Address6('2001::/32');\n */\n\n\nexport var Address6 = /*#__PURE__*/function () {\n  function Address6(address, optionalGroups) {\n    _classCallCheck(this, Address6);\n\n    this.addressMinusSuffix = '';\n    this.parsedSubnet = '';\n    this.subnet = '/128';\n    this.subnetMask = 128;\n    this.v4 = false;\n    this.zone = ''; // #region Attributes\n\n    /**\n     * Returns true if the given address is in the subnet of the current address\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n    this.isInSubnet = common.isInSubnet;\n    /**\n     * Returns true if the address is correct, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n    this.isCorrect = common.isCorrect(constants6.BITS);\n\n    if (optionalGroups === undefined) {\n      this.groups = constants6.GROUPS;\n    } else {\n      this.groups = optionalGroups;\n    }\n\n    this.address = address;\n    var subnet = constants6.RE_SUBNET_STRING.exec(address);\n\n    if (subnet) {\n      this.parsedSubnet = subnet[0].replace('/', '');\n      this.subnetMask = parseInt(this.parsedSubnet, 10);\n      this.subnet = \"/\".concat(this.subnetMask);\n\n      if (Number.isNaN(this.subnetMask) || this.subnetMask < 0 || this.subnetMask > constants6.BITS) {\n        throw new AddressError('Invalid subnet mask.');\n      }\n\n      address = address.replace(constants6.RE_SUBNET_STRING, '');\n    } else if (/\\//.test(address)) {\n      throw new AddressError('Invalid subnet mask.');\n    }\n\n    var zone = constants6.RE_ZONE_STRING.exec(address);\n\n    if (zone) {\n      this.zone = zone[0];\n      address = address.replace(constants6.RE_ZONE_STRING, '');\n    }\n\n    this.addressMinusSuffix = address;\n    this.parsedAddress = this.parse(this.addressMinusSuffix);\n  }\n\n  _createClass(Address6, [{\n    key: \"microsoftTranscription\",\n    value:\n    /**\n     * Return the Microsoft UNC transcription of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String} the Microsoft UNC transcription of the address\n     */\n    function microsoftTranscription() {\n      return sprintf('%s.ipv6-literal.net', this.correctForm().replace(/:/g, '-'));\n    }\n    /**\n     * Return the first n bits of the address, defaulting to the subnet mask\n     * @memberof Address6\n     * @instance\n     * @param {number} [mask=subnet] - the number of bits to mask\n     * @returns {String} the first n bits of the address as a string\n     */\n\n  }, {\n    key: \"mask\",\n    value: function mask() {\n      var _mask = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.subnetMask;\n\n      return this.getBitsBase2(0, _mask);\n    }\n    /**\n     * Return the number of possible subnets of a given size in the address\n     * @memberof Address6\n     * @instance\n     * @param {number} [size=128] - the subnet size\n     * @returns {String}\n     */\n    // TODO: probably useful to have a numeric version of this too\n\n  }, {\n    key: \"possibleSubnets\",\n    value: function possibleSubnets() {\n      var subnetSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 128;\n      var availableBits = constants6.BITS - this.subnetMask;\n      var subnetBits = Math.abs(subnetSize - constants6.BITS);\n      var subnetPowers = availableBits - subnetBits;\n\n      if (subnetPowers < 0) {\n        return '0';\n      }\n\n      return addCommas(new BigInteger('2', 10).pow(subnetPowers).toString(10));\n    }\n    /**\n     * Helper function getting start address.\n     * @memberof Address6\n     * @instance\n     * @returns {BigInteger}\n     */\n\n  }, {\n    key: \"_startAddress\",\n    value: function _startAddress() {\n      return new BigInteger(this.mask() + '0'.repeat(constants6.BITS - this.subnetMask), 2);\n    }\n    /**\n     * The first address in the range given by this address' subnet\n     * Often referred to as the Network Address.\n     * @memberof Address6\n     * @instance\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"startAddress\",\n    value: function startAddress() {\n      return Address6.fromBigInteger(this._startAddress());\n    }\n    /**\n     * The first host address in the range given by this address's subnet ie\n     * the first address after the Network Address\n     * @memberof Address6\n     * @instance\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"startAddressExclusive\",\n    value: function startAddressExclusive() {\n      var adjust = new BigInteger('1');\n      return Address6.fromBigInteger(this._startAddress().add(adjust));\n    }\n    /**\n     * Helper function getting end address.\n     * @memberof Address6\n     * @instance\n     * @returns {BigInteger}\n     */\n\n  }, {\n    key: \"_endAddress\",\n    value: function _endAddress() {\n      return new BigInteger(this.mask() + '1'.repeat(constants6.BITS - this.subnetMask), 2);\n    }\n    /**\n     * The last address in the range given by this address' subnet\n     * Often referred to as the Broadcast\n     * @memberof Address6\n     * @instance\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"endAddress\",\n    value: function endAddress() {\n      return Address6.fromBigInteger(this._endAddress());\n    }\n    /**\n     * The last host address in the range given by this address's subnet ie\n     * the last address prior to the Broadcast Address\n     * @memberof Address6\n     * @instance\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"endAddressExclusive\",\n    value: function endAddressExclusive() {\n      var adjust = new BigInteger('1');\n      return Address6.fromBigInteger(this._endAddress().subtract(adjust));\n    }\n    /**\n     * Return the scope of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getScope\",\n    value: function getScope() {\n      var scope = constants6.SCOPES[this.getBits(12, 16).intValue()];\n\n      if (this.getType() === 'Global unicast' && scope !== 'Link local') {\n        scope = 'Global';\n      }\n\n      return scope || 'Unknown';\n    }\n    /**\n     * Return the type of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      for (var _i = 0, _Object$keys = Object.keys(constants6.TYPES); _i < _Object$keys.length; _i++) {\n        var subnet = _Object$keys[_i];\n\n        if (this.isInSubnet(new Address6(subnet))) {\n          return constants6.TYPES[subnet];\n        }\n      }\n\n      return 'Global unicast';\n    }\n    /**\n     * Return the bits in the given range as a BigInteger\n     * @memberof Address6\n     * @instance\n     * @returns {BigInteger}\n     */\n\n  }, {\n    key: \"getBits\",\n    value: function getBits(start, end) {\n      return new BigInteger(this.getBitsBase2(start, end), 2);\n    }\n    /**\n     * Return the bits in the given range as a base-2 string\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getBitsBase2\",\n    value: function getBitsBase2(start, end) {\n      return this.binaryZeroPad().slice(start, end);\n    }\n    /**\n     * Return the bits in the given range as a base-16 string\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getBitsBase16\",\n    value: function getBitsBase16(start, end) {\n      var length = end - start;\n\n      if (length % 4 !== 0) {\n        throw new Error('Length of bits to retrieve must be divisible by four');\n      }\n\n      return this.getBits(start, end).toString(16).padStart(length / 4, '0');\n    }\n    /**\n     * Return the bits that are set past the subnet mask length\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"getBitsPastSubnet\",\n    value: function getBitsPastSubnet() {\n      return this.getBitsBase2(this.subnetMask, constants6.BITS);\n    }\n    /**\n     * Return the reversed ip6.arpa form of the address\n     * @memberof Address6\n     * @param {Object} options\n     * @param {boolean} options.omitSuffix - omit the \"ip6.arpa\" suffix\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"reverseForm\",\n    value: function reverseForm(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var characters = Math.floor(this.subnetMask / 4);\n      var reversed = this.canonicalForm().replace(/:/g, '').split('').slice(0, characters).reverse().join('.');\n\n      if (characters > 0) {\n        if (options.omitSuffix) {\n          return reversed;\n        }\n\n        return sprintf('%s.ip6.arpa.', reversed);\n      }\n\n      if (options.omitSuffix) {\n        return '';\n      }\n\n      return 'ip6.arpa.';\n    }\n    /**\n     * Return the correct form of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"correctForm\",\n    value: function correctForm() {\n      var i;\n      var groups = [];\n      var zeroCounter = 0;\n      var zeroes = [];\n\n      for (i = 0; i < this.parsedAddress.length; i++) {\n        var value = parseInt(this.parsedAddress[i], 16);\n\n        if (value === 0) {\n          zeroCounter++;\n        }\n\n        if (value !== 0 && zeroCounter > 0) {\n          if (zeroCounter > 1) {\n            zeroes.push([i - zeroCounter, i - 1]);\n          }\n\n          zeroCounter = 0;\n        }\n      } // Do we end with a string of zeroes?\n\n\n      if (zeroCounter > 1) {\n        zeroes.push([this.parsedAddress.length - zeroCounter, this.parsedAddress.length - 1]);\n      }\n\n      var zeroLengths = zeroes.map(function (n) {\n        return n[1] - n[0] + 1;\n      });\n\n      if (zeroes.length > 0) {\n        var index = zeroLengths.indexOf(Math.max.apply(Math, _toConsumableArray(zeroLengths)));\n        groups = compact(this.parsedAddress, zeroes[index]);\n      } else {\n        groups = this.parsedAddress;\n      }\n\n      for (i = 0; i < groups.length; i++) {\n        if (groups[i] !== 'compact') {\n          groups[i] = parseInt(groups[i], 16).toString(16);\n        }\n      }\n\n      var correct = groups.join(':');\n      correct = correct.replace(/^compact$/, '::');\n      correct = correct.replace(/^compact|compact$/, ':');\n      correct = correct.replace(/compact/, '');\n      return correct;\n    }\n    /**\n     * Return a zero-padded base-2 string representation of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     * @example\n     * var address = new Address6('2001:4860:4001:803::1011');\n     * address.binaryZeroPad();\n     * // '0010000000000001010010000110000001000000000000010000100000000011\n     * //  0000000000000000000000000000000000000000000000000001000000010001'\n     */\n\n  }, {\n    key: \"binaryZeroPad\",\n    value: function binaryZeroPad() {\n      return this.bigInteger().toString(2).padStart(constants6.BITS, '0');\n    } // TODO: Improve the semantics of this helper function\n\n  }, {\n    key: \"parse4in6\",\n    value: function parse4in6(address) {\n      var groups = address.split(':');\n      var lastGroup = groups.slice(-1)[0];\n      var address4 = lastGroup.match(constants4.RE_ADDRESS);\n\n      if (address4) {\n        this.parsedAddress4 = address4[0];\n        this.address4 = new Address4(this.parsedAddress4);\n\n        for (var i = 0; i < this.address4.groups; i++) {\n          if (/^0[0-9]+/.test(this.address4.parsedAddress[i])) {\n            throw new AddressError(\"IPv4 addresses can't have leading zeroes.\", address.replace(constants4.RE_ADDRESS, this.address4.parsedAddress.map(spanLeadingZeroes4).join('.')));\n          }\n        }\n\n        this.v4 = true;\n        groups[groups.length - 1] = this.address4.toGroup6();\n        address = groups.join(':');\n      }\n\n      return address;\n    } // TODO: Make private?\n\n  }, {\n    key: \"parse\",\n    value: function parse(address) {\n      address = this.parse4in6(address);\n      var badCharacters = address.match(constants6.RE_BAD_CHARACTERS);\n\n      if (badCharacters) {\n        throw new AddressError(sprintf('Bad character%s detected in address: %s', badCharacters.length > 1 ? 's' : '', badCharacters.join('')), address.replace(constants6.RE_BAD_CHARACTERS, '<span class=\"parse-error\">$1</span>'));\n      }\n\n      var badAddress = address.match(constants6.RE_BAD_ADDRESS);\n\n      if (badAddress) {\n        throw new AddressError(sprintf('Address failed regex: %s', badAddress.join('')), address.replace(constants6.RE_BAD_ADDRESS, '<span class=\"parse-error\">$1</span>'));\n      }\n\n      var groups = [];\n      var halves = address.split('::');\n\n      if (halves.length === 2) {\n        var first = halves[0].split(':');\n        var last = halves[1].split(':');\n\n        if (first.length === 1 && first[0] === '') {\n          first = [];\n        }\n\n        if (last.length === 1 && last[0] === '') {\n          last = [];\n        }\n\n        var remaining = this.groups - (first.length + last.length);\n\n        if (!remaining) {\n          throw new AddressError('Error parsing groups');\n        }\n\n        this.elidedGroups = remaining;\n        this.elisionBegin = first.length;\n        this.elisionEnd = first.length + this.elidedGroups;\n        groups = groups.concat(first);\n\n        for (var i = 0; i < remaining; i++) {\n          groups.push('0');\n        }\n\n        groups = groups.concat(last);\n      } else if (halves.length === 1) {\n        groups = address.split(':');\n        this.elidedGroups = 0;\n      } else {\n        throw new AddressError('Too many :: groups found');\n      }\n\n      groups = groups.map(function (group) {\n        return sprintf('%x', parseInt(group, 16));\n      });\n\n      if (groups.length !== this.groups) {\n        throw new AddressError('Incorrect number of groups found');\n      }\n\n      return groups;\n    }\n    /**\n     * Return the canonical form of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"canonicalForm\",\n    value: function canonicalForm() {\n      return this.parsedAddress.map(paddedHex).join(':');\n    }\n    /**\n     * Return the decimal form of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"decimal\",\n    value: function decimal() {\n      return this.parsedAddress.map(function (n) {\n        return sprintf('%05d', parseInt(n, 16));\n      }).join(':');\n    }\n    /**\n     * Return the address as a BigInteger\n     * @memberof Address6\n     * @instance\n     * @returns {BigInteger}\n     */\n\n  }, {\n    key: \"bigInteger\",\n    value: function bigInteger() {\n      return new BigInteger(this.parsedAddress.map(paddedHex).join(''), 16);\n    }\n    /**\n     * Return the last two groups of this address as an IPv4 address string\n     * @memberof Address6\n     * @instance\n     * @returns {Address4}\n     * @example\n     * var address = new Address6('2001:4860:4001::1825:bf11');\n     * address.to4().correctForm(); // '24.37.191.17'\n     */\n\n  }, {\n    key: \"to4\",\n    value: function to4() {\n      var binary = this.binaryZeroPad().split('');\n      return Address4.fromHex(new BigInteger(binary.slice(96, 128).join(''), 2).toString(16));\n    }\n    /**\n     * Return the v4-in-v6 form of the address\n     * @memberof Address6\n     * @instance\n     * @returns {String}\n     */\n\n  }, {\n    key: \"to4in6\",\n    value: function to4in6() {\n      var address4 = this.to4();\n      var address6 = new Address6(this.parsedAddress.slice(0, 6).join(':'), 6);\n      var correct = address6.correctForm();\n      var infix = '';\n\n      if (!/:$/.test(correct)) {\n        infix = ':';\n      }\n\n      return correct + infix + address4.address;\n    }\n    /**\n     * Return an object containing the Teredo properties of the address\n     * @memberof Address6\n     * @instance\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"inspectTeredo\",\n    value: function inspectTeredo() {\n      /*\n      - Bits 0 to 31 are set to the Teredo prefix (normally 2001:0000::/32).\n      - Bits 32 to 63 embed the primary IPv4 address of the Teredo server that\n        is used.\n      - Bits 64 to 79 can be used to define some flags. Currently only the\n        higher order bit is used; it is set to 1 if the Teredo client is\n        located behind a cone NAT, 0 otherwise. For Microsoft's Windows Vista\n        and Windows Server 2008 implementations, more bits are used. In those\n        implementations, the format for these 16 bits is \"CRAAAAUG AAAAAAAA\",\n        where \"C\" remains the \"Cone\" flag. The \"R\" bit is reserved for future\n        use. The \"U\" bit is for the Universal/Local flag (set to 0). The \"G\" bit\n        is Individual/Group flag (set to 0). The A bits are set to a 12-bit\n        randomly generated number chosen by the Teredo client to introduce\n        additional protection for the Teredo node against IPv6-based scanning\n        attacks.\n      - Bits 80 to 95 contains the obfuscated UDP port number. This is the\n        port number that is mapped by the NAT to the Teredo client with all\n        bits inverted.\n      - Bits 96 to 127 contains the obfuscated IPv4 address. This is the\n        public IPv4 address of the NAT with all bits inverted.\n      */\n      var prefix = this.getBitsBase16(0, 32);\n      var udpPort = this.getBits(80, 96).xor(new BigInteger('ffff', 16)).toString();\n      var server4 = Address4.fromHex(this.getBitsBase16(32, 64));\n      var client4 = Address4.fromHex(this.getBits(96, 128).xor(new BigInteger('ffffffff', 16)).toString(16));\n      var flags = this.getBits(64, 80);\n      var flagsBase2 = this.getBitsBase2(64, 80);\n      var coneNat = flags.testBit(15);\n      var reserved = flags.testBit(14);\n      var groupIndividual = flags.testBit(8);\n      var universalLocal = flags.testBit(9);\n      var nonce = new BigInteger(flagsBase2.slice(2, 6) + flagsBase2.slice(8, 16), 2).toString(10);\n      return {\n        prefix: sprintf('%s:%s', prefix.slice(0, 4), prefix.slice(4, 8)),\n        server4: server4.address,\n        client4: client4.address,\n        flags: flagsBase2,\n        coneNat: coneNat,\n        microsoft: {\n          reserved: reserved,\n          universalLocal: universalLocal,\n          groupIndividual: groupIndividual,\n          nonce: nonce\n        },\n        udpPort: udpPort\n      };\n    }\n    /**\n     * Return an object containing the 6to4 properties of the address\n     * @memberof Address6\n     * @instance\n     * @returns {Object}\n     */\n\n  }, {\n    key: \"inspect6to4\",\n    value: function inspect6to4() {\n      /*\n      - Bits 0 to 15 are set to the 6to4 prefix (2002::/16).\n      - Bits 16 to 48 embed the IPv4 address of the 6to4 gateway that is used.\n      */\n      var prefix = this.getBitsBase16(0, 16);\n      var gateway = Address4.fromHex(this.getBitsBase16(16, 48));\n      return {\n        prefix: sprintf('%s', prefix.slice(0, 4)),\n        gateway: gateway.address\n      };\n    }\n    /**\n     * Return a v6 6to4 address from a v6 v4inv6 address\n     * @memberof Address6\n     * @instance\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"to6to4\",\n    value: function to6to4() {\n      if (!this.is4()) {\n        return null;\n      }\n\n      var addr6to4 = ['2002', this.getBitsBase16(96, 112), this.getBitsBase16(112, 128), '', '/16'].join(':');\n      return new Address6(addr6to4);\n    }\n    /**\n     * Return a byte array\n     * @memberof Address6\n     * @instance\n     * @returns {Array}\n     */\n\n  }, {\n    key: \"toByteArray\",\n    value: function toByteArray() {\n      var byteArray = this.bigInteger().toByteArray(); // work around issue where `toByteArray` returns a leading 0 element\n\n      if (byteArray.length === 17 && byteArray[0] === 0) {\n        return byteArray.slice(1);\n      }\n\n      return byteArray;\n    }\n    /**\n     * Return an unsigned byte array\n     * @memberof Address6\n     * @instance\n     * @returns {Array}\n     */\n\n  }, {\n    key: \"toUnsignedByteArray\",\n    value: function toUnsignedByteArray() {\n      return this.toByteArray().map(unsignByte);\n    }\n    /**\n     * Convert a byte array to an Address6 object\n     * @memberof Address6\n     * @static\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"isCanonical\",\n    value:\n    /**\n     * Returns true if the address is in the canonical form, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n    function isCanonical() {\n      return this.addressMinusSuffix === this.canonicalForm();\n    }\n    /**\n     * Returns true if the address is a link local address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isLinkLocal\",\n    value: function isLinkLocal() {\n      // Zeroes are required, i.e. we can't check isInSubnet with 'fe80::/10'\n      if (this.getBitsBase2(0, 64) === '1111111010000000000000000000000000000000000000000000000000000000') {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Returns true if the address is a multicast address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isMulticast\",\n    value: function isMulticast() {\n      return this.getType() === 'Multicast';\n    }\n    /**\n     * Returns true if the address is a v4-in-v6 address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"is4\",\n    value: function is4() {\n      return this.v4;\n    }\n    /**\n     * Returns true if the address is a Teredo address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isTeredo\",\n    value: function isTeredo() {\n      return this.isInSubnet(new Address6('2001::/32'));\n    }\n    /**\n     * Returns true if the address is a 6to4 address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"is6to4\",\n    value: function is6to4() {\n      return this.isInSubnet(new Address6('2002::/16'));\n    }\n    /**\n     * Returns true if the address is a loopback address, false otherwise\n     * @memberof Address6\n     * @instance\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isLoopback\",\n    value: function isLoopback() {\n      return this.getType() === 'Loopback';\n    } // #endregion\n    // #region HTML\n\n    /**\n     * @returns {String} the address in link form with a default port of 80\n     */\n\n  }, {\n    key: \"href\",\n    value: function href(optionalPort) {\n      if (optionalPort === undefined) {\n        optionalPort = '';\n      } else {\n        optionalPort = sprintf(':%s', optionalPort);\n      }\n\n      return sprintf('http://[%s]%s/', this.correctForm(), optionalPort);\n    }\n    /**\n     * @returns {String} a link suitable for conveying the address via a URL hash\n     */\n\n  }, {\n    key: \"link\",\n    value: function link(options) {\n      if (!options) {\n        options = {};\n      }\n\n      if (options.className === undefined) {\n        options.className = '';\n      }\n\n      if (options.prefix === undefined) {\n        options.prefix = '/#address=';\n      }\n\n      if (options.v4 === undefined) {\n        options.v4 = false;\n      }\n\n      var formFunction = this.correctForm;\n\n      if (options.v4) {\n        formFunction = this.to4in6;\n      }\n\n      if (options.className) {\n        return sprintf('<a href=\"%1$s%2$s\" class=\"%3$s\">%2$s</a>', options.prefix, formFunction.call(this), options.className);\n      }\n\n      return sprintf('<a href=\"%1$s%2$s\">%2$s</a>', options.prefix, formFunction.call(this));\n    }\n    /**\n     * Groups an address\n     * @returns {String}\n     */\n\n  }, {\n    key: \"group\",\n    value: function group() {\n      if (this.elidedGroups === 0) {\n        // The simple case\n        return helpers.simpleGroup(this.address).join(':');\n      }\n\n      assert(typeof this.elidedGroups === 'number');\n      assert(typeof this.elisionBegin === 'number'); // The elided case\n\n      var output = [];\n\n      var _this$address$split = this.address.split('::'),\n          _this$address$split2 = _slicedToArray(_this$address$split, 2),\n          left = _this$address$split2[0],\n          right = _this$address$split2[1];\n\n      if (left.length) {\n        output.push.apply(output, _toConsumableArray(helpers.simpleGroup(left)));\n      } else {\n        output.push('');\n      }\n\n      var classes = ['hover-group'];\n\n      for (var i = this.elisionBegin; i < this.elisionBegin + this.elidedGroups; i++) {\n        classes.push(sprintf('group-%d', i));\n      }\n\n      output.push(sprintf('<span class=\"%s\"></span>', classes.join(' ')));\n\n      if (right.length) {\n        output.push.apply(output, _toConsumableArray(helpers.simpleGroup(right, this.elisionEnd)));\n      } else {\n        output.push('');\n      }\n\n      if (this.is4()) {\n        assert(this.address4 instanceof Address4);\n        output.pop();\n        output.push(this.address4.groupForV6());\n      }\n\n      return output.join(':');\n    } // #endregion\n    // #region Regular expressions\n\n    /**\n     * Generate a regular expression string that can be used to find or validate\n     * all variations of this address\n     * @memberof Address6\n     * @instance\n     * @param {boolean} substringSearch\n     * @returns {string}\n     */\n\n  }, {\n    key: \"regularExpressionString\",\n    value: function regularExpressionString() {\n      var substringSearch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var output = []; // TODO: revisit why this is necessary\n\n      var address6 = new Address6(this.correctForm());\n\n      if (address6.elidedGroups === 0) {\n        // The simple case\n        output.push(simpleRegularExpression(address6.parsedAddress));\n      } else if (address6.elidedGroups === constants6.GROUPS) {\n        // A completely elided address\n        output.push(possibleElisions(constants6.GROUPS));\n      } else {\n        // A partially elided address\n        var halves = address6.address.split('::');\n\n        if (halves[0].length) {\n          output.push(simpleRegularExpression(halves[0].split(':')));\n        }\n\n        assert(typeof address6.elidedGroups === 'number');\n        output.push(possibleElisions(address6.elidedGroups, halves[0].length !== 0, halves[1].length !== 0));\n\n        if (halves[1].length) {\n          output.push(simpleRegularExpression(halves[1].split(':')));\n        }\n\n        output = [output.join(':')];\n      }\n\n      if (!substringSearch) {\n        output = ['(?=^|', ADDRESS_BOUNDARY, '|[^\\\\w\\\\:])('].concat(_toConsumableArray(output), [')(?=[^\\\\w\\\\:]|', ADDRESS_BOUNDARY, '|$)']);\n      }\n\n      return output.join('');\n    }\n    /**\n     * Generate a regular expression that can be used to find or validate all\n     * variations of this address.\n     * @memberof Address6\n     * @instance\n     * @param {boolean} substringSearch\n     * @returns {RegExp}\n     */\n\n  }, {\n    key: \"regularExpression\",\n    value: function regularExpression() {\n      var substringSearch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return new RegExp(this.regularExpressionString(substringSearch), 'i');\n    }\n  }], [{\n    key: \"isValid\",\n    value: function isValid(address) {\n      try {\n        // eslint-disable-next-line no-new\n        new Address6(address);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n    /**\n     * Convert a BigInteger to a v6 address object\n     * @memberof Address6\n     * @static\n     * @param {BigInteger} bigInteger - a BigInteger to convert\n     * @returns {Address6}\n     * @example\n     * var bigInteger = new BigInteger('1000000000000');\n     * var address = Address6.fromBigInteger(bigInteger);\n     * address.correctForm(); // '::e8:d4a5:1000'\n     */\n\n  }, {\n    key: \"fromBigInteger\",\n    value: function fromBigInteger(bigInteger) {\n      var hex = bigInteger.toString(16).padStart(32, '0');\n      var groups = [];\n      var i;\n\n      for (i = 0; i < constants6.GROUPS; i++) {\n        groups.push(hex.slice(i * 4, (i + 1) * 4));\n      }\n\n      return new Address6(groups.join(':'));\n    }\n    /**\n     * Convert a URL (with optional port number) to an address object\n     * @memberof Address6\n     * @static\n     * @param {string} url - a URL with optional port number\n     * @example\n     * var addressAndPort = Address6.fromURL('http://[ffff::]:8080/foo/');\n     * addressAndPort.address.correctForm(); // 'ffff::'\n     * addressAndPort.port; // 8080\n     */\n\n  }, {\n    key: \"fromURL\",\n    value: function fromURL(url) {\n      var host;\n      var port = null;\n      var result; // If we have brackets parse them and find a port\n\n      if (url.indexOf('[') !== -1 && url.indexOf(']:') !== -1) {\n        result = constants6.RE_URL_WITH_PORT.exec(url);\n\n        if (result === null) {\n          return {\n            error: 'failed to parse address with port',\n            address: null,\n            port: null\n          };\n        }\n\n        host = result[1];\n        port = result[2]; // If there's a URL extract the address\n      } else if (url.indexOf('/') !== -1) {\n        // Remove the protocol prefix\n        url = url.replace(/^[a-z0-9]+:\\/\\//, ''); // Parse the address\n\n        result = constants6.RE_URL.exec(url);\n\n        if (result === null) {\n          return {\n            error: 'failed to parse address from URL',\n            address: null,\n            port: null\n          };\n        }\n\n        host = result[1]; // Otherwise just assign the URL to the host and let the library parse it\n      } else {\n        host = url;\n      } // If there's a port convert it to an integer\n\n\n      if (port) {\n        port = parseInt(port, 10); // squelch out of range ports\n\n        if (port < 0 || port > 65536) {\n          port = null;\n        }\n      } else {\n        // Standardize `undefined` to `null`\n        port = null;\n      }\n\n      return {\n        address: new Address6(host),\n        port: port\n      };\n    }\n    /**\n     * Create an IPv6-mapped address given an IPv4 address\n     * @memberof Address6\n     * @static\n     * @param {string} address - An IPv4 address string\n     * @returns {Address6}\n     * @example\n     * var address = Address6.fromAddress4('192.168.0.1');\n     * address.correctForm(); // '::ffff:c0a8:1'\n     * address.to4in6(); // '::ffff:192.168.0.1'\n     */\n\n  }, {\n    key: \"fromAddress4\",\n    value: function fromAddress4(address) {\n      var address4 = new Address4(address);\n      var mask6 = constants6.BITS - (constants4.BITS - address4.subnetMask);\n      return new Address6(\"::ffff:\".concat(address4.correctForm(), \"/\").concat(mask6));\n    }\n    /**\n     * Return an address from ip6.arpa form\n     * @memberof Address6\n     * @static\n     * @param {string} arpaFormAddress - an 'ip6.arpa' form address\n     * @returns {Adress6}\n     * @example\n     * var address = Address6.fromArpa(e.f.f.f.3.c.2.6.f.f.f.e.6.6.8.e.1.0.6.7.9.4.e.c.0.0.0.0.1.0.0.2.ip6.arpa.)\n     * address.correctForm(); // '2001:0:ce49:7601:e866:efff:62c3:fffe'\n     */\n\n  }, {\n    key: \"fromArpa\",\n    value: function fromArpa(arpaFormAddress) {\n      // remove ending \".ip6.arpa.\" or just \".\"\n      var address = arpaFormAddress.replace(/(\\.ip6\\.arpa)?\\.$/, '');\n      var semicolonAmount = 7; // correct ip6.arpa form with ending removed will be 63 characters\n\n      if (address.length !== 63) {\n        throw new AddressError(\"Invalid 'ip6.arpa' form.\");\n      }\n\n      var parts = address.split('.').reverse();\n\n      for (var i = semicolonAmount; i > 0; i--) {\n        var insertIndex = i * 4;\n        parts.splice(insertIndex, 0, ':');\n      }\n\n      address = parts.join('');\n      return new Address6(address);\n    }\n  }, {\n    key: \"fromByteArray\",\n    value: function fromByteArray(bytes) {\n      return this.fromUnsignedByteArray(bytes.map(unsignByte));\n    }\n    /**\n     * Convert an unsigned byte array to an Address6 object\n     * @memberof Address6\n     * @static\n     * @returns {Address6}\n     */\n\n  }, {\n    key: \"fromUnsignedByteArray\",\n    value: function fromUnsignedByteArray(bytes) {\n      var BYTE_MAX = new BigInteger('256', 10);\n      var result = new BigInteger('0', 10);\n      var multiplier = new BigInteger('1', 10);\n\n      for (var i = bytes.length - 1; i >= 0; i--) {\n        result = result.add(multiplier.multiply(new BigInteger(bytes[i].toString(10), 10)));\n        multiplier = multiplier.multiply(BYTE_MAX);\n      }\n\n      return Address6.fromBigInteger(result);\n    }\n  }]);\n\n  return Address6;\n}();","map":{"version":3,"mappings":"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","names":["common","constants4","constants6","helpers","Address4","ADDRESS_BOUNDARY","possibleElisions","simpleRegularExpression","AddressError","BigInteger","sprintf","assert","condition","Error","addCommas","number","r","test","replace","spanLeadingZeroes4","n","compact","address","slice","s1","s2","i","length","push","concat","paddedHex","octet","parseInt","unsignByte","b","Address6","optionalGroups","isInSubnet","isCorrect","BITS","undefined","groups","GROUPS","subnet","RE_SUBNET_STRING","exec","parsedSubnet","subnetMask","Number","isNaN","zone","RE_ZONE_STRING","addressMinusSuffix","parsedAddress","parse","correctForm","mask","getBitsBase2","subnetSize","availableBits","subnetBits","Math","abs","subnetPowers","pow","toString","repeat","fromBigInteger","_startAddress","adjust","add","_endAddress","subtract","scope","SCOPES","getBits","intValue","getType","Object","keys","TYPES","start","end","binaryZeroPad","padStart","options","characters","floor","reversed","canonicalForm","split","reverse","join","omitSuffix","zeroCounter","zeroes","value","zeroLengths","map","index","indexOf","max","correct","bigInteger","lastGroup","address4","match","RE_ADDRESS","parsedAddress4","v4","toGroup6","parse4in6","badCharacters","RE_BAD_CHARACTERS","badAddress","RE_BAD_ADDRESS","halves","first","last","remaining","elidedGroups","elisionBegin","elisionEnd","group","binary","fromHex","to4","address6","infix","prefix","getBitsBase16","udpPort","xor","server4","client4","flags","flagsBase2","coneNat","testBit","reserved","groupIndividual","universalLocal","nonce","microsoft","gateway","is4","addr6to4","byteArray","toByteArray","optionalPort","className","formFunction","to4in6","call","simpleGroup","output","left","right","classes","pop","groupForV6","substringSearch","RegExp","regularExpressionString","e","hex","url","host","port","result","RE_URL_WITH_PORT","error","RE_URL","mask6","arpaFormAddress","semicolonAmount","parts","insertIndex","splice","bytes","fromUnsignedByteArray","BYTE_MAX","multiplier","multiply"],"sourceRoot":"","sources":["../../../lib/ipv6.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}