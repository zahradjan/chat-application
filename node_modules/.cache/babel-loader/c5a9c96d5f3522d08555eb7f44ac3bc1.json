{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar varint = require('varint');\n\nvar dagCbor = require('@ipld/dag-cbor');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar varint__default = /*#__PURE__*/_interopDefaultLegacy(varint);\n\nfunction createHeader(roots) {\n  var headerBytes = dagCbor.encode({\n    version: 1,\n    roots: roots\n  });\n  var varintBytes = varint__default[\"default\"].encode(headerBytes.length);\n  var header = new Uint8Array(varintBytes.length + headerBytes.length);\n  header.set(varintBytes, 0);\n  header.set(headerBytes, varintBytes.length);\n  return header;\n}\n\nfunction createEncoder(writer) {\n  return {\n    setRoots: function setRoots(roots) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var bytes;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                bytes = createHeader(roots);\n                _context.next = 3;\n                return writer.write(bytes);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    writeBlock: function writeBlock(block) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var cid, bytes;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                cid = block.cid, bytes = block.bytes;\n                _context2.next = 3;\n                return writer.write(new Uint8Array(varint__default[\"default\"].encode(cid.bytes.length + bytes.length)));\n\n              case 3:\n                _context2.next = 5;\n                return writer.write(cid.bytes);\n\n              case 5:\n                if (!bytes.length) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 8;\n                return writer.write(bytes);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    close: function close() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", writer.end());\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  };\n}\n\nexports.createEncoder = createEncoder;\nexports.createHeader = createHeader;","map":{"version":3,"names":["Object","defineProperty","exports","value","varint","require","dagCbor","_interopDefaultLegacy","e","varint__default","createHeader","roots","headerBytes","encode","version","varintBytes","length","header","Uint8Array","set","createEncoder","writer","setRoots","bytes","write","writeBlock","block","cid","close","end"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/@ipld/car/cjs/lib/encoder.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar varint = require('varint');\nvar dagCbor = require('@ipld/dag-cbor');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar varint__default = /*#__PURE__*/_interopDefaultLegacy(varint);\n\nfunction createHeader(roots) {\n  const headerBytes = dagCbor.encode({\n    version: 1,\n    roots\n  });\n  const varintBytes = varint__default[\"default\"].encode(headerBytes.length);\n  const header = new Uint8Array(varintBytes.length + headerBytes.length);\n  header.set(varintBytes, 0);\n  header.set(headerBytes, varintBytes.length);\n  return header;\n}\nfunction createEncoder(writer) {\n  return {\n    async setRoots(roots) {\n      const bytes = createHeader(roots);\n      await writer.write(bytes);\n    },\n    async writeBlock(block) {\n      const {cid, bytes} = block;\n      await writer.write(new Uint8Array(varint__default[\"default\"].encode(cid.bytes.length + bytes.length)));\n      await writer.write(cid.bytes);\n      if (bytes.length) {\n        await writer.write(bytes);\n      }\n    },\n    async close() {\n      return writer.end();\n    }\n  };\n}\n\nexports.createEncoder = createEncoder;\nexports.createHeader = createHeader;\n"],"mappings":"AAAA;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;;AAEA,IAAIC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,gBAAD,CAArB;;AAEA,SAASE,qBAAT,CAAgCC,CAAhC,EAAmC;EAAE,OAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,aAAaA,CAA3C,GAA+CA,CAA/C,GAAmD;IAAE,WAAWA;EAAb,CAA1D;AAA6E;;AAElH,IAAIC,eAAe,GAAG,aAAaF,qBAAqB,CAACH,MAAD,CAAxD;;AAEA,SAASM,YAAT,CAAsBC,KAAtB,EAA6B;EAC3B,IAAMC,WAAW,GAAGN,OAAO,CAACO,MAAR,CAAe;IACjCC,OAAO,EAAE,CADwB;IAEjCH,KAAK,EAALA;EAFiC,CAAf,CAApB;EAIA,IAAMI,WAAW,GAAGN,eAAe,CAAC,SAAD,CAAf,CAA2BI,MAA3B,CAAkCD,WAAW,CAACI,MAA9C,CAApB;EACA,IAAMC,MAAM,GAAG,IAAIC,UAAJ,CAAeH,WAAW,CAACC,MAAZ,GAAqBJ,WAAW,CAACI,MAAhD,CAAf;EACAC,MAAM,CAACE,GAAP,CAAWJ,WAAX,EAAwB,CAAxB;EACAE,MAAM,CAACE,GAAP,CAAWP,WAAX,EAAwBG,WAAW,CAACC,MAApC;EACA,OAAOC,MAAP;AACD;;AACD,SAASG,aAAT,CAAuBC,MAAvB,EAA+B;EAC7B,OAAO;IACCC,QADD,oBACUX,KADV,EACiB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACdY,KADc,GACNb,YAAY,CAACC,KAAD,CADN;gBAAA;gBAAA,OAEdU,MAAM,CAACG,KAAP,CAAaD,KAAb,CAFc;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGrB,CAJI;IAKCE,UALD,sBAKYC,KALZ,EAKmB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACfC,GADe,GACDD,KADC,CACfC,GADe,EACVJ,KADU,GACDG,KADC,CACVH,KADU;gBAAA;gBAAA,OAEhBF,MAAM,CAACG,KAAP,CAAa,IAAIN,UAAJ,CAAeT,eAAe,CAAC,SAAD,CAAf,CAA2BI,MAA3B,CAAkCc,GAAG,CAACJ,KAAJ,CAAUP,MAAV,GAAmBO,KAAK,CAACP,MAA3D,CAAf,CAAb,CAFgB;;cAAA;gBAAA;gBAAA,OAGhBK,MAAM,CAACG,KAAP,CAAaG,GAAG,CAACJ,KAAjB,CAHgB;;cAAA;gBAAA,KAIlBA,KAAK,CAACP,MAJY;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAKdK,MAAM,CAACG,KAAP,CAAaD,KAAb,CALc;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAOvB,CAZI;IAaCK,KAbD,mBAaS;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,kCACLP,MAAM,CAACQ,GAAP,EADK;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEb;EAfI,CAAP;AAiBD;;AAED3B,OAAO,CAACkB,aAAR,GAAwBA,aAAxB;AACAlB,OAAO,CAACQ,YAAR,GAAuBA,YAAvB"},"metadata":{},"sourceType":"script"}