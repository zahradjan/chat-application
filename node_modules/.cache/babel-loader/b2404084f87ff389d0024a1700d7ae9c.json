{"ast":null,"code":"'use strict';\n\nmodule.exports = function clear(db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db._nextTick(callback);\n  var transaction = db.db.transaction([location], 'readwrite');\n  var store = transaction.objectStore(location);\n  var count = 0;\n\n  transaction.oncomplete = function () {\n    callback();\n  };\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'));\n  }; // A key cursor is faster (skips reading values) but not supported by IE\n\n\n  var method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor';\n  var direction = options.reverse ? 'prev' : 'next';\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    var cursor = ev.target.result;\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue();\n        }\n      };\n    }\n  };\n};","map":{"version":3,"names":["module","exports","clear","db","location","keyRange","options","callback","limit","_nextTick","transaction","store","objectStore","count","oncomplete","onabort","error","Error","method","openKeyCursor","direction","reverse","onsuccess","ev","cursor","target","result","delete","key","continue"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/level-js/util/clear.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function clear (db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db._nextTick(callback)\n\n  const transaction = db.db.transaction([location], 'readwrite')\n  const store = transaction.objectStore(location)\n  let count = 0\n\n  transaction.oncomplete = function () {\n    callback()\n  }\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'))\n  }\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  const method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n  const direction = options.reverse ? 'prev' : 'next'\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    const cursor = ev.target.result\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue()\n        }\n      }\n    }\n  }\n}\n"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,KAAT,CAAgBC,EAAhB,EAAoBC,QAApB,EAA8BC,QAA9B,EAAwCC,OAAxC,EAAiDC,QAAjD,EAA2D;EAC1E,IAAID,OAAO,CAACE,KAAR,KAAkB,CAAtB,EAAyB,OAAOL,EAAE,CAACM,SAAH,CAAaF,QAAb,CAAP;EAEzB,IAAMG,WAAW,GAAGP,EAAE,CAACA,EAAH,CAAMO,WAAN,CAAkB,CAACN,QAAD,CAAlB,EAA8B,WAA9B,CAApB;EACA,IAAMO,KAAK,GAAGD,WAAW,CAACE,WAAZ,CAAwBR,QAAxB,CAAd;EACA,IAAIS,KAAK,GAAG,CAAZ;;EAEAH,WAAW,CAACI,UAAZ,GAAyB,YAAY;IACnCP,QAAQ;EACT,CAFD;;EAIAG,WAAW,CAACK,OAAZ,GAAsB,YAAY;IAChCR,QAAQ,CAACG,WAAW,CAACM,KAAZ,IAAqB,IAAIC,KAAJ,CAAU,iBAAV,CAAtB,CAAR;EACD,CAFD,CAX0E,CAe1E;;;EACA,IAAMC,MAAM,GAAGP,KAAK,CAACQ,aAAN,GAAsB,eAAtB,GAAwC,YAAvD;EACA,IAAMC,SAAS,GAAGd,OAAO,CAACe,OAAR,GAAkB,MAAlB,GAA2B,MAA7C;;EAEAV,KAAK,CAACO,MAAD,CAAL,CAAcb,QAAd,EAAwBe,SAAxB,EAAmCE,SAAnC,GAA+C,UAAUC,EAAV,EAAc;IAC3D,IAAMC,MAAM,GAAGD,EAAE,CAACE,MAAH,CAAUC,MAAzB;;IAEA,IAAIF,MAAJ,EAAY;MACV;MACAb,KAAK,CAACgB,MAAN,CAAaH,MAAM,CAACI,GAApB,EAAyBN,SAAzB,GAAqC,YAAY;QAC/C,IAAIhB,OAAO,CAACE,KAAR,IAAiB,CAAjB,IAAsB,EAAEK,KAAF,GAAUP,OAAO,CAACE,KAA5C,EAAmD;UACjDgB,MAAM,CAACK,QAAP;QACD;MACF,CAJD;IAKD;EACF,CAXD;AAYD,CA/BD"},"metadata":{},"sourceType":"script"}