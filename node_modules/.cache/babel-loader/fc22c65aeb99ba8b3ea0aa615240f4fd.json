{"ast":null,"code":"import { makeAutoObservable, runInAction } from \"mobx\";\nexport default class UserStore {\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    this.user = undefined;\n    makeAutoObservable(this);\n  }\n\n  async init() {\n    await this.setUserStore();\n  }\n\n  isUserStoreReady() {\n    return !!this.user;\n  }\n\n  async setUserStore() {\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\n    const defaultOptions = {\n      accessController: {\n        write: [this.rootStore.dataStore.orbitDb.identity.id]\n      }\n    };\n    await this.rootStore.dataStore.orbitDb.kvstore(\"user\", defaultOptions).then(data => runInAction(() => {\n      this.user = data;\n    }));\n    await this.user.load();\n  }\n\n  async deleteProfileField(key) {\n    const cid = await this.user.del(key);\n    return cid;\n  }\n\n  getAllProfileFields() {\n    return this.user.all;\n  }\n\n  getProfileField(key) {\n    return this.user.get(key);\n  }\n\n  async updateUserField(key, value) {\n    const cid = await this.user.set(key, value);\n    return cid;\n  }\n\n  async loadFixtureData(fixtureData) {\n    const fixtureKeys = Object.keys(fixtureData);\n\n    for (let i in fixtureKeys) {\n      let key = fixtureKeys[i];\n      if (!this.user.get(key)) await this.user.set(key, fixtureData[key]);\n    }\n  }\n\n}","map":{"version":3,"names":["makeAutoObservable","runInAction","UserStore","constructor","rootStore","user","undefined","init","setUserStore","isUserStoreReady","dataStore","orbitDb","Error","defaultOptions","accessController","write","identity","id","kvstore","then","data","load","deleteProfileField","key","cid","del","getAllProfileFields","all","getProfileField","get","updateUserField","value","set","loadFixtureData","fixtureData","fixtureKeys","Object","keys","i"],"sources":["C:/Users/zajan/GitHub/chatApplication/src/data/store/UserStore.js"],"sourcesContent":["import { makeAutoObservable, runInAction } from \"mobx\";\r\n\r\nexport default class UserStore {\r\n  user;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.user = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    await this.setUserStore();\r\n  }\r\n  isUserStoreReady() {\r\n    return !!this.user;\r\n  }\r\n  async setUserStore() {\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n    const defaultOptions = { accessController: { write: [this.rootStore.dataStore.orbitDb.identity.id] } };\r\n    await this.rootStore.dataStore.orbitDb.kvstore(\"user\", defaultOptions).then((data) =>\r\n      runInAction(() => {\r\n        this.user = data;\r\n      })\r\n    );\r\n    await this.user.load();\r\n  }\r\n\r\n  async deleteProfileField(key) {\r\n    const cid = await this.user.del(key);\r\n    return cid;\r\n  }\r\n\r\n  getAllProfileFields() {\r\n    return this.user.all;\r\n  }\r\n\r\n  getProfileField(key) {\r\n    return this.user.get(key);\r\n  }\r\n\r\n  async updateUserField(key, value) {\r\n    const cid = await this.user.set(key, value);\r\n    return cid;\r\n  }\r\n  async loadFixtureData(fixtureData) {\r\n    const fixtureKeys = Object.keys(fixtureData);\r\n    for (let i in fixtureKeys) {\r\n      let key = fixtureKeys[i];\r\n      if (!this.user.get(key)) await this.user.set(key, fixtureData[key]);\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,WAA7B,QAAgD,MAAhD;AAEA,eAAe,MAAMC,SAAN,CAAgB;EAE7BC,WAAW,CAACC,SAAD,EAAY;IACrB,KAAKA,SAAL,GAAiBA,SAAjB;IACA,KAAKC,IAAL,GAAYC,SAAZ;IACAN,kBAAkB,CAAC,IAAD,CAAlB;EACD;;EAES,MAAJO,IAAI,GAAG;IACX,MAAM,KAAKC,YAAL,EAAN;EACD;;EACDC,gBAAgB,GAAG;IACjB,OAAO,CAAC,CAAC,KAAKJ,IAAd;EACD;;EACiB,MAAZG,YAAY,GAAG;IACnB,IAAI,KAAKJ,SAAL,CAAeM,SAAf,CAAyBC,OAAzB,KAAqCL,SAAzC,EAAoD,MAAMM,KAAK,CAAC,sBAAD,CAAX;IACpD,MAAMC,cAAc,GAAG;MAAEC,gBAAgB,EAAE;QAAEC,KAAK,EAAE,CAAC,KAAKX,SAAL,CAAeM,SAAf,CAAyBC,OAAzB,CAAiCK,QAAjC,CAA0CC,EAA3C;MAAT;IAApB,CAAvB;IACA,MAAM,KAAKb,SAAL,CAAeM,SAAf,CAAyBC,OAAzB,CAAiCO,OAAjC,CAAyC,MAAzC,EAAiDL,cAAjD,EAAiEM,IAAjE,CAAuEC,IAAD,IAC1EnB,WAAW,CAAC,MAAM;MAChB,KAAKI,IAAL,GAAYe,IAAZ;IACD,CAFU,CADP,CAAN;IAKA,MAAM,KAAKf,IAAL,CAAUgB,IAAV,EAAN;EACD;;EAEuB,MAAlBC,kBAAkB,CAACC,GAAD,EAAM;IAC5B,MAAMC,GAAG,GAAG,MAAM,KAAKnB,IAAL,CAAUoB,GAAV,CAAcF,GAAd,CAAlB;IACA,OAAOC,GAAP;EACD;;EAEDE,mBAAmB,GAAG;IACpB,OAAO,KAAKrB,IAAL,CAAUsB,GAAjB;EACD;;EAEDC,eAAe,CAACL,GAAD,EAAM;IACnB,OAAO,KAAKlB,IAAL,CAAUwB,GAAV,CAAcN,GAAd,CAAP;EACD;;EAEoB,MAAfO,eAAe,CAACP,GAAD,EAAMQ,KAAN,EAAa;IAChC,MAAMP,GAAG,GAAG,MAAM,KAAKnB,IAAL,CAAU2B,GAAV,CAAcT,GAAd,EAAmBQ,KAAnB,CAAlB;IACA,OAAOP,GAAP;EACD;;EACoB,MAAfS,eAAe,CAACC,WAAD,EAAc;IACjC,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYH,WAAZ,CAApB;;IACA,KAAK,IAAII,CAAT,IAAcH,WAAd,EAA2B;MACzB,IAAIZ,GAAG,GAAGY,WAAW,CAACG,CAAD,CAArB;MACA,IAAI,CAAC,KAAKjC,IAAL,CAAUwB,GAAV,CAAcN,GAAd,CAAL,EAAyB,MAAM,KAAKlB,IAAL,CAAU2B,GAAV,CAAcT,GAAd,EAAmBW,WAAW,CAACX,GAAD,CAA9B,CAAN;IAC1B;EACF;;AAhD4B"},"metadata":{},"sourceType":"module"}