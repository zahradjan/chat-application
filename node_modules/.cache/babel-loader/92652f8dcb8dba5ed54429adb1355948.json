{"ast":null,"code":"var nextTick = require('./next-tick');\n\nfunction AbstractIterator(db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store');\n  }\n\n  this.db = db;\n  this._ended = false;\n  this._nexting = false;\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this;\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument');\n  }\n\n  if (self._ended) {\n    nextTick(callback, new Error('cannot call next() after end()'));\n    return self;\n  }\n\n  if (self._nexting) {\n    nextTick(callback, new Error('cannot call next() before previous next() has completed'));\n    return self;\n  }\n\n  self._nexting = true;\n\n  self._next(function () {\n    self._nexting = false;\n    callback.apply(null, arguments);\n  });\n\n  return self;\n};\n\nAbstractIterator.prototype._next = function (callback) {\n  nextTick(callback);\n};\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()');\n  }\n\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed');\n  }\n\n  target = this.db._serializeKey(target);\n\n  this._seek(target);\n};\n\nAbstractIterator.prototype._seek = function (target) {};\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument');\n  }\n\n  if (this._ended) {\n    return nextTick(callback, new Error('end() already called on iterator'));\n  }\n\n  this._ended = true;\n\n  this._end(callback);\n};\n\nAbstractIterator.prototype._end = function (callback) {\n  nextTick(callback);\n}; // Expose browser-compatible nextTick for dependents\n\n\nAbstractIterator.prototype._nextTick = nextTick;\nmodule.exports = AbstractIterator;","map":{"version":3,"names":["nextTick","require","AbstractIterator","db","TypeError","_ended","_nexting","prototype","next","callback","self","Error","_next","apply","arguments","seek","target","_serializeKey","_seek","end","_end","_nextTick","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-keystore/node_modules/level-packager/node_modules/abstract-leveldown/abstract-iterator.js"],"sourcesContent":["var nextTick = require('./next-tick')\n\nfunction AbstractIterator (db) {\n  if (typeof db !== 'object' || db === null) {\n    throw new TypeError('First argument must be an abstract-leveldown compliant store')\n  }\n\n  this.db = db\n  this._ended = false\n  this._nexting = false\n}\n\nAbstractIterator.prototype.next = function (callback) {\n  var self = this\n\n  if (typeof callback !== 'function') {\n    throw new Error('next() requires a callback argument')\n  }\n\n  if (self._ended) {\n    nextTick(callback, new Error('cannot call next() after end()'))\n    return self\n  }\n\n  if (self._nexting) {\n    nextTick(callback, new Error('cannot call next() before previous next() has completed'))\n    return self\n  }\n\n  self._nexting = true\n  self._next(function () {\n    self._nexting = false\n    callback.apply(null, arguments)\n  })\n\n  return self\n}\n\nAbstractIterator.prototype._next = function (callback) {\n  nextTick(callback)\n}\n\nAbstractIterator.prototype.seek = function (target) {\n  if (this._ended) {\n    throw new Error('cannot call seek() after end()')\n  }\n  if (this._nexting) {\n    throw new Error('cannot call seek() before next() has completed')\n  }\n\n  target = this.db._serializeKey(target)\n  this._seek(target)\n}\n\nAbstractIterator.prototype._seek = function (target) {}\n\nAbstractIterator.prototype.end = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new Error('end() requires a callback argument')\n  }\n\n  if (this._ended) {\n    return nextTick(callback, new Error('end() already called on iterator'))\n  }\n\n  this._ended = true\n  this._end(callback)\n}\n\nAbstractIterator.prototype._end = function (callback) {\n  nextTick(callback)\n}\n\n// Expose browser-compatible nextTick for dependents\nAbstractIterator.prototype._nextTick = nextTick\n\nmodule.exports = AbstractIterator\n"],"mappings":"AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AAEA,SAASC,gBAAT,CAA2BC,EAA3B,EAA+B;EAC7B,IAAI,OAAOA,EAAP,KAAc,QAAd,IAA0BA,EAAE,KAAK,IAArC,EAA2C;IACzC,MAAM,IAAIC,SAAJ,CAAc,8DAAd,CAAN;EACD;;EAED,KAAKD,EAAL,GAAUA,EAAV;EACA,KAAKE,MAAL,GAAc,KAAd;EACA,KAAKC,QAAL,GAAgB,KAAhB;AACD;;AAEDJ,gBAAgB,CAACK,SAAjB,CAA2BC,IAA3B,GAAkC,UAAUC,QAAV,EAAoB;EACpD,IAAIC,IAAI,GAAG,IAAX;;EAEA,IAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;IAClC,MAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;EACD;;EAED,IAAID,IAAI,CAACL,MAAT,EAAiB;IACfL,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,gCAAV,CAAX,CAAR;IACA,OAAOD,IAAP;EACD;;EAED,IAAIA,IAAI,CAACJ,QAAT,EAAmB;IACjBN,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,yDAAV,CAAX,CAAR;IACA,OAAOD,IAAP;EACD;;EAEDA,IAAI,CAACJ,QAAL,GAAgB,IAAhB;;EACAI,IAAI,CAACE,KAAL,CAAW,YAAY;IACrBF,IAAI,CAACJ,QAAL,GAAgB,KAAhB;IACAG,QAAQ,CAACI,KAAT,CAAe,IAAf,EAAqBC,SAArB;EACD,CAHD;;EAKA,OAAOJ,IAAP;AACD,CAxBD;;AA0BAR,gBAAgB,CAACK,SAAjB,CAA2BK,KAA3B,GAAmC,UAAUH,QAAV,EAAoB;EACrDT,QAAQ,CAACS,QAAD,CAAR;AACD,CAFD;;AAIAP,gBAAgB,CAACK,SAAjB,CAA2BQ,IAA3B,GAAkC,UAAUC,MAAV,EAAkB;EAClD,IAAI,KAAKX,MAAT,EAAiB;IACf,MAAM,IAAIM,KAAJ,CAAU,gCAAV,CAAN;EACD;;EACD,IAAI,KAAKL,QAAT,EAAmB;IACjB,MAAM,IAAIK,KAAJ,CAAU,gDAAV,CAAN;EACD;;EAEDK,MAAM,GAAG,KAAKb,EAAL,CAAQc,aAAR,CAAsBD,MAAtB,CAAT;;EACA,KAAKE,KAAL,CAAWF,MAAX;AACD,CAVD;;AAYAd,gBAAgB,CAACK,SAAjB,CAA2BW,KAA3B,GAAmC,UAAUF,MAAV,EAAkB,CAAE,CAAvD;;AAEAd,gBAAgB,CAACK,SAAjB,CAA2BY,GAA3B,GAAiC,UAAUV,QAAV,EAAoB;EACnD,IAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;IAClC,MAAM,IAAIE,KAAJ,CAAU,oCAAV,CAAN;EACD;;EAED,IAAI,KAAKN,MAAT,EAAiB;IACf,OAAOL,QAAQ,CAACS,QAAD,EAAW,IAAIE,KAAJ,CAAU,kCAAV,CAAX,CAAf;EACD;;EAED,KAAKN,MAAL,GAAc,IAAd;;EACA,KAAKe,IAAL,CAAUX,QAAV;AACD,CAXD;;AAaAP,gBAAgB,CAACK,SAAjB,CAA2Ba,IAA3B,GAAkC,UAAUX,QAAV,EAAoB;EACpDT,QAAQ,CAACS,QAAD,CAAR;AACD,CAFD,C,CAIA;;;AACAP,gBAAgB,CAACK,SAAjB,CAA2Bc,SAA3B,GAAuCrB,QAAvC;AAEAsB,MAAM,CAACC,OAAP,GAAiBrB,gBAAjB"},"metadata":{},"sourceType":"script"}