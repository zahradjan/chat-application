{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _inherits = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _asyncIterator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncIterator.js\").default;\n\nvar _awaitAsyncGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js\").default;\n\nvar _wrapAsyncGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js\").default;\n\nvar dagPb = require('@ipld/dag-pb');\n\nvar ipfsUnixfs = require('ipfs-unixfs');\n\nvar dir = require('./dir.js');\n\nvar persist = require('./utils/persist.js');\n\nvar DirFlat = /*#__PURE__*/function (_dir) {\n  _inherits(DirFlat, _dir);\n\n  var _super = _createSuper(DirFlat);\n\n  function DirFlat(props, options) {\n    var _this3;\n\n    _classCallCheck(this, DirFlat);\n\n    _this3 = _super.call(this, props, options);\n    _this3._children = {};\n    return _this3;\n  }\n\n  _createClass(DirFlat, [{\n    key: \"put\",\n    value: function () {\n      var _put = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name, value) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.cid = undefined;\n                this.size = undefined;\n                this._children[name] = value;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function put(_x, _x2) {\n        return _put.apply(this, arguments);\n      }\n\n      return put;\n    }()\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return Promise.resolve(this._children[name]);\n    }\n  }, {\n    key: \"childCount\",\n    value: function childCount() {\n      return Object.keys(this._children).length;\n    }\n  }, {\n    key: \"directChildrenCount\",\n    value: function directChildrenCount() {\n      return this.childCount();\n    }\n  }, {\n    key: \"onlyChild\",\n    value: function onlyChild() {\n      return this._children[Object.keys(this._children)[0]];\n    }\n  }, {\n    key: \"eachChildSeries\",\n    value: function eachChildSeries() {\n      var _this = this;\n\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var keys, i, key;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                keys = Object.keys(_this._children);\n                i = 0;\n\n              case 2:\n                if (!(i < keys.length)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                key = keys[i];\n                _context2.next = 6;\n                return {\n                  key: key,\n                  child: _this._children[key]\n                };\n\n              case 6:\n                i++;\n                _context2.next = 2;\n                break;\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  }, {\n    key: \"flush\",\n    value: function flush(block) {\n      var _this2 = this;\n\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var children, links, i, child, _iteratorAbruptCompletion, _didIteratorError, _iteratorError, _iterator, _step, entry, unixfs, node, buffer, cid, size;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                children = Object.keys(_this2._children);\n                links = [];\n                i = 0;\n\n              case 3:\n                if (!(i < children.length)) {\n                  _context3.next = 40;\n                  break;\n                }\n\n                child = _this2._children[children[i]];\n\n                if (!(child instanceof dir)) {\n                  _context3.next = 36;\n                  break;\n                }\n\n                _iteratorAbruptCompletion = false;\n                _didIteratorError = false;\n                _context3.prev = 8;\n                _iterator = _asyncIterator(child.flush(block));\n\n              case 10:\n                _context3.next = 12;\n                return _awaitAsyncGenerator(_iterator.next());\n\n              case 12:\n                if (!(_iteratorAbruptCompletion = !(_step = _context3.sent).done)) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                entry = _step.value;\n                child = entry;\n                _context3.next = 17;\n                return child;\n\n              case 17:\n                _iteratorAbruptCompletion = false;\n                _context3.next = 10;\n                break;\n\n              case 20:\n                _context3.next = 26;\n                break;\n\n              case 22:\n                _context3.prev = 22;\n                _context3.t0 = _context3[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context3.t0;\n\n              case 26:\n                _context3.prev = 26;\n                _context3.prev = 27;\n\n                if (!(_iteratorAbruptCompletion && _iterator.return != null)) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                _context3.next = 31;\n                return _awaitAsyncGenerator(_iterator.return());\n\n              case 31:\n                _context3.prev = 31;\n\n                if (!_didIteratorError) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 34:\n                return _context3.finish(31);\n\n              case 35:\n                return _context3.finish(26);\n\n              case 36:\n                if (child.size != null && child.cid) {\n                  links.push({\n                    Name: children[i],\n                    Tsize: child.size,\n                    Hash: child.cid\n                  });\n                }\n\n              case 37:\n                i++;\n                _context3.next = 3;\n                break;\n\n              case 40:\n                unixfs = new ipfsUnixfs.UnixFS({\n                  type: 'directory',\n                  mtime: _this2.mtime,\n                  mode: _this2.mode\n                });\n                node = {\n                  Data: unixfs.marshal(),\n                  Links: links\n                };\n                buffer = dagPb.encode(dagPb.prepare(node));\n                _context3.next = 45;\n                return _awaitAsyncGenerator(persist(buffer, block, _this2.options));\n\n              case 45:\n                cid = _context3.sent;\n                size = buffer.length + node.Links.reduce(function (acc, curr) {\n                  return acc + (curr.Tsize == null ? 0 : curr.Tsize);\n                }, 0);\n                _this2.cid = cid;\n                _this2.size = size;\n                _context3.next = 51;\n                return {\n                  cid: cid,\n                  unixfs: unixfs,\n                  path: _this2.path,\n                  size: size\n                };\n\n              case 51:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[8, 22, 26, 36], [27,, 31, 35]]);\n      }))();\n    }\n  }]);\n\n  return DirFlat;\n}(dir);\n\nmodule.exports = DirFlat;","map":{"version":3,"names":["dagPb","require","ipfsUnixfs","dir","persist","DirFlat","props","options","_children","name","value","cid","undefined","size","Promise","resolve","Object","keys","length","childCount","i","key","child","block","children","links","flush","entry","push","Name","Tsize","Hash","unixfs","UnixFS","type","mtime","mode","node","Data","marshal","Links","buffer","encode","prepare","reduce","acc","curr","path","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/ipfs-unixfs-importer/cjs/src/dir-flat.js"],"sourcesContent":["'use strict';\n\nvar dagPb = require('@ipld/dag-pb');\nvar ipfsUnixfs = require('ipfs-unixfs');\nvar dir = require('./dir.js');\nvar persist = require('./utils/persist.js');\n\nclass DirFlat extends dir {\n  constructor(props, options) {\n    super(props, options);\n    this._children = {};\n  }\n  async put(name, value) {\n    this.cid = undefined;\n    this.size = undefined;\n    this._children[name] = value;\n  }\n  get(name) {\n    return Promise.resolve(this._children[name]);\n  }\n  childCount() {\n    return Object.keys(this._children).length;\n  }\n  directChildrenCount() {\n    return this.childCount();\n  }\n  onlyChild() {\n    return this._children[Object.keys(this._children)[0]];\n  }\n  async *eachChildSeries() {\n    const keys = Object.keys(this._children);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      yield {\n        key: key,\n        child: this._children[key]\n      };\n    }\n  }\n  async *flush(block) {\n    const children = Object.keys(this._children);\n    const links = [];\n    for (let i = 0; i < children.length; i++) {\n      let child = this._children[children[i]];\n      if (child instanceof dir) {\n        for await (const entry of child.flush(block)) {\n          child = entry;\n          yield child;\n        }\n      }\n      if (child.size != null && child.cid) {\n        links.push({\n          Name: children[i],\n          Tsize: child.size,\n          Hash: child.cid\n        });\n      }\n    }\n    const unixfs = new ipfsUnixfs.UnixFS({\n      type: 'directory',\n      mtime: this.mtime,\n      mode: this.mode\n    });\n    const node = {\n      Data: unixfs.marshal(),\n      Links: links\n    };\n    const buffer = dagPb.encode(dagPb.prepare(node));\n    const cid = await persist(buffer, block, this.options);\n    const size = buffer.length + node.Links.reduce((acc, curr) => acc + (curr.Tsize == null ? 0 : curr.Tsize), 0);\n    this.cid = cid;\n    this.size = size;\n    yield {\n      cid,\n      unixfs,\n      path: this.path,\n      size\n    };\n  }\n}\n\nmodule.exports = DirFlat;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}