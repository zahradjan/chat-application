{"ast":null,"code":"'use strict';\n\nvar _regeneratorRuntime = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar io = require('orbit-db-io');\n\nvar AccessControllerManifest = /*#__PURE__*/function () {\n  function AccessControllerManifest(type) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, AccessControllerManifest);\n\n    this.type = type;\n    this.params = params;\n  }\n\n  _createClass(AccessControllerManifest, null, [{\n    key: \"resolve\",\n    value: function () {\n      var _resolve = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ipfs, manifestHash) {\n        var options,\n            _yield$io$read,\n            type,\n            params,\n            _args = arguments;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n                if (!options.skipManifest) {\n                  _context.next = 7;\n                  break;\n                }\n\n                if (options.type) {\n                  _context.next = 4;\n                  break;\n                }\n\n                throw new Error('No manifest, access-controller type required');\n\n              case 4:\n                return _context.abrupt(\"return\", new AccessControllerManifest(options.type, {\n                  address: manifestHash\n                }));\n\n              case 7:\n                // TODO: ensure this is a valid multihash\n                if (manifestHash.indexOf('/ipfs') === 0) {\n                  manifestHash = manifestHash.split('/')[2];\n                }\n\n                _context.next = 10;\n                return io.read(ipfs, manifestHash);\n\n              case 10:\n                _yield$io$read = _context.sent;\n                type = _yield$io$read.type;\n                params = _yield$io$read.params;\n                return _context.abrupt(\"return\", new AccessControllerManifest(type, params));\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function resolve(_x, _x2) {\n        return _resolve.apply(this, arguments);\n      }\n\n      return resolve;\n    }()\n  }, {\n    key: \"create\",\n    value: function () {\n      var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ipfs, type, params) {\n        var manifest;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!params.skipManifest) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", params.address);\n\n              case 2:\n                manifest = {\n                  type: type,\n                  params: params\n                };\n                return _context2.abrupt(\"return\", io.write(ipfs, 'dag-cbor', manifest));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function create(_x3, _x4, _x5) {\n        return _create.apply(this, arguments);\n      }\n\n      return create;\n    }()\n  }]);\n\n  return AccessControllerManifest;\n}();\n\nmodule.exports = AccessControllerManifest;","map":{"version":3,"names":["io","require","AccessControllerManifest","type","params","ipfs","manifestHash","options","skipManifest","Error","address","indexOf","split","read","manifest","write","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-access-controllers/src/access-controller-manifest.js"],"sourcesContent":["'use strict'\nconst io = require('orbit-db-io')\n\nclass AccessControllerManifest {\n  constructor (type, params = {}) {\n    this.type = type\n    this.params = params\n  }\n\n  static async resolve (ipfs, manifestHash, options = {}) {\n    if (options.skipManifest) {\n      if (!options.type) {\n        throw new Error('No manifest, access-controller type required')\n      }\n      return new AccessControllerManifest(options.type, { address: manifestHash })\n    } else {\n      // TODO: ensure this is a valid multihash\n      if (manifestHash.indexOf('/ipfs') === 0) { manifestHash = manifestHash.split('/')[2] }\n      const { type, params } = await io.read(ipfs, manifestHash)\n      return new AccessControllerManifest(type, params)\n    }\n  }\n\n  static async create (ipfs, type, params) {\n    if (params.skipManifest) {\n      return params.address\n    }\n    const manifest = {\n      type: type,\n      params: params\n    }\n    return io.write(ipfs, 'dag-cbor', manifest)\n  }\n}\n\nmodule.exports = AccessControllerManifest\n"],"mappings":"AAAA;;;;;;;;;;AACA,IAAMA,EAAE,GAAGC,OAAO,CAAC,aAAD,CAAlB;;IAEMC,wB;EACJ,kCAAaC,IAAb,EAAgC;IAAA,IAAbC,MAAa,uEAAJ,EAAI;;IAAA;;IAC9B,KAAKD,IAAL,GAAYA,IAAZ;IACA,KAAKC,MAAL,GAAcA,MAAd;EACD;;;;;gFAED,iBAAsBC,IAAtB,EAA4BC,YAA5B;QAAA;QAAA;QAAA;QAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAA0CC,OAA1C,2DAAoD,EAApD;;gBAAA,KACMA,OAAO,CAACC,YADd;kBAAA;kBAAA;gBAAA;;gBAAA,IAESD,OAAO,CAACJ,IAFjB;kBAAA;kBAAA;gBAAA;;gBAAA,MAGY,IAAIM,KAAJ,CAAU,8CAAV,CAHZ;;cAAA;gBAAA,iCAKW,IAAIP,wBAAJ,CAA6BK,OAAO,CAACJ,IAArC,EAA2C;kBAAEO,OAAO,EAAEJ;gBAAX,CAA3C,CALX;;cAAA;gBAOI;gBACA,IAAIA,YAAY,CAACK,OAAb,CAAqB,OAArB,MAAkC,CAAtC,EAAyC;kBAAEL,YAAY,GAAGA,YAAY,CAACM,KAAb,CAAmB,GAAnB,EAAwB,CAAxB,CAAf;gBAA2C;;gBAR1F;gBAAA,OASmCZ,EAAE,CAACa,IAAH,CAAQR,IAAR,EAAcC,YAAd,CATnC;;cAAA;gBAAA;gBASYH,IATZ,kBASYA,IATZ;gBASkBC,MATlB,kBASkBA,MATlB;gBAAA,iCAUW,IAAIF,wBAAJ,CAA6BC,IAA7B,EAAmCC,MAAnC,CAVX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;+EAcA,kBAAqBC,IAArB,EAA2BF,IAA3B,EAAiCC,MAAjC;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACMA,MAAM,CAACI,YADb;kBAAA;kBAAA;gBAAA;;gBAAA,kCAEWJ,MAAM,CAACM,OAFlB;;cAAA;gBAIQI,QAJR,GAImB;kBACfX,IAAI,EAAEA,IADS;kBAEfC,MAAM,EAAEA;gBAFO,CAJnB;gBAAA,kCAQSJ,EAAE,CAACe,KAAH,CAASV,IAAT,EAAe,UAAf,EAA2BS,QAA3B,CART;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;;;AAYFE,MAAM,CAACC,OAAP,GAAiBf,wBAAjB"},"metadata":{},"sourceType":"script"}