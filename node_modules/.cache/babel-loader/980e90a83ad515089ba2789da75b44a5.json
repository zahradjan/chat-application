{"ast":null,"code":"// Limit cache size, LRU (least recently used) algorithm.\n\"use strict\";\n\nvar toPosInteger = require(\"es5-ext/number/to-pos-integer\"),\n    lruQueue = require(\"lru-queue\"),\n    extensions = require(\"../lib/registered-extensions\");\n\nextensions.max = function (max, conf, options) {\n  var postfix, queue, hit;\n  max = toPosInteger(max);\n  if (!max) return;\n  queue = lruQueue(max);\n  postfix = options.async && extensions.async || options.promise && extensions.promise ? \"async\" : \"\";\n  conf.on(\"set\" + postfix, hit = function (id) {\n    id = queue.hit(id);\n    if (id === undefined) return;\n    conf.delete(id);\n  });\n  conf.on(\"get\" + postfix, hit);\n  conf.on(\"delete\" + postfix, queue.delete);\n  conf.on(\"clear\" + postfix, queue.clear);\n};","map":{"version":3,"names":["toPosInteger","require","lruQueue","extensions","max","conf","options","postfix","queue","hit","async","promise","on","id","undefined","delete","clear"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/memoizee/ext/max.js"],"sourcesContent":["// Limit cache size, LRU (least recently used) algorithm.\n\n\"use strict\";\n\nvar toPosInteger = require(\"es5-ext/number/to-pos-integer\")\n  , lruQueue     = require(\"lru-queue\")\n  , extensions   = require(\"../lib/registered-extensions\");\n\nextensions.max = function (max, conf, options) {\n\tvar postfix, queue, hit;\n\n\tmax = toPosInteger(max);\n\tif (!max) return;\n\n\tqueue = lruQueue(max);\n\tpostfix = (options.async && extensions.async) || (options.promise && extensions.promise)\n\t\t? \"async\" : \"\";\n\n\tconf.on(\"set\" + postfix, hit = function (id) {\n\t\tid = queue.hit(id);\n\t\tif (id === undefined) return;\n\t\tconf.delete(id);\n\t});\n\tconf.on(\"get\" + postfix, hit);\n\tconf.on(\"delete\" + postfix, queue.delete);\n\tconf.on(\"clear\" + postfix, queue.clear);\n};\n"],"mappings":"AAAA;AAEA;;AAEA,IAAIA,YAAY,GAAGC,OAAO,CAAC,+BAAD,CAA1B;AAAA,IACIC,QAAQ,GAAOD,OAAO,CAAC,WAAD,CAD1B;AAAA,IAEIE,UAAU,GAAKF,OAAO,CAAC,8BAAD,CAF1B;;AAIAE,UAAU,CAACC,GAAX,GAAiB,UAAUA,GAAV,EAAeC,IAAf,EAAqBC,OAArB,EAA8B;EAC9C,IAAIC,OAAJ,EAAaC,KAAb,EAAoBC,GAApB;EAEAL,GAAG,GAAGJ,YAAY,CAACI,GAAD,CAAlB;EACA,IAAI,CAACA,GAAL,EAAU;EAEVI,KAAK,GAAGN,QAAQ,CAACE,GAAD,CAAhB;EACAG,OAAO,GAAID,OAAO,CAACI,KAAR,IAAiBP,UAAU,CAACO,KAA7B,IAAwCJ,OAAO,CAACK,OAAR,IAAmBR,UAAU,CAACQ,OAAtE,GACP,OADO,GACG,EADb;EAGAN,IAAI,CAACO,EAAL,CAAQ,QAAQL,OAAhB,EAAyBE,GAAG,GAAG,UAAUI,EAAV,EAAc;IAC5CA,EAAE,GAAGL,KAAK,CAACC,GAAN,CAAUI,EAAV,CAAL;IACA,IAAIA,EAAE,KAAKC,SAAX,EAAsB;IACtBT,IAAI,CAACU,MAAL,CAAYF,EAAZ;EACA,CAJD;EAKAR,IAAI,CAACO,EAAL,CAAQ,QAAQL,OAAhB,EAAyBE,GAAzB;EACAJ,IAAI,CAACO,EAAL,CAAQ,WAAWL,OAAnB,EAA4BC,KAAK,CAACO,MAAlC;EACAV,IAAI,CAACO,EAAL,CAAQ,UAAUL,OAAlB,EAA2BC,KAAK,CAACQ,KAAjC;AACA,CAlBD"},"metadata":{},"sourceType":"script"}