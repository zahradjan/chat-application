{"ast":null,"code":"var isPromise = require('is-promise');\n\nvar nextTick;\nif (typeof setImediate === 'function') nextTick = setImediate;else if (typeof process === 'object' && process && process.nextTick) nextTick = process.nextTick;else nextTick = function nextTick(cb) {\n  setTimeout(cb, 0);\n};\nvar extensions = [];\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise)) {\n    return typeof fn === 'function' ? new Promise(fn) : defer();\n  }\n\n  var isResolved = false;\n  var isFulfilled = false;\n  var value;\n  var waiting = [];\n  var running = false;\n\n  function next(skipTimeout) {\n    if (waiting.length) {\n      running = true;\n      waiting.shift()(skipTimeout || false);\n    } else {\n      running = false;\n    }\n  }\n\n  this.then = then;\n\n  function then(cb, eb) {\n    return new Promise(function (resolver) {\n      function done(skipTimeout) {\n        var callback = isFulfilled ? cb : eb;\n\n        if (typeof callback === 'function') {\n          var timeoutDone = function timeoutDone() {\n            var val;\n\n            try {\n              val = callback(value);\n            } catch (ex) {\n              resolver.reject(ex);\n              return next();\n            }\n\n            resolver.fulfill(val);\n            next(true);\n          };\n\n          if (skipTimeout) timeoutDone();else nextTick(timeoutDone);\n        } else if (isFulfilled) {\n          resolver.fulfill(value);\n          next(skipTimeout);\n        } else {\n          resolver.reject(value);\n          next(skipTimeout);\n        }\n      }\n\n      waiting.push(done);\n      if (isResolved && !running) next();\n    });\n  }\n\n  (function () {\n    function fulfill(val) {\n      if (isResolved) return;\n      if (isPromise(val)) val.then(fulfill, reject);else {\n        isResolved = isFulfilled = true;\n        value = val;\n        next();\n      }\n    }\n\n    function reject(err) {\n      if (isResolved) return;\n      isResolved = true;\n      isFulfilled = false;\n      value = err;\n      next();\n    }\n\n    var resolver = {\n      fulfill: fulfill,\n      reject: reject\n    };\n\n    for (var i = 0; i < extensions.length; i++) {\n      extensions[i](this, resolver);\n    }\n\n    if (typeof fn === 'function') {\n      try {\n        fn(resolver);\n      } catch (ex) {\n        resolver.reject(ex);\n      }\n    }\n  })();\n}\n\nfunction defer() {\n  var resolver;\n  var promise = new Promise(function (res) {\n    resolver = res;\n  });\n  return {\n    resolver: resolver,\n    promise: promise\n  };\n}\n\nPromise.use = function (extension) {\n  extensions.push(extension);\n};","map":{"version":3,"names":["isPromise","require","nextTick","setImediate","process","cb","setTimeout","extensions","module","exports","Promise","fn","defer","isResolved","isFulfilled","value","waiting","running","next","skipTimeout","length","shift","then","eb","resolver","done","callback","timeoutDone","val","ex","reject","fulfill","push","err","i","promise","res","use","extension"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/promise/index.js"],"sourcesContent":["var isPromise = require('is-promise')\r\n\r\nvar nextTick;\r\nif (typeof setImediate === 'function') nextTick = setImediate\r\nelse if (typeof process === 'object' && process && process.nextTick) nextTick = process.nextTick\r\nelse nextTick = function (cb) { setTimeout(cb, 0) }\r\n\r\nvar extensions = [];\r\n\r\nmodule.exports = Promise\r\nfunction Promise(fn) {\r\n  if (!(this instanceof Promise)) {\r\n    return typeof fn === 'function' ? new Promise(fn) : defer()\r\n  }\r\n  var isResolved = false\r\n  var isFulfilled = false\r\n  var value\r\n  var waiting = []\r\n  var running = false\r\n\r\n  function next(skipTimeout) {\r\n    if (waiting.length) {\r\n      running = true\r\n      waiting.shift()(skipTimeout || false)\r\n    } else {\r\n      running = false\r\n    }\r\n  }\r\n  this.then = then;\r\n  function then(cb, eb) {\r\n    return new Promise(function (resolver) {\r\n      function done(skipTimeout) {\r\n        var callback = isFulfilled ? cb : eb\r\n        if (typeof callback === 'function') {\r\n          function timeoutDone() {\r\n            var val;\r\n            try {\r\n              val = callback(value)\r\n            } catch (ex) {\r\n              resolver.reject(ex)\r\n              return next()\r\n            }\r\n            resolver.fulfill(val);\r\n            next(true);\r\n          }\r\n          if (skipTimeout) timeoutDone()\r\n          else nextTick(timeoutDone)\r\n        } else if (isFulfilled) {\r\n          resolver.fulfill(value)\r\n          next(skipTimeout)\r\n        } else {\r\n          resolver.reject(value)\r\n          next(skipTimeout)\r\n        }\r\n      }\r\n      waiting.push(done)\r\n      if (isResolved && !running) next()\r\n    });\r\n  }\r\n  \r\n  (function () {\r\n    function fulfill(val) {\r\n      if (isResolved) return\r\n      if (isPromise(val)) val.then(fulfill, reject)\r\n      else {\r\n        isResolved = isFulfilled = true\r\n        value = val\r\n        next()\r\n      }\r\n    }\r\n    function reject(err) {\r\n      if (isResolved) return\r\n      isResolved = true\r\n      isFulfilled = false\r\n      value = err\r\n      next()\r\n    }\r\n    var resolver = {fulfill: fulfill, reject: reject};\r\n    for (var i = 0; i < extensions.length; i++) {\r\n      extensions[i](this, resolver);\r\n    }\r\n    if (typeof fn === 'function') {\r\n      try {\r\n        fn(resolver)\r\n      } catch (ex) {\r\n        resolver.reject(ex);\r\n      }\r\n    }\r\n  }());\r\n}\r\nfunction defer() {\r\n  var resolver\r\n  var promise = new Promise(function (res) { resolver = res })\r\n  return {resolver: resolver, promise: promise}\r\n}\r\nPromise.use = function (extension) {\r\n  extensions.push(extension);\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}