{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar KeyValueIndex = /*#__PURE__*/function () {\n  function KeyValueIndex() {\n    _classCallCheck(this, KeyValueIndex);\n\n    this._index = {};\n  }\n\n  _createClass(KeyValueIndex, [{\n    key: \"get\",\n    value: function get(key) {\n      return this._index[key];\n    }\n  }, {\n    key: \"updateIndex\",\n    value: function updateIndex(oplog) {\n      var _this = this;\n\n      oplog.values.slice().reverse().reduce(function (handled, item) {\n        if (!handled.includes(item.payload.key)) {\n          handled.push(item.payload.key);\n\n          if (item.payload.op === 'PUT') {\n            _this._index[item.payload.key] = item.payload.value;\n          } else if (item.payload.op === 'DEL') {\n            delete _this._index[item.payload.key];\n          }\n        }\n\n        return handled;\n      }, []);\n    }\n  }]);\n\n  return KeyValueIndex;\n}();\n\nmodule.exports = KeyValueIndex;","map":{"version":3,"names":["KeyValueIndex","_index","key","oplog","values","slice","reverse","reduce","handled","item","includes","payload","push","op","value","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-kvstore/src/KeyValueIndex.js"],"sourcesContent":["'use strict'\n\nclass KeyValueIndex {\n  constructor() {\n    this._index = {}\n  }\n\n  get(key) {\n    return this._index[key]\n  }\n\n  updateIndex(oplog) {\n    oplog.values\n      .slice()\n      .reverse()\n      .reduce((handled, item) => {\n        if(!handled.includes(item.payload.key)) {\n          handled.push(item.payload.key)\n          if(item.payload.op === 'PUT') {\n            this._index[item.payload.key] = item.payload.value\n          } else if(item.payload.op === 'DEL') {\n            delete this._index[item.payload.key]\n          }\n        }\n        return handled\n      }, [])\n  }\n}\n\nmodule.exports = KeyValueIndex\n"],"mappings":"AAAA;;;;;;IAEMA,a;EACJ,yBAAc;IAAA;;IACZ,KAAKC,MAAL,GAAc,EAAd;EACD;;;;WAED,aAAIC,GAAJ,EAAS;MACP,OAAO,KAAKD,MAAL,CAAYC,GAAZ,CAAP;IACD;;;WAED,qBAAYC,KAAZ,EAAmB;MAAA;;MACjBA,KAAK,CAACC,MAAN,CACGC,KADH,GAEGC,OAFH,GAGGC,MAHH,CAGU,UAACC,OAAD,EAAUC,IAAV,EAAmB;QACzB,IAAG,CAACD,OAAO,CAACE,QAAR,CAAiBD,IAAI,CAACE,OAAL,CAAaT,GAA9B,CAAJ,EAAwC;UACtCM,OAAO,CAACI,IAAR,CAAaH,IAAI,CAACE,OAAL,CAAaT,GAA1B;;UACA,IAAGO,IAAI,CAACE,OAAL,CAAaE,EAAb,KAAoB,KAAvB,EAA8B;YAC5B,KAAI,CAACZ,MAAL,CAAYQ,IAAI,CAACE,OAAL,CAAaT,GAAzB,IAAgCO,IAAI,CAACE,OAAL,CAAaG,KAA7C;UACD,CAFD,MAEO,IAAGL,IAAI,CAACE,OAAL,CAAaE,EAAb,KAAoB,KAAvB,EAA8B;YACnC,OAAO,KAAI,CAACZ,MAAL,CAAYQ,IAAI,CAACE,OAAL,CAAaT,GAAzB,CAAP;UACD;QACF;;QACD,OAAOM,OAAP;MACD,CAbH,EAaK,EAbL;IAcD;;;;;;AAGHO,MAAM,CAACC,OAAP,GAAiBhB,aAAjB"},"metadata":{},"sourceType":"script"}