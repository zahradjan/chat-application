{"ast":null,"code":"'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar BN = require('./bn');\n\nvar ECPoint = require('./ecpoint');\n\nvar ECJPoint = require('./ecjpoint');\n\nfunction ECPointG() {\n  this.x = BN.fromBuffer(Buffer.from('79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798', 'hex'));\n  this.y = BN.fromBuffer(Buffer.from('483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8', 'hex'));\n  this.inf = false;\n\n  this._precompute();\n}\n\nECPointG.prototype._precompute = function () {\n  var ecpoint = new ECPoint(this.x, this.y);\n  var dstep = 4;\n  var points = new Array(1 + Math.ceil(257 / dstep));\n  var acc = points[0] = ecpoint;\n\n  for (var i = 1; i < points.length; ++i) {\n    for (var j = 0; j < dstep; j++) acc = acc.dbl();\n\n    points[i] = acc;\n  }\n\n  this.precomputed = {\n    naf: ecpoint._getNAFPoints(7),\n    doubles: {\n      step: dstep,\n      points: points,\n      negpoints: points.map(function (p) {\n        return p.neg();\n      })\n    }\n  };\n};\n\nECPointG.prototype.mul = function (num) {\n  // Algorithm 3.42 Fixed-base NAF windowing method for point multiplication\n  var step = this.precomputed.doubles.step;\n  var points = this.precomputed.doubles.points;\n  var negpoints = this.precomputed.doubles.negpoints;\n  var naf = num.getNAF(1);\n  var I = ((1 << step + 1) - (step % 2 === 0 ? 2 : 1)) / 3; // Translate into more windowed form\n\n  var repr = [];\n\n  for (var j = 0; j < naf.length; j += step) {\n    var nafW = 0;\n\n    for (var k = j + step - 1; k >= j; k--) nafW = (nafW << 1) + naf[k];\n\n    repr.push(nafW);\n  }\n\n  var a = new ECJPoint(null, null, null);\n  var b = new ECJPoint(null, null, null);\n\n  for (var i = I; i > 0; i--) {\n    for (var jj = 0; jj < repr.length; jj++) {\n      if (repr[jj] === i) {\n        b = b.mixedAdd(points[jj]);\n      } else if (repr[jj] === -i) {\n        b = b.mixedAdd(negpoints[jj]);\n      }\n    }\n\n    a = a.add(b);\n  }\n\n  return ECPoint.fromECJPoint(a);\n};\n\nECPointG.prototype.mulAdd = function (k1, p2, k2) {\n  var nafPointsP1 = this.precomputed.naf;\n\n  var nafPointsP2 = p2._getNAFPoints1();\n\n  var wnd = [nafPointsP1.points, nafPointsP2.points];\n  var naf = [k1.getNAF(nafPointsP1.wnd), k2.getNAF(nafPointsP2.wnd)];\n  var acc = new ECJPoint(null, null, null);\n  var tmp = [null, null];\n\n  for (var i = Math.max(naf[0].length, naf[1].length); i >= 0; i--) {\n    var k = 0;\n\n    for (; i >= 0; ++k, --i) {\n      tmp[0] = naf[0][i] | 0;\n      tmp[1] = naf[1][i] | 0;\n      if (tmp[0] !== 0 || tmp[1] !== 0) break;\n    }\n\n    if (i >= 0) k += 1;\n    acc = acc.dblp(k);\n    if (i < 0) break;\n\n    for (var jj = 0; jj < 2; jj++) {\n      var z = tmp[jj];\n      var p;\n\n      if (z === 0) {\n        continue;\n      } else if (z > 0) {\n        p = wnd[jj][z >> 1];\n      } else if (z < 0) {\n        p = wnd[jj][-z >> 1].neg();\n      } // hack: ECPoint detection\n\n\n      if (p.z === undefined) {\n        acc = acc.mixedAdd(p);\n      } else {\n        acc = acc.add(p);\n      }\n    }\n  }\n\n  return acc;\n};\n\nmodule.exports = new ECPointG();","map":{"version":3,"names":["Buffer","require","BN","ECPoint","ECJPoint","ECPointG","x","fromBuffer","from","y","inf","_precompute","prototype","ecpoint","dstep","points","Array","Math","ceil","acc","i","length","j","dbl","precomputed","naf","_getNAFPoints","doubles","step","negpoints","map","p","neg","mul","num","getNAF","I","repr","nafW","k","push","a","b","jj","mixedAdd","add","fromECJPoint","mulAdd","k1","p2","k2","nafPointsP1","nafPointsP2","_getNAFPoints1","wnd","tmp","max","dblp","z","undefined","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/libp2p-crypto-secp256k1/node_modules/secp256k1/lib/js/ecpointg.js"],"sourcesContent":["'use strict'\nvar Buffer = require('safe-buffer').Buffer\nvar BN = require('./bn')\nvar ECPoint = require('./ecpoint')\nvar ECJPoint = require('./ecjpoint')\n\nfunction ECPointG () {\n  this.x = BN.fromBuffer(Buffer.from('79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798', 'hex'))\n  this.y = BN.fromBuffer(Buffer.from('483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8', 'hex'))\n  this.inf = false\n\n  this._precompute()\n}\n\nECPointG.prototype._precompute = function () {\n  var ecpoint = new ECPoint(this.x, this.y)\n\n  var dstep = 4\n  var points = new Array(1 + Math.ceil(257 / dstep))\n  var acc = points[0] = ecpoint\n  for (var i = 1; i < points.length; ++i) {\n    for (var j = 0; j < dstep; j++) acc = acc.dbl()\n    points[i] = acc\n  }\n\n  this.precomputed = {\n    naf: ecpoint._getNAFPoints(7),\n    doubles: {\n      step: dstep,\n      points: points,\n      negpoints: points.map(function (p) { return p.neg() })\n    }\n  }\n}\n\nECPointG.prototype.mul = function (num) {\n  // Algorithm 3.42 Fixed-base NAF windowing method for point multiplication\n  var step = this.precomputed.doubles.step\n  var points = this.precomputed.doubles.points\n  var negpoints = this.precomputed.doubles.negpoints\n\n  var naf = num.getNAF(1)\n  var I = ((1 << (step + 1)) - (step % 2 === 0 ? 2 : 1)) / 3\n\n  // Translate into more windowed form\n  var repr = []\n  for (var j = 0; j < naf.length; j += step) {\n    var nafW = 0\n    for (var k = j + step - 1; k >= j; k--) nafW = (nafW << 1) + naf[k]\n    repr.push(nafW)\n  }\n\n  var a = new ECJPoint(null, null, null)\n  var b = new ECJPoint(null, null, null)\n  for (var i = I; i > 0; i--) {\n    for (var jj = 0; jj < repr.length; jj++) {\n      if (repr[jj] === i) {\n        b = b.mixedAdd(points[jj])\n      } else if (repr[jj] === -i) {\n        b = b.mixedAdd(negpoints[jj])\n      }\n    }\n\n    a = a.add(b)\n  }\n\n  return ECPoint.fromECJPoint(a)\n}\n\nECPointG.prototype.mulAdd = function (k1, p2, k2) {\n  var nafPointsP1 = this.precomputed.naf\n  var nafPointsP2 = p2._getNAFPoints1()\n  var wnd = [nafPointsP1.points, nafPointsP2.points]\n  var naf = [k1.getNAF(nafPointsP1.wnd), k2.getNAF(nafPointsP2.wnd)]\n\n  var acc = new ECJPoint(null, null, null)\n  var tmp = [null, null]\n  for (var i = Math.max(naf[0].length, naf[1].length); i >= 0; i--) {\n    var k = 0\n\n    for (; i >= 0; ++k, --i) {\n      tmp[0] = naf[0][i] | 0\n      tmp[1] = naf[1][i] | 0\n\n      if (tmp[0] !== 0 || tmp[1] !== 0) break\n    }\n\n    if (i >= 0) k += 1\n    acc = acc.dblp(k)\n\n    if (i < 0) break\n\n    for (var jj = 0; jj < 2; jj++) {\n      var z = tmp[jj]\n      var p\n      if (z === 0) {\n        continue\n      } else if (z > 0) {\n        p = wnd[jj][z >> 1]\n      } else if (z < 0) {\n        p = wnd[jj][-z >> 1].neg()\n      }\n\n      // hack: ECPoint detection\n      if (p.z === undefined) {\n        acc = acc.mixedAdd(p)\n      } else {\n        acc = acc.add(p)\n      }\n    }\n  }\n\n  return acc\n}\n\nmodule.exports = new ECPointG()\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}