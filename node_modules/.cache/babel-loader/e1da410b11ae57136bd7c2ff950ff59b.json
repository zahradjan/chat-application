{"ast":null,"code":"'use strict'; // load websocket library if we are not in the browser\n\nvar WebSocket = require('./web-socket');\n\nvar duplex = require('./duplex');\n\nvar wsurl = require('./ws-url');\n\nmodule.exports = function (addr) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var location = typeof window === 'undefined' ? {} : window.location;\n  var url = wsurl(addr, location);\n  var socket = new WebSocket(url, opts.websocket);\n  var stream = duplex(socket, opts);\n  stream.remoteAddress = url;\n\n  stream.close = function () {\n    return new Promise(function (resolve, reject) {\n      socket.addEventListener('close', resolve);\n      socket.close();\n    });\n  };\n\n  stream.destroy = function () {\n    if (socket.terminate) {\n      socket.terminate();\n    } else {\n      socket.close();\n    }\n  };\n\n  stream.socket = socket;\n  return stream;\n};\n\nmodule.exports.connect = module.exports;","map":{"version":3,"names":["WebSocket","require","duplex","wsurl","module","exports","addr","opts","location","window","url","socket","websocket","stream","remoteAddress","close","Promise","resolve","reject","addEventListener","destroy","terminate","connect"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/it-ws/client.js"],"sourcesContent":["'use strict'\n\n// load websocket library if we are not in the browser\nvar WebSocket = require('./web-socket')\nvar duplex = require('./duplex')\nvar wsurl = require('./ws-url')\n\nmodule.exports = function (addr, opts = {}) {\n  const location = typeof window === 'undefined' ? {} : window.location\n\n  const url = wsurl(addr, location)\n  const socket = new WebSocket(url, opts.websocket)\n\n  const stream = duplex(socket, opts)\n  stream.remoteAddress = url\n  stream.close = () => new Promise((resolve, reject) => {\n    socket.addEventListener('close', resolve)\n    socket.close()\n  })\n  stream.destroy = () => {\n    if (socket.terminate) {\n      socket.terminate()\n    } else {\n      socket.close()\n    }\n  }\n  stream.socket = socket\n\n  return stream\n}\n\nmodule.exports.connect = module.exports\n"],"mappings":"AAAA,a,CAEA;;AACA,IAAIA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAvB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAApB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,UAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAiB,UAAUC,IAAV,EAA2B;EAAA,IAAXC,IAAW,uEAAJ,EAAI;EAC1C,IAAMC,QAAQ,GAAG,OAAOC,MAAP,KAAkB,WAAlB,GAAgC,EAAhC,GAAqCA,MAAM,CAACD,QAA7D;EAEA,IAAME,GAAG,GAAGP,KAAK,CAACG,IAAD,EAAOE,QAAP,CAAjB;EACA,IAAMG,MAAM,GAAG,IAAIX,SAAJ,CAAcU,GAAd,EAAmBH,IAAI,CAACK,SAAxB,CAAf;EAEA,IAAMC,MAAM,GAAGX,MAAM,CAACS,MAAD,EAASJ,IAAT,CAArB;EACAM,MAAM,CAACC,aAAP,GAAuBJ,GAAvB;;EACAG,MAAM,CAACE,KAAP,GAAe;IAAA,OAAM,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;MACpDP,MAAM,CAACQ,gBAAP,CAAwB,OAAxB,EAAiCF,OAAjC;MACAN,MAAM,CAACI,KAAP;IACD,CAHoB,CAAN;EAAA,CAAf;;EAIAF,MAAM,CAACO,OAAP,GAAiB,YAAM;IACrB,IAAIT,MAAM,CAACU,SAAX,EAAsB;MACpBV,MAAM,CAACU,SAAP;IACD,CAFD,MAEO;MACLV,MAAM,CAACI,KAAP;IACD;EACF,CAND;;EAOAF,MAAM,CAACF,MAAP,GAAgBA,MAAhB;EAEA,OAAOE,MAAP;AACD,CAtBD;;AAwBAT,MAAM,CAACC,OAAP,CAAeiB,OAAf,GAAyBlB,MAAM,CAACC,OAAhC"},"metadata":{},"sourceType":"script"}