{"ast":null,"code":"import { makeAutoObservable, runInAction } from \"mobx\";\nimport { ChatRoom } from \"../models/Room.js\";\nexport class RoomStore {\n  //TODO:load rooms from db\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    this.rooms = [];\n    this.selectedRoom = undefined;\n    makeAutoObservable(this);\n  }\n\n  createRoom(roomName) {\n    if (this.rootStore.dataStore.ipfsNode === undefined) throw Error(\"IPFS Node not defined!\");\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\n    const chatRoom = new ChatRoom(this.rootStore.dataStore.ipfsNode, this.rootStore.dataStore.ipfsNode.pubsub, this.rootStore.dataStore.orbitDb, roomName);\n    this.rooms.push(chatRoom);\n    return chatRoom;\n  }\n\n  getRoom(roomName) {\n    //TODO: kdyz nenajde apod.\n    return this.rooms.find(room => roomName === room.roomName);\n  }\n\n  setSelectedRoom(roomName) {\n    let room;\n    runInAction(() => {\n      room = this.getRoom(roomName);\n      this.selectedRoom = room;\n    });\n  }\n\n  isChatRoomReady(roomName) {\n    const room = this.getRoom(roomName);\n    console.log(!!room);\n    return !!room;\n  }\n\n}","map":{"version":3,"names":["makeAutoObservable","runInAction","ChatRoom","RoomStore","constructor","rootStore","rooms","selectedRoom","undefined","createRoom","roomName","dataStore","ipfsNode","Error","orbitDb","chatRoom","pubsub","push","getRoom","find","room","setSelectedRoom","isChatRoomReady","console","log"],"sources":["C:/Users/zajan/GitHub/chatApplication/src/data/store/RoomStore.js"],"sourcesContent":["import { makeAutoObservable, runInAction } from \"mobx\";\r\nimport { ChatRoom } from \"../models/Room.js\";\r\n\r\nexport class RoomStore {\r\n  //TODO:load rooms from db\r\n  rooms;\r\n  selectedRoom;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.rooms = [];\r\n    this.selectedRoom = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  createRoom(roomName) {\r\n    if (this.rootStore.dataStore.ipfsNode === undefined) throw Error(\"IPFS Node not defined!\");\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n\r\n    const chatRoom = new ChatRoom(\r\n      this.rootStore.dataStore.ipfsNode,\r\n      this.rootStore.dataStore.ipfsNode.pubsub,\r\n      this.rootStore.dataStore.orbitDb,\r\n      roomName\r\n    );\r\n    this.rooms.push(chatRoom);\r\n    return chatRoom;\r\n  }\r\n\r\n  getRoom(roomName) {\r\n    //TODO: kdyz nenajde apod.\r\n    return this.rooms.find((room) => roomName === room.roomName);\r\n  }\r\n\r\n  setSelectedRoom(roomName) {\r\n    let room;\r\n    runInAction(() => {\r\n      room = this.getRoom(roomName);\r\n      this.selectedRoom = room;\r\n    });\r\n  }\r\n\r\n  isChatRoomReady(roomName) {\r\n    const room = this.getRoom(roomName);\r\n    console.log(!!room);\r\n    return !!room;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,WAA7B,QAAgD,MAAhD;AACA,SAASC,QAAT,QAAyB,mBAAzB;AAEA,OAAO,MAAMC,SAAN,CAAgB;EACrB;EAGAC,WAAW,CAACC,SAAD,EAAY;IACrB,KAAKA,SAAL,GAAiBA,SAAjB;IACA,KAAKC,KAAL,GAAa,EAAb;IACA,KAAKC,YAAL,GAAoBC,SAApB;IACAR,kBAAkB,CAAC,IAAD,CAAlB;EACD;;EAEDS,UAAU,CAACC,QAAD,EAAW;IACnB,IAAI,KAAKL,SAAL,CAAeM,SAAf,CAAyBC,QAAzB,KAAsCJ,SAA1C,EAAqD,MAAMK,KAAK,CAAC,wBAAD,CAAX;IACrD,IAAI,KAAKR,SAAL,CAAeM,SAAf,CAAyBG,OAAzB,KAAqCN,SAAzC,EAAoD,MAAMK,KAAK,CAAC,sBAAD,CAAX;IAEpD,MAAME,QAAQ,GAAG,IAAIb,QAAJ,CACf,KAAKG,SAAL,CAAeM,SAAf,CAAyBC,QADV,EAEf,KAAKP,SAAL,CAAeM,SAAf,CAAyBC,QAAzB,CAAkCI,MAFnB,EAGf,KAAKX,SAAL,CAAeM,SAAf,CAAyBG,OAHV,EAIfJ,QAJe,CAAjB;IAMA,KAAKJ,KAAL,CAAWW,IAAX,CAAgBF,QAAhB;IACA,OAAOA,QAAP;EACD;;EAEDG,OAAO,CAACR,QAAD,EAAW;IAChB;IACA,OAAO,KAAKJ,KAAL,CAAWa,IAAX,CAAiBC,IAAD,IAAUV,QAAQ,KAAKU,IAAI,CAACV,QAA5C,CAAP;EACD;;EAEDW,eAAe,CAACX,QAAD,EAAW;IACxB,IAAIU,IAAJ;IACAnB,WAAW,CAAC,MAAM;MAChBmB,IAAI,GAAG,KAAKF,OAAL,CAAaR,QAAb,CAAP;MACA,KAAKH,YAAL,GAAoBa,IAApB;IACD,CAHU,CAAX;EAID;;EAEDE,eAAe,CAACZ,QAAD,EAAW;IACxB,MAAMU,IAAI,GAAG,KAAKF,OAAL,CAAaR,QAAb,CAAb;IACAa,OAAO,CAACC,GAAR,CAAY,CAAC,CAACJ,IAAd;IACA,OAAO,CAAC,CAACA,IAAT;EACD;;AA1CoB"},"metadata":{},"sourceType":"module"}