{"ast":null,"code":"'use strict';\n\nclass FeedIndex {\n  constructor() {\n    this._index = {};\n  }\n\n  get() {\n    return Object.keys(this._index).map(f => this._index[f]);\n  }\n\n  updateIndex(oplog) {\n    this._index = {};\n    oplog.values.reduce((handled, item) => {\n      if (!handled.includes(item.hash)) {\n        handled.push(item.hash);\n\n        if (item.payload.op === 'ADD') {\n          this._index[item.hash] = item;\n        } else if (item.payload.op === 'DEL') {\n          delete this._index[item.payload.value];\n        }\n      }\n\n      return handled;\n    }, []);\n  }\n\n}\n\nmodule.exports = FeedIndex;","map":{"version":3,"names":["FeedIndex","constructor","_index","get","Object","keys","map","f","updateIndex","oplog","values","reduce","handled","item","includes","hash","push","payload","op","value","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-feedstore/src/FeedIndex.js"],"sourcesContent":["'use strict'\n\nclass FeedIndex {\n  constructor() {\n    this._index = {}\n  }\n\n  get() {\n    return Object.keys(this._index).map((f) => this._index[f])\n  }\n\n  updateIndex(oplog) {\n    this._index = {}\n    oplog.values.reduce((handled, item) => {\n      if(!handled.includes(item.hash)) {\n        handled.push(item.hash)\n        if(item.payload.op === 'ADD') {\n          this._index[item.hash] = item\n        } else if(item.payload.op === 'DEL') {\n          delete this._index[item.payload.value]\n        }\n      }\n      return handled\n    }, [])\n  }\n}\n\nmodule.exports = FeedIndex\n"],"mappings":"AAAA;;AAEA,MAAMA,SAAN,CAAgB;EACdC,WAAW,GAAG;IACZ,KAAKC,MAAL,GAAc,EAAd;EACD;;EAEDC,GAAG,GAAG;IACJ,OAAOC,MAAM,CAACC,IAAP,CAAY,KAAKH,MAAjB,EAAyBI,GAAzB,CAA8BC,CAAD,IAAO,KAAKL,MAAL,CAAYK,CAAZ,CAApC,CAAP;EACD;;EAEDC,WAAW,CAACC,KAAD,EAAQ;IACjB,KAAKP,MAAL,GAAc,EAAd;IACAO,KAAK,CAACC,MAAN,CAAaC,MAAb,CAAoB,CAACC,OAAD,EAAUC,IAAV,KAAmB;MACrC,IAAG,CAACD,OAAO,CAACE,QAAR,CAAiBD,IAAI,CAACE,IAAtB,CAAJ,EAAiC;QAC/BH,OAAO,CAACI,IAAR,CAAaH,IAAI,CAACE,IAAlB;;QACA,IAAGF,IAAI,CAACI,OAAL,CAAaC,EAAb,KAAoB,KAAvB,EAA8B;UAC5B,KAAKhB,MAAL,CAAYW,IAAI,CAACE,IAAjB,IAAyBF,IAAzB;QACD,CAFD,MAEO,IAAGA,IAAI,CAACI,OAAL,CAAaC,EAAb,KAAoB,KAAvB,EAA8B;UACnC,OAAO,KAAKhB,MAAL,CAAYW,IAAI,CAACI,OAAL,CAAaE,KAAzB,CAAP;QACD;MACF;;MACD,OAAOP,OAAP;IACD,CAVD,EAUG,EAVH;EAWD;;AAtBa;;AAyBhBQ,MAAM,CAACC,OAAP,GAAiBrB,SAAjB"},"metadata":{},"sourceType":"script"}