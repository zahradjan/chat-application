{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar FeedIndex = /*#__PURE__*/function () {\n  function FeedIndex() {\n    _classCallCheck(this, FeedIndex);\n\n    this._index = {};\n  }\n\n  _createClass(FeedIndex, [{\n    key: \"get\",\n    value: function get() {\n      var _this = this;\n\n      return Object.keys(this._index).map(function (f) {\n        return _this._index[f];\n      });\n    }\n  }, {\n    key: \"updateIndex\",\n    value: function updateIndex(oplog) {\n      var _this2 = this;\n\n      this._index = {};\n      oplog.values.reduce(function (handled, item) {\n        if (!handled.includes(item.hash)) {\n          handled.push(item.hash);\n\n          if (item.payload.op === 'ADD') {\n            _this2._index[item.hash] = item;\n          } else if (item.payload.op === 'DEL') {\n            delete _this2._index[item.payload.value];\n          }\n        }\n\n        return handled;\n      }, []);\n    }\n  }]);\n\n  return FeedIndex;\n}();\n\nmodule.exports = FeedIndex;","map":{"version":3,"names":["FeedIndex","_index","Object","keys","map","f","oplog","values","reduce","handled","item","includes","hash","push","payload","op","value","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-feedstore/src/FeedIndex.js"],"sourcesContent":["'use strict'\n\nclass FeedIndex {\n  constructor() {\n    this._index = {}\n  }\n\n  get() {\n    return Object.keys(this._index).map((f) => this._index[f])\n  }\n\n  updateIndex(oplog) {\n    this._index = {}\n    oplog.values.reduce((handled, item) => {\n      if(!handled.includes(item.hash)) {\n        handled.push(item.hash)\n        if(item.payload.op === 'ADD') {\n          this._index[item.hash] = item\n        } else if(item.payload.op === 'DEL') {\n          delete this._index[item.payload.value]\n        }\n      }\n      return handled\n    }, [])\n  }\n}\n\nmodule.exports = FeedIndex\n"],"mappings":"AAAA;;;;;;IAEMA,S;EACJ,qBAAc;IAAA;;IACZ,KAAKC,MAAL,GAAc,EAAd;EACD;;;;WAED,eAAM;MAAA;;MACJ,OAAOC,MAAM,CAACC,IAAP,CAAY,KAAKF,MAAjB,EAAyBG,GAAzB,CAA6B,UAACC,CAAD;QAAA,OAAO,KAAI,CAACJ,MAAL,CAAYI,CAAZ,CAAP;MAAA,CAA7B,CAAP;IACD;;;WAED,qBAAYC,KAAZ,EAAmB;MAAA;;MACjB,KAAKL,MAAL,GAAc,EAAd;MACAK,KAAK,CAACC,MAAN,CAAaC,MAAb,CAAoB,UAACC,OAAD,EAAUC,IAAV,EAAmB;QACrC,IAAG,CAACD,OAAO,CAACE,QAAR,CAAiBD,IAAI,CAACE,IAAtB,CAAJ,EAAiC;UAC/BH,OAAO,CAACI,IAAR,CAAaH,IAAI,CAACE,IAAlB;;UACA,IAAGF,IAAI,CAACI,OAAL,CAAaC,EAAb,KAAoB,KAAvB,EAA8B;YAC5B,MAAI,CAACd,MAAL,CAAYS,IAAI,CAACE,IAAjB,IAAyBF,IAAzB;UACD,CAFD,MAEO,IAAGA,IAAI,CAACI,OAAL,CAAaC,EAAb,KAAoB,KAAvB,EAA8B;YACnC,OAAO,MAAI,CAACd,MAAL,CAAYS,IAAI,CAACI,OAAL,CAAaE,KAAzB,CAAP;UACD;QACF;;QACD,OAAOP,OAAP;MACD,CAVD,EAUG,EAVH;IAWD;;;;;;AAGHQ,MAAM,CAACC,OAAP,GAAiBlB,SAAjB"},"metadata":{},"sourceType":"script"}