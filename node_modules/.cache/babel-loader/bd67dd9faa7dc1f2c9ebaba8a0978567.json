{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar EventQueue = /*#__PURE__*/function (_Symbol$asyncIterator) {\n  function EventQueue() {\n    _classCallCheck(this, EventQueue);\n\n    this.pullQueue = [];\n    this.pushQueue = [];\n    this.eventHandlers = {};\n    this.isPaused = false;\n    this.isStopped = false;\n  }\n\n  _createClass(EventQueue, [{\n    key: \"push\",\n    value: function push(value) {\n      if (this.isStopped) return;\n      var resolution = {\n        value: value,\n        done: false\n      };\n\n      if (this.pullQueue.length) {\n        var placeholder = this.pullQueue.shift();\n        if (placeholder) placeholder.resolve(resolution);\n      } else {\n        this.pushQueue.push(Promise.resolve(resolution));\n\n        if (this.highWaterMark !== undefined && this.pushQueue.length >= this.highWaterMark && !this.isPaused) {\n          this.isPaused = true;\n\n          if (this.eventHandlers.highWater) {\n            this.eventHandlers.highWater();\n          } else if (console) {\n            console.warn(\"EventIterator queue reached \".concat(this.pushQueue.length, \" items\"));\n          }\n        }\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.isStopped) return;\n      this.isStopped = true;\n      this.remove();\n\n      var _iterator = _createForOfIteratorHelper(this.pullQueue),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var placeholder = _step.value;\n          placeholder.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.pullQueue.length = 0;\n    }\n  }, {\n    key: \"fail\",\n    value: function fail(error) {\n      if (this.isStopped) return;\n      this.isStopped = true;\n      this.remove();\n\n      if (this.pullQueue.length) {\n        var _iterator2 = _createForOfIteratorHelper(this.pullQueue),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var placeholder = _step2.value;\n            placeholder.reject(error);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n\n        this.pullQueue.length = 0;\n      } else {\n        var rejection = Promise.reject(error);\n        /* Attach error handler to avoid leaking an unhandled promise rejection. */\n\n        rejection.catch(function () {});\n        this.pushQueue.push(rejection);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this = this;\n\n      Promise.resolve().then(function () {\n        if (_this.removeCallback) _this.removeCallback();\n      });\n    }\n  }, {\n    key: _Symbol$asyncIterator,\n    value: function value() {\n      var _this2 = this;\n\n      return {\n        next: function next(value) {\n          var result = _this2.pushQueue.shift();\n\n          if (result) {\n            if (_this2.lowWaterMark !== undefined && _this2.pushQueue.length <= _this2.lowWaterMark && _this2.isPaused) {\n              _this2.isPaused = false;\n\n              if (_this2.eventHandlers.lowWater) {\n                _this2.eventHandlers.lowWater();\n              }\n            }\n\n            return result;\n          } else if (_this2.isStopped) {\n            return Promise.resolve({\n              value: undefined,\n              done: true\n            });\n          } else {\n            return new Promise(function (resolve, reject) {\n              _this2.pullQueue.push({\n                resolve: resolve,\n                reject: reject\n              });\n            });\n          }\n        },\n        return: function _return() {\n          _this2.isStopped = true;\n          _this2.pushQueue.length = 0;\n\n          _this2.remove();\n\n          return Promise.resolve({\n            value: undefined,\n            done: true\n          });\n        }\n      };\n    }\n  }]);\n\n  return EventQueue;\n}(Symbol.asyncIterator);\n\nvar EventIterator = /*#__PURE__*/_createClass(function EventIterator(listen) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$highWaterMark = _ref.highWaterMark,\n      highWaterMark = _ref$highWaterMark === void 0 ? 100 : _ref$highWaterMark,\n      _ref$lowWaterMark = _ref.lowWaterMark,\n      lowWaterMark = _ref$lowWaterMark === void 0 ? 1 : _ref$lowWaterMark;\n\n  _classCallCheck(this, EventIterator);\n\n  var queue = new EventQueue();\n  queue.highWaterMark = highWaterMark;\n  queue.lowWaterMark = lowWaterMark;\n\n  queue.removeCallback = listen({\n    push: function push(value) {\n      return queue.push(value);\n    },\n    stop: function stop() {\n      return queue.stop();\n    },\n    fail: function fail(error) {\n      return queue.fail(error);\n    },\n    on: function on(event, fn) {\n      queue.eventHandlers[event] = fn;\n    }\n  }) || function () {};\n\n  this[Symbol.asyncIterator] = function () {\n    return queue[Symbol.asyncIterator]();\n  };\n\n  Object.freeze(this);\n});\n\nexports.EventIterator = EventIterator;\nexports.default = EventIterator;","map":{"version":3,"names":["Object","defineProperty","exports","value","EventQueue","pullQueue","pushQueue","eventHandlers","isPaused","isStopped","resolution","done","length","placeholder","shift","resolve","push","Promise","highWaterMark","undefined","highWater","console","warn","remove","error","reject","rejection","catch","then","removeCallback","next","result","lowWaterMark","lowWater","return","Symbol","asyncIterator","EventIterator","listen","queue","stop","fail","on","event","fn","freeze","default"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/event-iterator/lib/event-iterator.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass EventQueue {\n    constructor() {\n        this.pullQueue = [];\n        this.pushQueue = [];\n        this.eventHandlers = {};\n        this.isPaused = false;\n        this.isStopped = false;\n    }\n    push(value) {\n        if (this.isStopped)\n            return;\n        const resolution = { value, done: false };\n        if (this.pullQueue.length) {\n            const placeholder = this.pullQueue.shift();\n            if (placeholder)\n                placeholder.resolve(resolution);\n        }\n        else {\n            this.pushQueue.push(Promise.resolve(resolution));\n            if (this.highWaterMark !== undefined &&\n                this.pushQueue.length >= this.highWaterMark &&\n                !this.isPaused) {\n                this.isPaused = true;\n                if (this.eventHandlers.highWater) {\n                    this.eventHandlers.highWater();\n                }\n                else if (console) {\n                    console.warn(`EventIterator queue reached ${this.pushQueue.length} items`);\n                }\n            }\n        }\n    }\n    stop() {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        for (const placeholder of this.pullQueue) {\n            placeholder.resolve({ value: undefined, done: true });\n        }\n        this.pullQueue.length = 0;\n    }\n    fail(error) {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        this.remove();\n        if (this.pullQueue.length) {\n            for (const placeholder of this.pullQueue) {\n                placeholder.reject(error);\n            }\n            this.pullQueue.length = 0;\n        }\n        else {\n            const rejection = Promise.reject(error);\n            /* Attach error handler to avoid leaking an unhandled promise rejection. */\n            rejection.catch(() => { });\n            this.pushQueue.push(rejection);\n        }\n    }\n    remove() {\n        Promise.resolve().then(() => {\n            if (this.removeCallback)\n                this.removeCallback();\n        });\n    }\n    [Symbol.asyncIterator]() {\n        return {\n            next: (value) => {\n                const result = this.pushQueue.shift();\n                if (result) {\n                    if (this.lowWaterMark !== undefined &&\n                        this.pushQueue.length <= this.lowWaterMark &&\n                        this.isPaused) {\n                        this.isPaused = false;\n                        if (this.eventHandlers.lowWater) {\n                            this.eventHandlers.lowWater();\n                        }\n                    }\n                    return result;\n                }\n                else if (this.isStopped) {\n                    return Promise.resolve({ value: undefined, done: true });\n                }\n                else {\n                    return new Promise((resolve, reject) => {\n                        this.pullQueue.push({ resolve, reject });\n                    });\n                }\n            },\n            return: () => {\n                this.isStopped = true;\n                this.pushQueue.length = 0;\n                this.remove();\n                return Promise.resolve({ value: undefined, done: true });\n            },\n        };\n    }\n}\nclass EventIterator {\n    constructor(listen, { highWaterMark = 100, lowWaterMark = 1 } = {}) {\n        const queue = new EventQueue();\n        queue.highWaterMark = highWaterMark;\n        queue.lowWaterMark = lowWaterMark;\n        queue.removeCallback =\n            listen({\n                push: value => queue.push(value),\n                stop: () => queue.stop(),\n                fail: error => queue.fail(error),\n                on: (event, fn) => {\n                    queue.eventHandlers[event] = fn;\n                },\n            }) || (() => { });\n        this[Symbol.asyncIterator] = () => queue[Symbol.asyncIterator]();\n        Object.freeze(this);\n    }\n}\nexports.EventIterator = EventIterator;\nexports.default = EventIterator;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}