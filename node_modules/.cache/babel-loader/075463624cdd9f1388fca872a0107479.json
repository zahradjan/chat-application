{"ast":null,"code":"'use strict';\n\nconst getTime = require('./time');\n\nclass Retimer {\n  constructor(callback, timeout, args) {\n    const that = this;\n    this._started = getTime();\n    this._rescheduled = 0;\n    this._scheduled = timeout;\n    this._args = args;\n    this._triggered = false;\n\n    this._timerWrapper = () => {\n      if (that._rescheduled > 0) {\n        that._scheduled = that._rescheduled - (getTime() - that._started);\n\n        that._schedule(that._scheduled);\n      } else {\n        that._triggered = true;\n        callback.apply(null, that._args);\n      }\n    };\n\n    this._timer = setTimeout(this._timerWrapper, timeout);\n  }\n\n  reschedule(timeout) {\n    if (!timeout) {\n      timeout = this._scheduled;\n    }\n\n    const now = getTime();\n\n    if (now + timeout - (this._started + this._scheduled) < 0) {\n      clearTimeout(this._timer);\n\n      this._schedule(timeout);\n    } else if (!this._triggered) {\n      this._started = now;\n      this._rescheduled = timeout;\n    } else {\n      this._schedule(timeout);\n    }\n  }\n\n  _schedule(timeout) {\n    this._triggered = false;\n    this._started = getTime();\n    this._rescheduled = 0;\n    this._scheduled = timeout;\n    this._timer = setTimeout(this._timerWrapper, timeout);\n  }\n\n  clear() {\n    clearTimeout(this._timer);\n  }\n\n}\n\nfunction retimer() {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed');\n  }\n\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed');\n  }\n\n  let args;\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2);\n    /* eslint-disable no-var */\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2];\n    }\n  }\n\n  return new Retimer(arguments[0], arguments[1], args);\n}\n\nmodule.exports = retimer;","map":{"version":3,"names":["getTime","require","Retimer","constructor","callback","timeout","args","that","_started","_rescheduled","_scheduled","_args","_triggered","_timerWrapper","_schedule","apply","_timer","setTimeout","reschedule","now","clearTimeout","clear","retimer","arguments","Error","length","Array","i","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/retimer/retimer.js"],"sourcesContent":["'use strict'\n\nconst getTime = require('./time')\n\nclass Retimer {\n  constructor (callback, timeout, args) {\n    const that = this\n\n    this._started = getTime()\n    this._rescheduled = 0\n    this._scheduled = timeout\n    this._args = args\n    this._triggered = false\n\n    this._timerWrapper = () => {\n      if (that._rescheduled > 0) {\n        that._scheduled = that._rescheduled - (getTime() - that._started)\n        that._schedule(that._scheduled)\n      } else {\n        that._triggered = true\n        callback.apply(null, that._args)\n      }\n    }\n\n    this._timer = setTimeout(this._timerWrapper, timeout)\n  }\n\n  reschedule (timeout) {\n    if (!timeout) {\n      timeout = this._scheduled\n    }\n    const now = getTime()\n    if ((now + timeout) - (this._started + this._scheduled) < 0) {\n      clearTimeout(this._timer)\n      this._schedule(timeout)\n    } else if (!this._triggered) {\n      this._started = now\n      this._rescheduled = timeout\n    } else {\n      this._schedule(timeout)\n    }\n  }\n\n  _schedule (timeout) {\n    this._triggered = false\n    this._started = getTime()\n    this._rescheduled = 0\n    this._scheduled = timeout\n    this._timer = setTimeout(this._timerWrapper, timeout)\n  }\n\n  clear () {\n    clearTimeout(this._timer)\n  }\n}\n\nfunction retimer () {\n  if (typeof arguments[0] !== 'function') {\n    throw new Error('callback needed')\n  }\n\n  if (typeof arguments[1] !== 'number') {\n    throw new Error('timeout needed')\n  }\n\n  let args\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2)\n\n    /* eslint-disable no-var */\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2]\n    }\n  }\n\n  return new Retimer(arguments[0], arguments[1], args)\n}\n\nmodule.exports = retimer\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}