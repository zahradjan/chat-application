{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _createForOfIteratorHelper = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _require = require('abstract-leveldown'),\n    AbstractIterator = _require.AbstractIterator;\n\nvar inherits = require('inherits');\n\nvar getCallback = require('./util').getCallback;\n\nvar kOptions = Symbol('options');\nvar kIterator = Symbol('iterator');\nvar kOperations = Symbol('operations');\nvar kPromise = Symbol('promise');\n\nfunction DeferredIterator(db, options) {\n  AbstractIterator.call(this, db);\n  this[kOptions] = options;\n  this[kIterator] = null;\n  this[kOperations] = [];\n}\n\ninherits(DeferredIterator, AbstractIterator);\n\nDeferredIterator.prototype.setDb = function (db) {\n  this[kIterator] = db.iterator(this[kOptions]);\n\n  var _iterator = _createForOfIteratorHelper(this[kOperations].splice(0, this[kOperations].length)),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _this$kIterator;\n\n      var op = _step.value;\n\n      (_this$kIterator = this[kIterator])[op.method].apply(_this$kIterator, _toConsumableArray(op.args));\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\n\nDeferredIterator.prototype.next = function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (this.db.status === 'open') {\n    var _this$kIterator2;\n\n    return (_this$kIterator2 = this[kIterator]).next.apply(_this$kIterator2, args);\n  }\n\n  var callback = getCallback(args, kPromise, function map(key, value) {\n    if (key === undefined && value === undefined) {\n      return undefined;\n    } else {\n      return [key, value];\n    }\n  });\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'next',\n      args: args\n    });\n  } else {\n    this._nextTick(callback, new Error('Database is not open'));\n  }\n\n  return callback[kPromise] || this;\n};\n\nDeferredIterator.prototype.seek = function () {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  if (this.db.status === 'open') {\n    var _this$kIterator3;\n\n    (_this$kIterator3 = this[kIterator]).seek.apply(_this$kIterator3, args);\n  } else if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'seek',\n      args: args\n    });\n  } else {\n    throw new Error('Database is not open');\n  }\n};\n\nDeferredIterator.prototype.end = function () {\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n\n  if (this.db.status === 'open') {\n    var _this$kIterator4;\n\n    return (_this$kIterator4 = this[kIterator]).end.apply(_this$kIterator4, args);\n  }\n\n  var callback = getCallback(args, kPromise);\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'end',\n      args: args\n    });\n  } else {\n    this._nextTick(callback, new Error('Database is not open'));\n  }\n\n  return callback[kPromise] || this;\n};\n\nvar _loop = function _loop() {\n  var method = _arr[_i];\n\n  DeferredIterator.prototype['_' + method] = function () {\n    /* istanbul ignore next: assertion */\n    throw new Error('Did not expect private method to be called: ' + method);\n  };\n};\n\nfor (var _i = 0, _arr = ['next', 'seek', 'end']; _i < _arr.length; _i++) {\n  _loop();\n}\n\nmodule.exports = DeferredIterator;","map":{"version":3,"names":["require","AbstractIterator","inherits","getCallback","kOptions","Symbol","kIterator","kOperations","kPromise","DeferredIterator","db","options","call","prototype","setDb","iterator","splice","length","op","method","args","next","status","callback","map","key","value","undefined","push","_nextTick","Error","seek","end","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/deferred-leveldown/deferred-iterator.js"],"sourcesContent":["'use strict'\n\nconst { AbstractIterator } = require('abstract-leveldown')\nconst inherits = require('inherits')\nconst getCallback = require('./util').getCallback\n\nconst kOptions = Symbol('options')\nconst kIterator = Symbol('iterator')\nconst kOperations = Symbol('operations')\nconst kPromise = Symbol('promise')\n\nfunction DeferredIterator (db, options) {\n  AbstractIterator.call(this, db)\n\n  this[kOptions] = options\n  this[kIterator] = null\n  this[kOperations] = []\n}\n\ninherits(DeferredIterator, AbstractIterator)\n\nDeferredIterator.prototype.setDb = function (db) {\n  this[kIterator] = db.iterator(this[kOptions])\n\n  for (const op of this[kOperations].splice(0, this[kOperations].length)) {\n    this[kIterator][op.method](...op.args)\n  }\n}\n\nDeferredIterator.prototype.next = function (...args) {\n  if (this.db.status === 'open') {\n    return this[kIterator].next(...args)\n  }\n\n  const callback = getCallback(args, kPromise, function map (key, value) {\n    if (key === undefined && value === undefined) {\n      return undefined\n    } else {\n      return [key, value]\n    }\n  })\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'next', args })\n  } else {\n    this._nextTick(callback, new Error('Database is not open'))\n  }\n\n  return callback[kPromise] || this\n}\n\nDeferredIterator.prototype.seek = function (...args) {\n  if (this.db.status === 'open') {\n    this[kIterator].seek(...args)\n  } else if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'seek', args })\n  } else {\n    throw new Error('Database is not open')\n  }\n}\n\nDeferredIterator.prototype.end = function (...args) {\n  if (this.db.status === 'open') {\n    return this[kIterator].end(...args)\n  }\n\n  const callback = getCallback(args, kPromise)\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'end', args })\n  } else {\n    this._nextTick(callback, new Error('Database is not open'))\n  }\n\n  return callback[kPromise] || this\n}\n\nfor (const method of ['next', 'seek', 'end']) {\n  DeferredIterator.prototype['_' + method] = function () {\n    /* istanbul ignore next: assertion */\n    throw new Error('Did not expect private method to be called: ' + method)\n  }\n}\n\nmodule.exports = DeferredIterator\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}