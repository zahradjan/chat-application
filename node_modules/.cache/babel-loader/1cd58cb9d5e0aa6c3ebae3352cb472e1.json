{"ast":null,"code":"var _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar Fifo = require('fast-fifo');\n\nvar defer = require('p-defer');\n\nmodule.exports = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function PFifo() {\n    _classCallCheck(this, PFifo);\n\n    this._buffer = new Fifo();\n    this._waitingConsumers = new Fifo();\n  }\n\n  _createClass(PFifo, [{\n    key: \"push\",\n    value: function push(chunk) {\n      var _defer = defer(),\n          promise = _defer.promise,\n          resolve = _defer.resolve;\n\n      this._buffer.push({\n        chunk: chunk,\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"_consume\",\n    value: function _consume() {\n      while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n        var nextConsumer = this._waitingConsumers.shift();\n\n        var nextChunk = this._buffer.shift();\n\n        nextConsumer.resolve(nextChunk.chunk);\n        nextChunk.resolve();\n      }\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      var _defer2 = defer(),\n          promise = _defer2.promise,\n          resolve = _defer2.resolve;\n\n      this._waitingConsumers.push({\n        resolve: resolve\n      });\n\n      this._consume();\n\n      return promise;\n    }\n  }, {\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return this._buffer.isEmpty();\n    }\n  }]);\n\n  return PFifo;\n}();","map":{"version":3,"names":["Fifo","require","defer","module","exports","_buffer","_waitingConsumers","chunk","promise","resolve","push","_consume","isEmpty","nextConsumer","shift","nextChunk"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/p-fifo/index.js"],"sourcesContent":["const Fifo = require('fast-fifo')\nconst defer = require('p-defer')\n\nmodule.exports = class PFifo {\n  constructor () {\n    this._buffer = new Fifo()\n    this._waitingConsumers = new Fifo()\n  }\n\n  push (chunk) {\n    const { promise, resolve } = defer()\n    this._buffer.push({ chunk, resolve })\n    this._consume()\n    return promise\n  }\n\n  _consume () {\n    while (!this._waitingConsumers.isEmpty() && !this._buffer.isEmpty()) {\n      const nextConsumer = this._waitingConsumers.shift()\n      const nextChunk = this._buffer.shift()\n      nextConsumer.resolve(nextChunk.chunk)\n      nextChunk.resolve()\n    }\n  }\n\n  shift () {\n    const { promise, resolve } = defer()\n    this._waitingConsumers.push({ resolve })\n    this._consume()\n    return promise\n  }\n\n  isEmpty () {\n    return this._buffer.isEmpty()\n  }\n}\n"],"mappings":";;;;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,WAAD,CAApB;;AACA,IAAMC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAArB;;AAEAE,MAAM,CAACC,OAAP;EAAA;;EACE,iBAAe;IAAA;;IACb,KAAKC,OAAL,GAAe,IAAIL,IAAJ,EAAf;IACA,KAAKM,iBAAL,GAAyB,IAAIN,IAAJ,EAAzB;EACD;;EAJH;IAAA;IAAA,OAME,cAAMO,KAAN,EAAa;MACX,aAA6BL,KAAK,EAAlC;MAAA,IAAQM,OAAR,UAAQA,OAAR;MAAA,IAAiBC,OAAjB,UAAiBA,OAAjB;;MACA,KAAKJ,OAAL,CAAaK,IAAb,CAAkB;QAAEH,KAAK,EAALA,KAAF;QAASE,OAAO,EAAPA;MAAT,CAAlB;;MACA,KAAKE,QAAL;;MACA,OAAOH,OAAP;IACD;EAXH;IAAA;IAAA,OAaE,oBAAY;MACV,OAAO,CAAC,KAAKF,iBAAL,CAAuBM,OAAvB,EAAD,IAAqC,CAAC,KAAKP,OAAL,CAAaO,OAAb,EAA7C,EAAqE;QACnE,IAAMC,YAAY,GAAG,KAAKP,iBAAL,CAAuBQ,KAAvB,EAArB;;QACA,IAAMC,SAAS,GAAG,KAAKV,OAAL,CAAaS,KAAb,EAAlB;;QACAD,YAAY,CAACJ,OAAb,CAAqBM,SAAS,CAACR,KAA/B;QACAQ,SAAS,CAACN,OAAV;MACD;IACF;EApBH;IAAA;IAAA,OAsBE,iBAAS;MACP,cAA6BP,KAAK,EAAlC;MAAA,IAAQM,OAAR,WAAQA,OAAR;MAAA,IAAiBC,OAAjB,WAAiBA,OAAjB;;MACA,KAAKH,iBAAL,CAAuBI,IAAvB,CAA4B;QAAED,OAAO,EAAPA;MAAF,CAA5B;;MACA,KAAKE,QAAL;;MACA,OAAOH,OAAP;IACD;EA3BH;IAAA;IAAA,OA6BE,mBAAW;MACT,OAAO,KAAKH,OAAL,CAAaO,OAAb,EAAP;IACD;EA/BH;;EAAA;AAAA"},"metadata":{},"sourceType":"script"}