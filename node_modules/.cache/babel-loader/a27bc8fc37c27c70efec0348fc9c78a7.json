{"ast":null,"code":"'use strict';\n\nvar _slicedToArray = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nvar _regeneratorRuntime = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _inherits = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar _wrapAsyncGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/wrapAsyncGenerator.js\").default;\n\nvar _awaitAsyncGenerator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/awaitAsyncGenerator.js\").default;\n\nvar _asyncIterator = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncIterator.js\").default;\n\nvar _asyncGeneratorDelegate = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/asyncGeneratorDelegate.js\").default;\n\nvar Key = require('./key');\n\nvar Adapter = require('./adapter');\n\nvar Errors = require('./errors');\n/**\n * @typedef {import('./types').Pair} Pair\n * @typedef {import('./types').Datastore} Datastore\n * @typedef {import('interface-store').Options} Options\n */\n\n/**\n * @class MemoryDatastore\n * @implements {Datastore}\n */\n\n\nvar MemoryDatastore = /*#__PURE__*/function (_Adapter) {\n  _inherits(MemoryDatastore, _Adapter);\n\n  var _super = _createSuper(MemoryDatastore);\n\n  function MemoryDatastore() {\n    var _this3;\n\n    _classCallCheck(this, MemoryDatastore);\n\n    _this3 = _super.call(this);\n    /** @type {Record<string, Uint8Array>} */\n\n    _this3.data = {};\n    return _this3;\n  }\n\n  _createClass(MemoryDatastore, [{\n    key: \"open\",\n    value: function open() {\n      return Promise.resolve();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      return Promise.resolve();\n    }\n    /**\n     * @param {Key} key\n     * @param {Uint8Array} val\n     */\n\n  }, {\n    key: \"put\",\n    value: function () {\n      var _put = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(key, val) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // eslint-disable-line require-await\n                this.data[key.toString()] = val;\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function put(_x, _x2) {\n        return _put.apply(this, arguments);\n      }\n\n      return put;\n    }()\n    /**\n     * @param {Key} key\n     */\n\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(key) {\n        var exists;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.has(key);\n\n              case 2:\n                exists = _context2.sent;\n\n                if (exists) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw Errors.notFoundError();\n\n              case 5:\n                return _context2.abrupt(\"return\", this.data[key.toString()]);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function get(_x3) {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n    /**\n     * @param {Key} key\n     */\n\n  }, {\n    key: \"has\",\n    value: function () {\n      var _has = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(key) {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", this.data[key.toString()] !== undefined);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function has(_x4) {\n        return _has.apply(this, arguments);\n      }\n\n      return has;\n    }()\n    /**\n     * @param {Key} key\n     */\n\n  }, {\n    key: \"delete\",\n    value: function () {\n      var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(key) {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                // eslint-disable-line require-await\n                delete this.data[key.toString()];\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _delete(_x5) {\n        return _delete2.apply(this, arguments);\n      }\n\n      return _delete;\n    }()\n  }, {\n    key: \"_all\",\n    value: function _all() {\n      var _this = this;\n\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Object.entries(_this.data).map(function (_ref) {\n                  var _ref2 = _slicedToArray(_ref, 2),\n                      key = _ref2[0],\n                      value = _ref2[1];\n\n                  return {\n                    key: new Key(key),\n                    value: value\n                  };\n                })), _awaitAsyncGenerator), \"t0\", 1);\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    }\n  }, {\n    key: \"_allKeys\",\n    value: function _allKeys() {\n      var _this2 = this;\n\n      return _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                return _context6.delegateYield(_asyncGeneratorDelegate(_asyncIterator(Object.entries(_this2.data).map(function (_ref3) {\n                  var _ref4 = _slicedToArray(_ref3, 1),\n                      key = _ref4[0];\n\n                  return new Key(key);\n                })), _awaitAsyncGenerator), \"t0\", 1);\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    }\n  }]);\n\n  return MemoryDatastore;\n}(Adapter);\n\nmodule.exports = MemoryDatastore;","map":{"version":3,"names":["Key","require","Adapter","Errors","MemoryDatastore","data","Promise","resolve","key","val","toString","has","exists","notFoundError","undefined","Object","entries","map","value","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/interface-datastore/src/memory.js"],"sourcesContent":["'use strict'\n\nconst Key = require('./key')\nconst Adapter = require('./adapter')\nconst Errors = require('./errors')\n\n/**\n * @typedef {import('./types').Pair} Pair\n * @typedef {import('./types').Datastore} Datastore\n * @typedef {import('interface-store').Options} Options\n */\n\n/**\n * @class MemoryDatastore\n * @implements {Datastore}\n */\nclass MemoryDatastore extends Adapter {\n  constructor () {\n    super()\n\n    /** @type {Record<string, Uint8Array>} */\n    this.data = {}\n  }\n\n  open () {\n    return Promise.resolve()\n  }\n\n  close () {\n    return Promise.resolve()\n  }\n\n  /**\n   * @param {Key} key\n   * @param {Uint8Array} val\n   */\n  async put (key, val) { // eslint-disable-line require-await\n    this.data[key.toString()] = val\n  }\n\n  /**\n   * @param {Key} key\n   */\n  async get (key) {\n    const exists = await this.has(key)\n    if (!exists) throw Errors.notFoundError()\n    return this.data[key.toString()]\n  }\n\n  /**\n   * @param {Key} key\n   */\n  async has (key) { // eslint-disable-line require-await\n    return this.data[key.toString()] !== undefined\n  }\n\n  /**\n   * @param {Key} key\n   */\n  async delete (key) { // eslint-disable-line require-await\n    delete this.data[key.toString()]\n  }\n\n  async * _all () {\n    yield * Object.entries(this.data)\n      .map(([key, value]) => ({ key: new Key(key), value }))\n  }\n\n  async * _allKeys () {\n    yield * Object.entries(this.data)\n      .map(([key]) => new Key(key))\n  }\n}\n\nmodule.exports = MemoryDatastore\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,GAAG,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAME,MAAM,GAAGF,OAAO,CAAC,UAAD,CAAtB;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;IACMG,e;;;;;EACJ,2BAAe;IAAA;;IAAA;;IACb;IAEA;;IACA,OAAKC,IAAL,GAAY,EAAZ;IAJa;EAKd;;;;WAED,gBAAQ;MACN,OAAOC,OAAO,CAACC,OAAR,EAAP;IACD;;;WAED,iBAAS;MACP,OAAOD,OAAO,CAACC,OAAR,EAAP;IACD;IAED;AACF;AACA;AACA;;;;;4EACE,iBAAWC,GAAX,EAAgBC,GAAhB;QAAA;UAAA;YAAA;cAAA;gBAAuB;gBACrB,KAAKJ,IAAL,CAAUG,GAAG,CAACE,QAAJ,EAAV,IAA4BD,GAA5B;;cADF;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;IAIA;AACF;AACA;;;;;4EACE,kBAAWD,GAAX;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACuB,KAAKG,GAAL,CAASH,GAAT,CADvB;;cAAA;gBACQI,MADR;;gBAAA,IAEOA,MAFP;kBAAA;kBAAA;gBAAA;;gBAAA,MAEqBT,MAAM,CAACU,aAAP,EAFrB;;cAAA;gBAAA,kCAGS,KAAKR,IAAL,CAAUG,GAAG,CAACE,QAAJ,EAAV,CAHT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;IAMA;AACF;AACA;;;;;4EACE,kBAAWF,GAAX;QAAA;UAAA;YAAA;cAAA;gBAAA,kCACS,KAAKH,IAAL,CAAUG,GAAG,CAACE,QAAJ,EAAV,MAA8BI,SADvC;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;IAIA;AACF;AACA;;;;;gFACE,kBAAcN,GAAd;QAAA;UAAA;YAAA;cAAA;gBAAqB;gBACnB,OAAO,KAAKH,IAAL,CAAUG,GAAG,CAACE,QAAJ,EAAV,CAAP;;cADF;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;WAIA,gBAAgB;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACd,sEAAQK,MAAM,CAACC,OAAP,CAAe,KAAI,CAACX,IAApB,EACLY,GADK,CACD;kBAAA;kBAAA,IAAET,GAAF;kBAAA,IAAOU,KAAP;;kBAAA,OAAmB;oBAAEV,GAAG,EAAE,IAAIR,GAAJ,CAAQQ,GAAR,CAAP;oBAAqBU,KAAK,EAALA;kBAArB,CAAnB;gBAAA,CADC,CAAR;;cADc;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGf;;;WAED,oBAAoB;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAClB,sEAAQH,MAAM,CAACC,OAAP,CAAe,MAAI,CAACX,IAApB,EACLY,GADK,CACD;kBAAA;kBAAA,IAAET,GAAF;;kBAAA,OAAW,IAAIR,GAAJ,CAAQQ,GAAR,CAAX;gBAAA,CADC,CAAR;;cADkB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGnB;;;;EAvD2BN,O;;AA0D9BiB,MAAM,CAACC,OAAP,GAAiBhB,eAAjB"},"metadata":{},"sourceType":"script"}