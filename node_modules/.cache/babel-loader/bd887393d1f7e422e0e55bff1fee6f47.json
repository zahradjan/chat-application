{"ast":null,"code":"'use strict';\n\nconst {\n  AbstractIterator\n} = require('abstract-leveldown');\n\nconst inherits = require('inherits');\n\nconst getCallback = require('./util').getCallback;\n\nconst kOptions = Symbol('options');\nconst kIterator = Symbol('iterator');\nconst kOperations = Symbol('operations');\nconst kPromise = Symbol('promise');\n\nfunction DeferredIterator(db, options) {\n  AbstractIterator.call(this, db);\n  this[kOptions] = options;\n  this[kIterator] = null;\n  this[kOperations] = [];\n}\n\ninherits(DeferredIterator, AbstractIterator);\n\nDeferredIterator.prototype.setDb = function (db) {\n  this[kIterator] = db.iterator(this[kOptions]);\n\n  for (const op of this[kOperations].splice(0, this[kOperations].length)) {\n    this[kIterator][op.method](...op.args);\n  }\n};\n\nDeferredIterator.prototype.next = function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  if (this.db.status === 'open') {\n    return this[kIterator].next(...args);\n  }\n\n  const callback = getCallback(args, kPromise, function map(key, value) {\n    if (key === undefined && value === undefined) {\n      return undefined;\n    } else {\n      return [key, value];\n    }\n  });\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'next',\n      args\n    });\n  } else {\n    this._nextTick(callback, new Error('Database is not open'));\n  }\n\n  return callback[kPromise] || this;\n};\n\nDeferredIterator.prototype.seek = function () {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  if (this.db.status === 'open') {\n    this[kIterator].seek(...args);\n  } else if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'seek',\n      args\n    });\n  } else {\n    throw new Error('Database is not open');\n  }\n};\n\nDeferredIterator.prototype.end = function () {\n  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n\n  if (this.db.status === 'open') {\n    return this[kIterator].end(...args);\n  }\n\n  const callback = getCallback(args, kPromise);\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({\n      method: 'end',\n      args\n    });\n  } else {\n    this._nextTick(callback, new Error('Database is not open'));\n  }\n\n  return callback[kPromise] || this;\n};\n\nfor (const method of ['next', 'seek', 'end']) {\n  DeferredIterator.prototype['_' + method] = function () {\n    /* istanbul ignore next: assertion */\n    throw new Error('Did not expect private method to be called: ' + method);\n  };\n}\n\nmodule.exports = DeferredIterator;","map":{"version":3,"names":["AbstractIterator","require","inherits","getCallback","kOptions","Symbol","kIterator","kOperations","kPromise","DeferredIterator","db","options","call","prototype","setDb","iterator","op","splice","length","method","args","next","status","callback","map","key","value","undefined","push","_nextTick","Error","seek","end","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/deferred-leveldown/deferred-iterator.js"],"sourcesContent":["'use strict'\n\nconst { AbstractIterator } = require('abstract-leveldown')\nconst inherits = require('inherits')\nconst getCallback = require('./util').getCallback\n\nconst kOptions = Symbol('options')\nconst kIterator = Symbol('iterator')\nconst kOperations = Symbol('operations')\nconst kPromise = Symbol('promise')\n\nfunction DeferredIterator (db, options) {\n  AbstractIterator.call(this, db)\n\n  this[kOptions] = options\n  this[kIterator] = null\n  this[kOperations] = []\n}\n\ninherits(DeferredIterator, AbstractIterator)\n\nDeferredIterator.prototype.setDb = function (db) {\n  this[kIterator] = db.iterator(this[kOptions])\n\n  for (const op of this[kOperations].splice(0, this[kOperations].length)) {\n    this[kIterator][op.method](...op.args)\n  }\n}\n\nDeferredIterator.prototype.next = function (...args) {\n  if (this.db.status === 'open') {\n    return this[kIterator].next(...args)\n  }\n\n  const callback = getCallback(args, kPromise, function map (key, value) {\n    if (key === undefined && value === undefined) {\n      return undefined\n    } else {\n      return [key, value]\n    }\n  })\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'next', args })\n  } else {\n    this._nextTick(callback, new Error('Database is not open'))\n  }\n\n  return callback[kPromise] || this\n}\n\nDeferredIterator.prototype.seek = function (...args) {\n  if (this.db.status === 'open') {\n    this[kIterator].seek(...args)\n  } else if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'seek', args })\n  } else {\n    throw new Error('Database is not open')\n  }\n}\n\nDeferredIterator.prototype.end = function (...args) {\n  if (this.db.status === 'open') {\n    return this[kIterator].end(...args)\n  }\n\n  const callback = getCallback(args, kPromise)\n\n  if (this.db.status === 'opening') {\n    this[kOperations].push({ method: 'end', args })\n  } else {\n    this._nextTick(callback, new Error('Database is not open'))\n  }\n\n  return callback[kPromise] || this\n}\n\nfor (const method of ['next', 'seek', 'end']) {\n  DeferredIterator.prototype['_' + method] = function () {\n    /* istanbul ignore next: assertion */\n    throw new Error('Did not expect private method to be called: ' + method)\n  }\n}\n\nmodule.exports = DeferredIterator\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}