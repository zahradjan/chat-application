{"ast":null,"code":"var events = require('events');\n\nvar inherits = require('inherits');\n\nmodule.exports = LRU;\n\nfunction LRU(opts) {\n  if (!(this instanceof LRU)) return new LRU(opts);\n  if (typeof opts === 'number') opts = {\n    max: opts\n  };\n  if (!opts) opts = {};\n  events.EventEmitter.call(this);\n  this.cache = {};\n  this.head = this.tail = null;\n  this.length = 0;\n  this.max = opts.max || 1000;\n  this.maxAge = opts.maxAge || 0;\n}\n\ninherits(LRU, events.EventEmitter);\nObject.defineProperty(LRU.prototype, 'keys', {\n  get: function () {\n    return Object.keys(this.cache);\n  }\n});\n\nLRU.prototype.clear = function () {\n  this.cache = {};\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nLRU.prototype.remove = function (key) {\n  if (typeof key !== 'string') key = '' + key;\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  delete this.cache[key];\n\n  this._unlink(key, element.prev, element.next);\n\n  return element.value;\n};\n\nLRU.prototype._unlink = function (key, prev, next) {\n  this.length--;\n\n  if (this.length === 0) {\n    this.head = this.tail = null;\n  } else {\n    if (this.head === key) {\n      this.head = prev;\n      this.cache[this.head].next = null;\n    } else if (this.tail === key) {\n      this.tail = next;\n      this.cache[this.tail].prev = null;\n    } else {\n      this.cache[prev].next = next;\n      this.cache[next].prev = prev;\n    }\n  }\n};\n\nLRU.prototype.peek = function (key) {\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  if (!this._checkAge(key, element)) return;\n  return element.value;\n};\n\nLRU.prototype.set = function (key, value) {\n  if (typeof key !== 'string') key = '' + key;\n  var element;\n\n  if (this.cache.hasOwnProperty(key)) {\n    element = this.cache[key];\n    element.value = value;\n    if (this.maxAge) element.modified = Date.now(); // If it's already the head, there's nothing more to do:\n\n    if (key === this.head) return value;\n\n    this._unlink(key, element.prev, element.next);\n  } else {\n    element = {\n      value: value,\n      modified: 0,\n      next: null,\n      prev: null\n    };\n    if (this.maxAge) element.modified = Date.now();\n    this.cache[key] = element; // Eviction is only possible if the key didn't already exist:\n\n    if (this.length === this.max) this.evict();\n  }\n\n  this.length++;\n  element.next = null;\n  element.prev = this.head;\n  if (this.head) this.cache[this.head].next = key;\n  this.head = key;\n  if (!this.tail) this.tail = key;\n  return value;\n};\n\nLRU.prototype._checkAge = function (key, element) {\n  if (this.maxAge && Date.now() - element.modified > this.maxAge) {\n    this.remove(key);\n    this.emit('evict', {\n      key: key,\n      value: element.value\n    });\n    return false;\n  }\n\n  return true;\n};\n\nLRU.prototype.get = function (key) {\n  if (typeof key !== 'string') key = '' + key;\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  if (!this._checkAge(key, element)) return;\n\n  if (this.head !== key) {\n    if (key === this.tail) {\n      this.tail = element.next;\n      this.cache[this.tail].prev = null;\n    } else {\n      // Set prev.next -> element.next:\n      this.cache[element.prev].next = element.next;\n    } // Set element.next.prev -> element.prev:\n\n\n    this.cache[element.next].prev = element.prev; // Element is the new head\n\n    this.cache[this.head].next = key;\n    element.prev = this.head;\n    element.next = null;\n    this.head = key;\n  }\n\n  return element.value;\n};\n\nLRU.prototype.evict = function () {\n  if (!this.tail) return;\n  var key = this.tail;\n  var value = this.remove(this.tail);\n  this.emit('evict', {\n    key: key,\n    value: value\n  });\n};","map":{"version":3,"names":["events","require","inherits","module","exports","LRU","opts","max","EventEmitter","call","cache","head","tail","length","maxAge","Object","defineProperty","prototype","get","keys","clear","remove","key","hasOwnProperty","element","_unlink","prev","next","value","peek","_checkAge","set","modified","Date","now","evict","emit"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/lru/index.js"],"sourcesContent":["var events = require('events')\nvar inherits = require('inherits')\n\nmodule.exports = LRU\n\nfunction LRU (opts) {\n  if (!(this instanceof LRU)) return new LRU(opts)\n  if (typeof opts === 'number') opts = {max: opts}\n  if (!opts) opts = {}\n  events.EventEmitter.call(this)\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n  this.max = opts.max || 1000\n  this.maxAge = opts.maxAge || 0\n}\n\ninherits(LRU, events.EventEmitter)\n\nObject.defineProperty(LRU.prototype, 'keys', {\n  get: function () { return Object.keys(this.cache) }\n})\n\nLRU.prototype.clear = function () {\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n}\n\nLRU.prototype.remove = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n  delete this.cache[key]\n  this._unlink(key, element.prev, element.next)\n  return element.value\n}\n\nLRU.prototype._unlink = function (key, prev, next) {\n  this.length--\n\n  if (this.length === 0) {\n    this.head = this.tail = null\n  } else {\n    if (this.head === key) {\n      this.head = prev\n      this.cache[this.head].next = null\n    } else if (this.tail === key) {\n      this.tail = next\n      this.cache[this.tail].prev = null\n    } else {\n      this.cache[prev].next = next\n      this.cache[next].prev = prev\n    }\n  }\n}\n\nLRU.prototype.peek = function (key) {\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n  return element.value\n}\n\nLRU.prototype.set = function (key, value) {\n  if (typeof key !== 'string') key = '' + key\n\n  var element\n\n  if (this.cache.hasOwnProperty(key)) {\n    element = this.cache[key]\n    element.value = value\n    if (this.maxAge) element.modified = Date.now()\n\n    // If it's already the head, there's nothing more to do:\n    if (key === this.head) return value\n    this._unlink(key, element.prev, element.next)\n  } else {\n    element = {value: value, modified: 0, next: null, prev: null}\n    if (this.maxAge) element.modified = Date.now()\n    this.cache[key] = element\n\n    // Eviction is only possible if the key didn't already exist:\n    if (this.length === this.max) this.evict()\n  }\n\n  this.length++\n  element.next = null\n  element.prev = this.head\n\n  if (this.head) this.cache[this.head].next = key\n  this.head = key\n\n  if (!this.tail) this.tail = key\n  return value\n}\n\nLRU.prototype._checkAge = function (key, element) {\n  if (this.maxAge && (Date.now() - element.modified) > this.maxAge) {\n    this.remove(key)\n    this.emit('evict', {key: key, value: element.value})\n    return false\n  }\n  return true\n}\n\nLRU.prototype.get = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n\n  if (this.head !== key) {\n    if (key === this.tail) {\n      this.tail = element.next\n      this.cache[this.tail].prev = null\n    } else {\n      // Set prev.next -> element.next:\n      this.cache[element.prev].next = element.next\n    }\n\n    // Set element.next.prev -> element.prev:\n    this.cache[element.next].prev = element.prev\n\n    // Element is the new head\n    this.cache[this.head].next = key\n    element.prev = this.head\n    element.next = null\n    this.head = key\n  }\n\n  return element.value\n}\n\nLRU.prototype.evict = function () {\n  if (!this.tail) return\n  var key = this.tail\n  var value = this.remove(this.tail)\n  this.emit('evict', {key: key, value: value})\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}