{"ast":null,"code":"import { User } from \"@chatscope/use-chat\";\nimport Cookies from \"js-cookie\";\nimport { makeAutoObservable } from \"mobx\";\nconst cookieKey = \"orbit-chat-username\";\nexport default class SessionStore {\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    this._user = undefined;\n    makeAutoObservable(this);\n  }\n\n  async init() {\n    await this.loadFromCache();\n  }\n\n  _readUserFromCache() {\n    const username = Cookies.get(cookieKey);\n    return username ? username : null;\n  }\n\n  isAuthenticated() {\n    return !!this._user;\n  }\n\n  async _setUser(user) {\n    if (!user) throw new Error('\"username\" is not defined'); // ;if (user && !user.username) throw new Error('\"user.username\" is not defined')\n\n    this._cacheUser(user);\n\n    this._user = user;\n  }\n\n  _cacheUser(user) {\n    if (user) {\n      Cookies.set(cookieKey, user);\n    } else {\n      Cookies.remove(cookieKey);\n    }\n  }\n\n  async loadFromCache() {\n    const cached = this._readUserFromCache();\n\n    if (cached) await this.login(cached);\n  }\n\n  async login(user) {\n    console.log(\"User login\");\n    return await this._setUser(user);\n  }\n\n  logout() {\n    console.log(\"User logout\");\n    return this._setUser(null);\n  }\n\n}","map":{"version":3,"names":["User","Cookies","makeAutoObservable","cookieKey","SessionStore","constructor","rootStore","_user","undefined","init","loadFromCache","_readUserFromCache","username","get","isAuthenticated","_setUser","user","Error","_cacheUser","set","remove","cached","login","console","log","logout"],"sources":["C:/Users/zajan/GitHub/chatApplication/src/data/store/SessionStore.js"],"sourcesContent":["import { User } from \"@chatscope/use-chat\";\r\nimport Cookies from \"js-cookie\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nconst cookieKey = \"orbit-chat-username\";\r\nexport default class SessionStore {\r\n  _user;\r\n\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this._user = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    await this.loadFromCache();\r\n  }\r\n  _readUserFromCache() {\r\n    const username = Cookies.get(cookieKey);\r\n    return username ? username : null;\r\n  }\r\n  isAuthenticated() {\r\n    return !!this._user;\r\n  }\r\n\r\n  async _setUser(user) {\r\n    if (!user) throw new Error('\"username\" is not defined');\r\n    // ;if (user && !user.username) throw new Error('\"user.username\" is not defined')\r\n    this._cacheUser(user);\r\n    this._user = user;\r\n  }\r\n\r\n  _cacheUser(user) {\r\n    if (user) {\r\n      Cookies.set(cookieKey, user);\r\n    } else {\r\n      Cookies.remove(cookieKey);\r\n    }\r\n  }\r\n\r\n  async loadFromCache() {\r\n    const cached = this._readUserFromCache();\r\n    if (cached) await this.login(cached);\r\n  }\r\n\r\n  async login(user) {\r\n    console.log(\"User login\");\r\n    return await this._setUser(user);\r\n  }\r\n\r\n  logout() {\r\n    console.log(\"User logout\");\r\n    return this._setUser(null);\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,IAAT,QAAqB,qBAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,kBAAT,QAAmC,MAAnC;AACA,MAAMC,SAAS,GAAG,qBAAlB;AACA,eAAe,MAAMC,YAAN,CAAmB;EAGhCC,WAAW,CAACC,SAAD,EAAY;IACrB,KAAKA,SAAL,GAAiBA,SAAjB;IACA,KAAKC,KAAL,GAAaC,SAAb;IACAN,kBAAkB,CAAC,IAAD,CAAlB;EACD;;EAES,MAAJO,IAAI,GAAG;IACX,MAAM,KAAKC,aAAL,EAAN;EACD;;EACDC,kBAAkB,GAAG;IACnB,MAAMC,QAAQ,GAAGX,OAAO,CAACY,GAAR,CAAYV,SAAZ,CAAjB;IACA,OAAOS,QAAQ,GAAGA,QAAH,GAAc,IAA7B;EACD;;EACDE,eAAe,GAAG;IAChB,OAAO,CAAC,CAAC,KAAKP,KAAd;EACD;;EAEa,MAARQ,QAAQ,CAACC,IAAD,EAAO;IACnB,IAAI,CAACA,IAAL,EAAW,MAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN,CADQ,CAEnB;;IACA,KAAKC,UAAL,CAAgBF,IAAhB;;IACA,KAAKT,KAAL,GAAaS,IAAb;EACD;;EAEDE,UAAU,CAACF,IAAD,EAAO;IACf,IAAIA,IAAJ,EAAU;MACRf,OAAO,CAACkB,GAAR,CAAYhB,SAAZ,EAAuBa,IAAvB;IACD,CAFD,MAEO;MACLf,OAAO,CAACmB,MAAR,CAAejB,SAAf;IACD;EACF;;EAEkB,MAAbO,aAAa,GAAG;IACpB,MAAMW,MAAM,GAAG,KAAKV,kBAAL,EAAf;;IACA,IAAIU,MAAJ,EAAY,MAAM,KAAKC,KAAL,CAAWD,MAAX,CAAN;EACb;;EAEU,MAALC,KAAK,CAACN,IAAD,EAAO;IAChBO,OAAO,CAACC,GAAR,CAAY,YAAZ;IACA,OAAO,MAAM,KAAKT,QAAL,CAAcC,IAAd,CAAb;EACD;;EAEDS,MAAM,GAAG;IACPF,OAAO,CAACC,GAAR,CAAY,aAAZ;IACA,OAAO,KAAKT,QAAL,CAAc,IAAd,CAAP;EACD;;AAhD+B"},"metadata":{},"sourceType":"module"}