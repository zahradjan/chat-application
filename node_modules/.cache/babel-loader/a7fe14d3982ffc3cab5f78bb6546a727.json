{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar multihashing = require('multihashing-async');\n\nvar protobuf = require('protons');\n\nvar bs58 = require('bs58');\n\nvar crypto = require('./ed25519');\n\nvar pbm = protobuf(require('./keys.proto'));\n\nvar Ed25519PublicKey = /*#__PURE__*/function () {\n  function Ed25519PublicKey(key) {\n    _classCallCheck(this, Ed25519PublicKey);\n\n    this._key = ensureKey(key, crypto.publicKeyLength);\n  }\n\n  _createClass(Ed25519PublicKey, [{\n    key: \"verify\",\n    value: function verify(data, sig, callback) {\n      ensure(callback);\n      crypto.hashAndVerify(this._key, sig, data, callback);\n    }\n  }, {\n    key: \"marshal\",\n    value: function marshal() {\n      return Buffer.from(this._key);\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      return pbm.PublicKey.encode({\n        Type: pbm.KeyType.Ed25519,\n        Data: this.marshal()\n      });\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(key) {\n      return this.bytes.equals(key.bytes);\n    }\n  }, {\n    key: \"hash\",\n    value: function hash(callback) {\n      ensure(callback);\n      multihashing(this.bytes, 'sha2-256', callback);\n    }\n  }]);\n\n  return Ed25519PublicKey;\n}();\n\nvar Ed25519PrivateKey = /*#__PURE__*/function () {\n  // key       - 64 byte Uint8Array or Buffer containing private key\n  // publicKey - 32 byte Uint8Array or Buffer containing public key\n  function Ed25519PrivateKey(key, publicKey) {\n    _classCallCheck(this, Ed25519PrivateKey);\n\n    this._key = ensureKey(key, crypto.privateKeyLength);\n    this._publicKey = ensureKey(publicKey, crypto.publicKeyLength);\n  }\n\n  _createClass(Ed25519PrivateKey, [{\n    key: \"sign\",\n    value: function sign(message, callback) {\n      ensure(callback);\n      crypto.hashAndSign(this._key, message, callback);\n    }\n  }, {\n    key: \"public\",\n    get: function get() {\n      if (!this._publicKey) {\n        throw new Error('public key not provided');\n      }\n\n      return new Ed25519PublicKey(this._publicKey);\n    }\n  }, {\n    key: \"marshal\",\n    value: function marshal() {\n      return Buffer.concat([Buffer.from(this._key), Buffer.from(this._publicKey)]);\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      return pbm.PrivateKey.encode({\n        Type: pbm.KeyType.Ed25519,\n        Data: this.marshal()\n      });\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(key) {\n      return this.bytes.equals(key.bytes);\n    }\n  }, {\n    key: \"hash\",\n    value: function hash(callback) {\n      ensure(callback);\n      multihashing(this.bytes, 'sha2-256', callback);\n    }\n    /**\n     * Gets the ID of the key.\n     *\n     * The key id is the base58 encoding of the SHA-256 multihash of its public key.\n     * The public key is a protobuf encoding containing a type and the DER encoding\n     * of the PKCS SubjectPublicKeyInfo.\n     *\n     * @param {function(Error, id)} callback\n     * @returns {undefined}\n     */\n\n  }, {\n    key: \"id\",\n    value: function id(callback) {\n      this.public.hash(function (err, hash) {\n        if (err) {\n          return callback(err);\n        }\n\n        callback(null, bs58.encode(hash));\n      });\n    }\n  }]);\n\n  return Ed25519PrivateKey;\n}();\n\nfunction unmarshalEd25519PrivateKey(bytes, callback) {\n  try {\n    bytes = ensureKey(bytes, crypto.privateKeyLength + crypto.publicKeyLength);\n  } catch (err) {\n    return callback(err);\n  }\n\n  var privateKeyBytes = bytes.slice(0, crypto.privateKeyLength);\n  var publicKeyBytes = bytes.slice(crypto.privateKeyLength, bytes.length);\n  callback(null, new Ed25519PrivateKey(privateKeyBytes, publicKeyBytes));\n}\n\nfunction unmarshalEd25519PublicKey(bytes) {\n  bytes = ensureKey(bytes, crypto.publicKeyLength);\n  return new Ed25519PublicKey(bytes);\n}\n\nfunction generateKeyPair(_bits, cb) {\n  if (cb === undefined && typeof _bits === 'function') {\n    cb = _bits;\n  }\n\n  crypto.generateKey(function (err, keys) {\n    if (err) {\n      return cb(err);\n    }\n\n    var privkey;\n\n    try {\n      privkey = new Ed25519PrivateKey(keys.secretKey, keys.publicKey);\n    } catch (err) {\n      cb(err);\n      return;\n    }\n\n    cb(null, privkey);\n  });\n}\n\nfunction generateKeyPairFromSeed(seed, _bits, cb) {\n  if (cb === undefined && typeof _bits === 'function') {\n    cb = _bits;\n  }\n\n  crypto.generateKeyFromSeed(seed, function (err, keys) {\n    if (err) {\n      return cb(err);\n    }\n\n    var privkey;\n\n    try {\n      privkey = new Ed25519PrivateKey(keys.secretKey, keys.publicKey);\n    } catch (err) {\n      cb(err);\n      return;\n    }\n\n    cb(null, privkey);\n  });\n}\n\nfunction ensure(cb) {\n  if (typeof cb !== 'function') {\n    throw new Error('callback is required');\n  }\n}\n\nfunction ensureKey(key, length) {\n  if (Buffer.isBuffer(key)) {\n    key = new Uint8Array(key);\n  }\n\n  if (!(key instanceof Uint8Array) || key.length !== length) {\n    throw new Error('Key must be a Uint8Array or Buffer of length ' + length);\n  }\n\n  return key;\n}\n\nmodule.exports = {\n  Ed25519PublicKey: Ed25519PublicKey,\n  Ed25519PrivateKey: Ed25519PrivateKey,\n  unmarshalEd25519PrivateKey: unmarshalEd25519PrivateKey,\n  unmarshalEd25519PublicKey: unmarshalEd25519PublicKey,\n  generateKeyPair: generateKeyPair,\n  generateKeyPairFromSeed: generateKeyPairFromSeed\n};","map":{"version":3,"names":["multihashing","require","protobuf","bs58","crypto","pbm","Ed25519PublicKey","key","_key","ensureKey","publicKeyLength","data","sig","callback","ensure","hashAndVerify","Buffer","from","PublicKey","encode","Type","KeyType","Ed25519","Data","marshal","bytes","equals","Ed25519PrivateKey","publicKey","privateKeyLength","_publicKey","message","hashAndSign","Error","concat","PrivateKey","public","hash","err","unmarshalEd25519PrivateKey","privateKeyBytes","slice","publicKeyBytes","length","unmarshalEd25519PublicKey","generateKeyPair","_bits","cb","undefined","generateKey","keys","privkey","secretKey","generateKeyPairFromSeed","seed","generateKeyFromSeed","isBuffer","Uint8Array","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-keystore/node_modules/libp2p-crypto/src/keys/ed25519-class.js"],"sourcesContent":["'use strict'\n\nconst multihashing = require('multihashing-async')\nconst protobuf = require('protons')\nconst bs58 = require('bs58')\n\nconst crypto = require('./ed25519')\nconst pbm = protobuf(require('./keys.proto'))\n\nclass Ed25519PublicKey {\n  constructor (key) {\n    this._key = ensureKey(key, crypto.publicKeyLength)\n  }\n\n  verify (data, sig, callback) {\n    ensure(callback)\n    crypto.hashAndVerify(this._key, sig, data, callback)\n  }\n\n  marshal () {\n    return Buffer.from(this._key)\n  }\n\n  get bytes () {\n    return pbm.PublicKey.encode({\n      Type: pbm.KeyType.Ed25519,\n      Data: this.marshal()\n    })\n  }\n\n  equals (key) {\n    return this.bytes.equals(key.bytes)\n  }\n\n  hash (callback) {\n    ensure(callback)\n    multihashing(this.bytes, 'sha2-256', callback)\n  }\n}\n\nclass Ed25519PrivateKey {\n  // key       - 64 byte Uint8Array or Buffer containing private key\n  // publicKey - 32 byte Uint8Array or Buffer containing public key\n  constructor (key, publicKey) {\n    this._key = ensureKey(key, crypto.privateKeyLength)\n    this._publicKey = ensureKey(publicKey, crypto.publicKeyLength)\n  }\n\n  sign (message, callback) {\n    ensure(callback)\n    crypto.hashAndSign(this._key, message, callback)\n  }\n\n  get public () {\n    if (!this._publicKey) {\n      throw new Error('public key not provided')\n    }\n\n    return new Ed25519PublicKey(this._publicKey)\n  }\n\n  marshal () {\n    return Buffer.concat([Buffer.from(this._key), Buffer.from(this._publicKey)])\n  }\n\n  get bytes () {\n    return pbm.PrivateKey.encode({\n      Type: pbm.KeyType.Ed25519,\n      Data: this.marshal()\n    })\n  }\n\n  equals (key) {\n    return this.bytes.equals(key.bytes)\n  }\n\n  hash (callback) {\n    ensure(callback)\n    multihashing(this.bytes, 'sha2-256', callback)\n  }\n\n  /**\n   * Gets the ID of the key.\n   *\n   * The key id is the base58 encoding of the SHA-256 multihash of its public key.\n   * The public key is a protobuf encoding containing a type and the DER encoding\n   * of the PKCS SubjectPublicKeyInfo.\n   *\n   * @param {function(Error, id)} callback\n   * @returns {undefined}\n   */\n  id (callback) {\n    this.public.hash((err, hash) => {\n      if (err) {\n        return callback(err)\n      }\n      callback(null, bs58.encode(hash))\n    })\n  }\n}\n\nfunction unmarshalEd25519PrivateKey (bytes, callback) {\n  try {\n    bytes = ensureKey(bytes, crypto.privateKeyLength + crypto.publicKeyLength)\n  } catch (err) {\n    return callback(err)\n  }\n  const privateKeyBytes = bytes.slice(0, crypto.privateKeyLength)\n  const publicKeyBytes = bytes.slice(crypto.privateKeyLength, bytes.length)\n  callback(null, new Ed25519PrivateKey(privateKeyBytes, publicKeyBytes))\n}\n\nfunction unmarshalEd25519PublicKey (bytes) {\n  bytes = ensureKey(bytes, crypto.publicKeyLength)\n  return new Ed25519PublicKey(bytes)\n}\n\nfunction generateKeyPair (_bits, cb) {\n  if (cb === undefined && typeof _bits === 'function') {\n    cb = _bits\n  }\n\n  crypto.generateKey((err, keys) => {\n    if (err) {\n      return cb(err)\n    }\n    let privkey\n    try {\n      privkey = new Ed25519PrivateKey(keys.secretKey, keys.publicKey)\n    } catch (err) {\n      cb(err)\n      return\n    }\n\n    cb(null, privkey)\n  })\n}\n\nfunction generateKeyPairFromSeed (seed, _bits, cb) {\n  if (cb === undefined && typeof _bits === 'function') {\n    cb = _bits\n  }\n\n  crypto.generateKeyFromSeed(seed, (err, keys) => {\n    if (err) {\n      return cb(err)\n    }\n    let privkey\n    try {\n      privkey = new Ed25519PrivateKey(keys.secretKey, keys.publicKey)\n    } catch (err) {\n      cb(err)\n      return\n    }\n\n    cb(null, privkey)\n  })\n}\n\nfunction ensure (cb) {\n  if (typeof cb !== 'function') {\n    throw new Error('callback is required')\n  }\n}\n\nfunction ensureKey (key, length) {\n  if (Buffer.isBuffer(key)) {\n    key = new Uint8Array(key)\n  }\n  if (!(key instanceof Uint8Array) || key.length !== length) {\n    throw new Error('Key must be a Uint8Array or Buffer of length ' + length)\n  }\n  return key\n}\n\nmodule.exports = {\n  Ed25519PublicKey,\n  Ed25519PrivateKey,\n  unmarshalEd25519PrivateKey,\n  unmarshalEd25519PublicKey,\n  generateKeyPair,\n  generateKeyPairFromSeed\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}