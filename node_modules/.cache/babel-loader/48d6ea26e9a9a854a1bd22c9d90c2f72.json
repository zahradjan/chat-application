{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/zajan/GitHub/chatApplication/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar Counter = require('crdts/src/G-Counter');\n\nvar CounterIndex = /*#__PURE__*/function () {\n  function CounterIndex(id) {\n    _classCallCheck(this, CounterIndex);\n\n    this._index = new Counter(id);\n  }\n\n  _createClass(CounterIndex, [{\n    key: \"get\",\n    value: function get() {\n      return this._index;\n    }\n  }, {\n    key: \"updateIndex\",\n    value: function updateIndex(oplog) {\n      var _this = this;\n\n      if (this._index) {\n        var getCounter = function getCounter(e) {\n          return e.payload.value.counters;\n        };\n\n        var mergeToIndex = function mergeToIndex(_counters) {\n          return _this._index.merge({\n            _counters: _counters\n          });\n        };\n\n        oplog.values.filter(function (e) {\n          return e && e.payload.op === 'COUNTER';\n        }).map(getCounter).forEach(mergeToIndex);\n      }\n    }\n  }]);\n\n  return CounterIndex;\n}();\n\nmodule.exports = CounterIndex;","map":{"version":3,"names":["Counter","require","CounterIndex","id","_index","oplog","getCounter","e","payload","value","counters","mergeToIndex","_counters","merge","values","filter","op","map","forEach","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/orbit-db-counterstore/src/CounterIndex.js"],"sourcesContent":["'use strict'\n\nconst Counter = require('crdts/src/G-Counter')\n\nclass CounterIndex {\n  constructor (id) {\n    this._index = new Counter(id)\n  }\n\n  get () {\n    return this._index\n  }\n\n  updateIndex (oplog) {\n    if (this._index) {\n      const getCounter = e => e.payload.value.counters\n      const mergeToIndex = _counters => this._index.merge({ _counters })\n      oplog.values.filter(e => e && e.payload.op === 'COUNTER')\n        .map(getCounter)\n        .forEach(mergeToIndex)\n    }\n  }\n}\n\nmodule.exports = CounterIndex\n"],"mappings":"AAAA;;;;;;AAEA,IAAMA,OAAO,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;IAEMC,Y;EACJ,sBAAaC,EAAb,EAAiB;IAAA;;IACf,KAAKC,MAAL,GAAc,IAAIJ,OAAJ,CAAYG,EAAZ,CAAd;EACD;;;;WAED,eAAO;MACL,OAAO,KAAKC,MAAZ;IACD;;;WAED,qBAAaC,KAAb,EAAoB;MAAA;;MAClB,IAAI,KAAKD,MAAT,EAAiB;QACf,IAAME,UAAU,GAAG,SAAbA,UAAa,CAAAC,CAAC;UAAA,OAAIA,CAAC,CAACC,OAAF,CAAUC,KAAV,CAAgBC,QAApB;QAAA,CAApB;;QACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,SAAS;UAAA,OAAI,KAAI,CAACR,MAAL,CAAYS,KAAZ,CAAkB;YAAED,SAAS,EAATA;UAAF,CAAlB,CAAJ;QAAA,CAA9B;;QACAP,KAAK,CAACS,MAAN,CAAaC,MAAb,CAAoB,UAAAR,CAAC;UAAA,OAAIA,CAAC,IAAIA,CAAC,CAACC,OAAF,CAAUQ,EAAV,KAAiB,SAA1B;QAAA,CAArB,EACGC,GADH,CACOX,UADP,EAEGY,OAFH,CAEWP,YAFX;MAGD;IACF;;;;;;AAGHQ,MAAM,CAACC,OAAP,GAAiBlB,YAAjB"},"metadata":{},"sourceType":"script"}