{"ast":null,"code":"'use strict';\n\nclass CancelError extends Error {\n  constructor(reason) {\n    super(reason || 'Promise was canceled');\n    this.name = 'CancelError';\n  }\n\n  get isCanceled() {\n    return true;\n  }\n\n}\n\nclass PCancelable {\n  static fn(userFn) {\n    return function () {\n      for (var _len = arguments.length, arguments_ = new Array(_len), _key = 0; _key < _len; _key++) {\n        arguments_[_key] = arguments[_key];\n      }\n\n      return new PCancelable((resolve, reject, onCancel) => {\n        arguments_.push(onCancel); // eslint-disable-next-line promise/prefer-await-to-then\n\n        userFn(...arguments_).then(resolve, reject);\n      });\n    };\n  }\n\n  constructor(executor) {\n    this._cancelHandlers = [];\n    this._isPending = true;\n    this._isCanceled = false;\n    this._rejectOnCancel = true;\n    this._promise = new Promise((resolve, reject) => {\n      this._reject = reject;\n\n      const onResolve = value => {\n        if (!this._isCanceled || !onCancel.shouldReject) {\n          this._isPending = false;\n          resolve(value);\n        }\n      };\n\n      const onReject = error => {\n        this._isPending = false;\n        reject(error);\n      };\n\n      const onCancel = handler => {\n        if (!this._isPending) {\n          throw new Error('The `onCancel` handler was attached after the promise settled.');\n        }\n\n        this._cancelHandlers.push(handler);\n      };\n\n      Object.defineProperties(onCancel, {\n        shouldReject: {\n          get: () => this._rejectOnCancel,\n          set: boolean => {\n            this._rejectOnCancel = boolean;\n          }\n        }\n      });\n      return executor(onResolve, onReject, onCancel);\n    });\n  }\n\n  then(onFulfilled, onRejected) {\n    // eslint-disable-next-line promise/prefer-await-to-then\n    return this._promise.then(onFulfilled, onRejected);\n  }\n\n  catch(onRejected) {\n    return this._promise.catch(onRejected);\n  }\n\n  finally(onFinally) {\n    return this._promise.finally(onFinally);\n  }\n\n  cancel(reason) {\n    if (!this._isPending || this._isCanceled) {\n      return;\n    }\n\n    this._isCanceled = true;\n\n    if (this._cancelHandlers.length > 0) {\n      try {\n        for (const handler of this._cancelHandlers) {\n          handler();\n        }\n      } catch (error) {\n        this._reject(error);\n\n        return;\n      }\n    }\n\n    if (this._rejectOnCancel) {\n      this._reject(new CancelError(reason));\n    }\n  }\n\n  get isCanceled() {\n    return this._isCanceled;\n  }\n\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;","map":{"version":3,"names":["CancelError","Error","constructor","reason","name","isCanceled","PCancelable","fn","userFn","arguments_","resolve","reject","onCancel","push","then","executor","_cancelHandlers","_isPending","_isCanceled","_rejectOnCancel","_promise","Promise","_reject","onResolve","value","shouldReject","onReject","error","handler","Object","defineProperties","get","set","boolean","onFulfilled","onRejected","catch","finally","onFinally","cancel","length","setPrototypeOf","prototype","module","exports"],"sources":["C:/Users/zajan/GitHub/chatApplication/node_modules/p-cancelable/index.js"],"sourcesContent":["'use strict';\n\nclass CancelError extends Error {\n\tconstructor(reason) {\n\t\tsuper(reason || 'Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n\n\tget isCanceled() {\n\t\treturn true;\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(userFn) {\n\t\treturn (...arguments_) => {\n\t\t\treturn new PCancelable((resolve, reject, onCancel) => {\n\t\t\t\targuments_.push(onCancel);\n\t\t\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t\t\tuserFn(...arguments_).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._cancelHandlers = [];\n\t\tthis._isPending = true;\n\t\tthis._isCanceled = false;\n\t\tthis._rejectOnCancel = true;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\tconst onResolve = value => {\n\t\t\t\tif (!this._isCanceled || !onCancel.shouldReject) {\n\t\t\t\t\tthis._isPending = false;\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onReject = error => {\n\t\t\t\tthis._isPending = false;\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\tconst onCancel = handler => {\n\t\t\t\tif (!this._isPending) {\n\t\t\t\t\tthrow new Error('The `onCancel` handler was attached after the promise settled.');\n\t\t\t\t}\n\n\t\t\t\tthis._cancelHandlers.push(handler);\n\t\t\t};\n\n\t\t\tObject.defineProperties(onCancel, {\n\t\t\t\tshouldReject: {\n\t\t\t\t\tget: () => this._rejectOnCancel,\n\t\t\t\t\tset: boolean => {\n\t\t\t\t\t\tthis._rejectOnCancel = boolean;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn executor(onResolve, onReject, onCancel);\n\t\t});\n\t}\n\n\tthen(onFulfilled, onRejected) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.then(onFulfilled, onRejected);\n\t}\n\n\tcatch(onRejected) {\n\t\treturn this._promise.catch(onRejected);\n\t}\n\n\tfinally(onFinally) {\n\t\treturn this._promise.finally(onFinally);\n\t}\n\n\tcancel(reason) {\n\t\tif (!this._isPending || this._isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isCanceled = true;\n\n\t\tif (this._cancelHandlers.length > 0) {\n\t\t\ttry {\n\t\t\t\tfor (const handler of this._cancelHandlers) {\n\t\t\t\t\thandler();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis._reject(error);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._rejectOnCancel) {\n\t\t\tthis._reject(new CancelError(reason));\n\t\t}\n\t}\n\n\tget isCanceled() {\n\t\treturn this._isCanceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}