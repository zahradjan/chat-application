{"code":"(this[\"webpackJsonpdecentio-orbitdb\"]=this[\"webpackJsonpdecentio-orbitdb\"]||[]).push([[0],{1040:function(e,t){},1303:function(e,t){},1306:function(e,t){},1307:function(e,t){},1502:function(e,t){},1514:function(e,t){},1544:function(e,t){},1632:function(e,t){},1633:function(e,t,r){},1642:function(e,t,r){\"use strict\";r.r(t);var n=r(0),s=r.n(n),a=(r(631),r(632),r(36)),o=r(363),c=r(89),i=(r(1633),r(163)),u=r(627),b=\"#d2dce5\",p=\"#bf8464\",f=r(24);function l(){return Object(f.jsx)(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\"},children:Object(f.jsx)(u.a,{ariaLabel:\"loading-indicator\",color:p})})}r.p,r.p,r.p,r.p,r.p,r.p,r.p,r(1635);var h=r(46),d=r(5),j=r(13),O=r(75),v=r(23),x=(r(1638),r(628)),m=Object(i.a)((function(e){var t=e.room,r=Object(c.c)(),s=r.dataStore,a=r.roomStore;console.log(t),console.log(a.selectedReceiver);var o=Object(x.a)({accept:[\"*\"],readAs:\"ArrayBuffer\",multiple:!1}),i=Object(O.a)(o,2),u=i[0],l=i[1].filesContent;Object(n.useEffect)((function(){function e(){return(e=Object(j.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(l),!l.length){e.next=4;break}return e.next=4,t.uploadFile(l);case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]);var m=Object(v.p)(t.chatRoomMessages),w=s.peerId;return Object(f.jsxs)(h.b,{style:{backgroundColor:b},children:[Object(f.jsxs)(h.d,{style:{backgroundColor:p},children:[Object(f.jsx)(h.d.Back,{style:{backgroundColor:p}}),Object(f.jsx)(h.d.Content,{style:{backgroundColor:p},userName:a.selectedReceiver}),Object(f.jsxs)(h.d.Actions,{children:[Object(f.jsx)(h.m,{}),Object(f.jsx)(h.l,{}),Object(f.jsx)(h.f,{})]})]}),Object(f.jsx)(h.j,{loading:!m,children:m?m.map((function(e){return\"file\"===e.type&&console.log(e.data.file),\"message\"===e.type?Object(f.jsxs)(h.h,{model:{direction:e.from===w?\"outgoing\":\"incoming\",position:\"first\",message:e.data.msg},children:[Object(f.jsx)(h.a,{src:e.avatar},e._id),Object(f.jsx)(h.h.Footer,{sender:e.data.sender,sentTime:e.sentTime})]},e._id):Object(f.jsxs)(h.h,{model:{direction:e.from===w?\"outgoing\":\"incoming\",position:\"first\"},children:[Object(f.jsx)(h.h.CustomContent,{children:t.fileIsImage(e.data.msg.fileName)?Object(f.jsx)(\"img\",{src:URL.createObjectURL(new Blob(e.data.file)),alt:e.data.msg.fileName,width:400,height:550}):Object(f.jsx)(\"a\",{href:URL.createObjectURL(new Blob(e.data.file)),download:e.data.msg.fileName,children:e.data.msg.fileName})}),Object(f.jsx)(h.a,{src:e.avatar},e._id),Object(f.jsx)(h.h.Footer,{sender:e.data.sender,sentTime:e.sentTime})]},e._id)})):\"\"}),Object(f.jsx)(h.i,{placeholder:\"Type message here\",onSend:function(e){t.sendMessageToChatRoom(e)},onAttachClick:Object(j.a)(Object(d.a)().mark((function e(){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",u());case 1:case\"end\":return e.stop()}}),e)})))})]})})),w=r(70),k=r(167),g=Object(w.b)((function(){var e=Object(c.c)(),t=e.roomStore,r=e.monitorStore.peers;return Object(f.jsx)(h.e,{style:{backgroundColor:\"#bacee0\"},children:r.map((function(e){console.log(e);var r=e.user;return console.log(r),Object(f.jsx)(h.c,{name:r._username,onClick:function(){return function(e){console.log(\"select\"),t.setSelectedRoom(e)}(r)},children:Object(f.jsx)(h.a,{src:(new k.AvatarGenerator).generateRandomAvatar(r.peerId),status:\"available\"})},r.peerId)}))})})),y=r(606),S=function(){return Object(f.jsx)(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",backgroundColor:b},children:Object(f.jsxs)(\"div\",{children:[Object(f.jsx)(\"img\",{alt:\"logo\",width:350,height:250,src:y.a}),Object(f.jsx)(\"h3\",{children:\"You have no selected room\"})]})})},D=Object(i.a)((function(){var e=Object(c.c)(),t=e.sessionStore,r=e.roomStore,n=e.monitorStore,s=e.dataStore,a=t._user,o=r.selectedRoom;return Object(f.jsx)(\"div\",{style:{position:\"relative\",height:\"100vh\"},children:Object(f.jsxs)(h.g,{responsive:!0,children:[Object(f.jsxs)(h.k,{position:\"left\",scrollable:!1,style:{display:\"flex\",flexDirection:\"column\"},children:[Object(f.jsxs)(h.d,{style:{backgroundColor:p},children:[Object(f.jsx)(h.a,{src:(new k.AvatarGenerator).generateRandomAvatar(s.peerId),name:a,status:\"available\",size:\"fluid\"}),Object(f.jsx)(h.d.Content,{style:{backgroundColor:p},userName:a})]}),n.isMonitorReady()?Object(f.jsx)(g,{}):Object(f.jsx)(l,{})]}),o?Object(f.jsx)(m,{room:o}):Object(f.jsx)(S,{})]})})})),N=s.a.lazy((function(){return r.e(3).then(r.bind(null,1647))})),I=Object(i.a)((function(){var e=Object(c.c)(),t=e.sessionStore,r=e.userStore;return t.isAuthenticated()?r.isUserStoreReady()?Object(f.jsx)(D,{}):Object(f.jsx)(l,{}):Object(f.jsx)(s.a.Suspense,{fallback:Object(f.jsx)(l,{}),children:Object(f.jsx)(N,{})})}));function P(){return Object(f.jsx)(a.c,{children:Object(f.jsx)(a.a,{path:\"/\",element:Object(f.jsx)(I,{})})})}var R=function(){return Object(f.jsx)(\"div\",{className:\"App\",children:Object(f.jsx)(o.a,{children:Object(f.jsx)(c.a.Provider,{value:c.b,children:Object(f.jsx)(P,{})})})})},F=function(e){e&&e instanceof Function&&r.e(4).then(r.bind(null,1648)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),s(e),a(e),o(e)}))},C=r(244);r.n(C).a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById(\"root\")),F()},275:function(e,t){},342:function(e,t){},606:function(e,t,r){\"use strict\";t.a=r.p+\"static/media/decentioLogoLight.d9a5e096.png\"},609:function(e,t){},610:function(e,t){},631:function(e,t,r){},632:function(e,t,r){},647:function(e,t){},672:function(e,t){},686:function(e,t){},688:function(e,t){},734:function(e,t){},736:function(e,t){},792:function(e,t){},806:function(e,t){},859:function(e,t){},860:function(e,t){},89:function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return F})),r.d(t,\"a\",(function(){return C})),r.d(t,\"c\",(function(){return M}));var n=r(5),s=r(13),a=r(28),o=r(29),c=r(0),i=r.n(c),u=r(362),b=r.n(u),p=r(23),f=function(){function e(t){Object(a.a)(this,e),this.rootStore=t,this.monitor=void 0,this.peersDb=void 0,this.peers=[],this.topicName=\"DecentioGlobalNetwork\",this.texDecoder=new TextDecoder,Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.rootStore.dataStore.ipfsNode){e.next=2;break}throw Error(\"IPFS Node not defined!\");case 2:if(void 0!==this.rootStore.dataStore.orbitDb){e.next=4;break}throw Error(\"OrbitDb not defined!\");case 4:Object(p.o)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.subscribeToOwnPubsub();case 2:return e.next=4,t.subscribeToDecentioPubsub();case 4:return e.next=6,t.loadPeersDb();case 6:return e.next=8,t.setPeersFromDb();case 8:return t.monitor=new b.a(t.rootStore.dataStore.ipfsNode.pubsub,t.topicName),e.next=11,t.listenForJoinedPeers();case 11:return e.next=13,t.listenForLeftPeers();case 13:case\"end\":return e.stop()}}),e)}))));case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"isMonitorReady\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",this.monitor);case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setPeersFromDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.p)(this.peersDb.all);case 2:t=e.sent,Object(p.o)((function(){t.map((function(e){return r.peers.push(e.payload.value)}))}));case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"listenForJoinedPeers\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.monitor.on(\"join\",function(){var e=Object(s.a)(Object(n.a)().mark((function e(r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"Peer joined: \"+r),e.t0=console,e.t1=\"Peers on Pubsub \".concat(t.topicName,\": \"),e.next=5,t.monitor.getPeers();case 5:e.t2=e.sent,e.t3=e.t1+e.t2,e.t0.log.call(e.t0,e.t3),setTimeout(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.peerIsInDb(r)){e.next=4;break}e.next=6;break;case 4:return e.next=6,t.sendUserDbId(r);case 6:case\"end\":return e.stop()}}),e)}))),2e3);case 9:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"listenForLeftPeers\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.monitor.on(\"leave\",function(){var e=Object(s.a)(Object(n.a)().mark((function e(r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"Peer left: \"+r),e.t0=console,e.t1=\"Peers on Pubsub \".concat(t.topicName,\": \"),e.next=5,t.monitor.getPeers();case 5:e.t2=e.sent,e.t3=e.t1+e.t2,e.t0.log.call(e.t0,e.t3);case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"peerIsInDb\",value:function(e){console.log(e);var t=Object(p.p)(this.peers);return console.log(Object(p.p)(this.peers)),t.find((function(t){return t.user.peerId===e}))}},{key:\"savePeer\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.o)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(!r.peerIsInDb(t)),r.peerIsInDb(t)){e.next=5;break}return r.peers.push(t),e.next=5,r.peersDb.add(t);case 5:case\"end\":return e.stop()}}),e)}))));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"removePeer\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peersDb.iterator().collect().map((function(e){return e.payload.value===t?e:void 0}));case 2:if(r=e.sent,console.log(r),!r){e.next=7;break}return e.next=7,this.peersDb.remove(r[0].hash);case 7:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"sendUserDbId\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.peerIsInDb(t)),e.next=3,this.rootStore.userStore.getUserDbId();case 3:return r=e.sent,s=JSON.stringify({userDb:r}),console.log(s),e.next=8,this.rootStore.dataStore.ipfsNode.pubsub.publish(t,s);case 8:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"subscribeToOwnPubsub\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.rootStore.dataStore.peerId,console.log(\"Peer ID: \"+t),e.next=4,this.rootStore.dataStore.ipfsNode.pubsub.subscribe(t,function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var s,a,o;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.data),\"object\"===typeof t.data&&(t.data=r.texDecoder.decode(t.data)),s=JSON.parse(t.data),console.log(s),console.log(s.userDb),!s.userDb){e.next=15;break}return e.next=8,r.replicateUserDb(s);case 8:return e.next=10,r.rootStore.roomStore.createRoom(t.from);case 10:return a=e.sent,e.next=13,a.init();case 13:e.next=18;break;case 15:o=r.rootStore.roomStore.getRoom(t.from),console.log(o),o&&o.setMessage(t);case 18:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"subscribeToDecentioPubsub\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.dataStore.ipfsNode.pubsub.subscribe(\"DecentioGlobalNetwork\",(function(){}));case 2:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"replicateUserDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,a=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.dataStore.orbitDb.open(t.userDb);case 2:(r=e.sent).events.on(\"replicated\",Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"DB replicated\"),e.next=3,a.peersDb.add(r.all);case 3:console.log(r.all),a.peers.push(r.all),console.log(a.peersDb.all),console.log(a.peers);case 7:case\"end\":return e.stop()}}),e)}))));case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"loadPeersDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.dataStore.orbitDb.feed(\"peers\");case 2:return this.peersDb=e.sent,e.next=5,this.peersDb.load();case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"replicatePeersDB\",value:function(){var e=this;setTimeout(Object(s.a)(Object(n.a)().mark((function t(){var r,s;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.rootStore.dataStore.getPeerId();case 2:return r=t.sent,t.next=5,e.peersDb.id;case 5:return s=t.sent,console.log(r),t.next=9,e.peersDb.all.map((function(t){var n=t.payload.value;if(n!==r){console.log(\"jsem tu \"),console.log(n),console.log(s);var a=JSON.stringify({peerDb:s});e.rootStore.dataStore.ipfsNode.pubsub.publish(n,a)}}));case 9:case\"end\":return t.stop()}}),t)}))),2e3)}},{key:\"processMessage\",value:function(e){\"object\"===typeof e.data&&(e.data=this.texDecoder.decode(e.data))}},{key:\"getPeersDbId\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.peersDb.id;case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),l=r(607),h=r.n(l),d=r(608),j=r.n(d),O=function(){function e(t){Object(a.a)(this,e),this.rootStore=t,this.peers=[],Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.rootStore.sessionStore.isAuthenticated()){e.next=2;break}throw Error(\"User is not defined\");case 2:if(void 0===this.ipfsNode){e.next=4;break}return e.abrupt(\"return\");case 4:if(void 0===this.orbitDb){e.next=6;break}return e.abrupt(\"return\");case 6:return t={create:!0,sync:!0,localOnly:!1,accessController:{write:[\"*\"]}},r={relay:{enabled:!0,hop:{enabled:!0,active:!0}},repo:\"/orbitdb/decentio-orbitdb-chat-ipfs-\".concat(this.rootStore.sessionStore._user,\"}\"),EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:[\"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star\"]},Bootstrap:[]}},e.next=10,this.start(r,t);case 10:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"start\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t,r){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.ipfsNode),console.log(this.orbitDb),e.next=4,this.startIpfsNode(t);case 4:return e.next=6,this.startOrbitDb(r);case 6:return console.log(this.ipfsNode),console.log(this.orbitDb),e.next=10,this.getPeerId();case 10:this.peerId=e.sent;case 11:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"onPeerConnect\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(\"Peer connected:\"+t.remotePeer._idB58String);case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getPeerId\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.ipfsNode){e.next=2;break}throw Error(\"IPFS Node not defined\");case 2:return e.next=4,this.ipfsNode.id();case 4:return t=e.sent,e.abrupt(\"return\",t.id);case 6:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"connectToPeer\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s=arguments;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:\"/dnsaddr/bootstrap.libp2p.io/p2p/\",e.prev=1,e.next=4,this.ipfsNode.swarm.connect(r+t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),console.log(e.t0),e.next=11,this.ipfsNode.swarm.connect(r+t);case 11:case\"end\":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"startIpfsNode\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.create(t);case 2:this.ipfsNode=e.sent;case 3:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"startOrbitDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.createInstance(this.ipfsNode,t);case 2:this.orbitDb=e.sent;case 3:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getIpfsPeers\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipfsNode.swarm.peers();case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"handleStop\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.orbitDb.disconnect();case 2:return e.next=4,this.ipfsNode.stop();case 4:delete this.orbitDb,delete this.ipfsNode;case 6:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),v=r(66),x=r(1646),m=Object(o.a)((function e(t,r,n,s,o,c){Object(a.a)(this,e),this._id=Object(x.a)(),this.from=t,this.senderName=r,this.data=n,this.sentTime=s,this.avatar=o,this.type=c})),w=r(167),k=function(){function e(t,r){Object(a.a)(this,e),this.roomId=Object(x.a)(),this.rootStore=t,this.ipfsNode=t.dataStore.ipfsNode,this.pubsub=t.dataStore.ipfsNode.pubsub,this.orbitDb=t.dataStore.orbitDb,this.roomName=r,this.textDecoder=new TextDecoder,this.chatRoomMessages=[],this.lastMessage=\"\",Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectToChatRoom();case 2:return e.next=4,this.loadMsgDb();case 4:return e.next=6,this.setMessagesFromDb();case 6:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"loadMsgDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.orbitDb.feed(\"\".concat(this.roomName,\"-messages\"));case 2:return this.chatMessagesDb=e.sent,e.next=5,this.chatMessagesDb.load();case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setMessagesFromDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.p)(this.chatMessagesDb.all);case 2:t=e.sent,Object(p.o)((function(){t.map((function(e){return r.chatRoomMessages.push(e.payload.value)}))}));case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"connectToChatRoom\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.o)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.pubsub,e.t1=t.roomName,e.next=4,t.setMessage.bind(t);case 4:return e.t2=e.sent,e.next=7,e.t0.subscribe.call(e.t0,e.t1,e.t2);case 7:case\"end\":return e.stop()}}),e)}))));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:\"sendMessageToChatRoom\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,a,o,c=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(\"Msg in sending: \"+t),r=this.rootStore.sessionStore._user,a={sender:r,msg:t},o=JSON.stringify(a),Object(p.o)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.pubsub.publish(c.roomName,o);case 2:case\"end\":return e.stop()}}),e)}))));case 5:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"setMessage\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s,a,o,c,i;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.data),\"object\"===typeof t.data&&(t.data=this.textDecoder.decode(t.data)),r=JSON.parse(t.data),s=r.sender,console.log(r),a=\"message\",!t.data.includes(\"path\")){e.next=13;break}return e.next=9,this.retrieveFileFromIpfs(r.msg.path);case 9:o=e.sent,console.log(o),r.file=o,a=\"file\";case 13:return console.log(r),c=new Date(Date.now()),i=new m(t.from,s,r,\"\".concat(c.getHours(),\":\").concat(c.getMinutes()),(new w.AvatarGenerator).generateRandomAvatar(t.from),a),console.log(i),e.next=19,this.saveMessage(i);case 19:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"saveMessage\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(p.o)(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.chatRoomMessages.push(t),r.lastMessage=t,e.next=4,r.chatMessagesDb.add(t);case 4:case\"end\":return e.stop()}}),e)}))));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"uploadFile\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t[0]),console.log(t[0].name.split(\".\").pop()),e.next=4,this.ipfsNode.add(t[0]);case 4:r=e.sent,console.log(r),s={fileName:t[0].name,path:r.path},console.log(s),this.sendMessageToChatRoom(s);case 9:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getFileExtension\",value:function(e){return e.split(\".\").pop()}},{key:\"fileIsImage\",value:function(e){var t=e.match(/\\.(jpg|jpeg|png|gif)$/i);return console.log(t),null!==t}},{key:\"retrieveFileFromIpfs\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s,a,o,c,i,u,b,p;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ipfsNode.cat(t);case 2:r=e.sent,console.log(r),a=[],o=!1,c=!1,e.prev=7,u=Object(v.a)(r);case 9:return e.next=11,u.next();case 11:if(!(o=!(b=e.sent).done)){e.next=17;break}p=b.value,a.push(p);case 14:o=!1,e.next=9;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(7),c=!0,i=e.t0;case 23:if(e.prev=23,e.prev=24,!o||null==u.return){e.next=28;break}return e.next=28,u.return();case 28:if(e.prev=28,!c){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:return console.log(a),s=a,e.abrupt(\"return\",s);case 36:case\"end\":return e.stop()}}),e,this,[[7,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=function(){function e(t){Object(a.a)(this,e),this.rootStore=t,this.rooms=[],this.selectedRoom=void 0,this.selectedReceiver=void 0,Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.rootStore.dataStore.ipfsNode){e.next=2;break}throw Error(\"IPFS Node not defined!\");case 2:if(void 0!==this.rootStore.dataStore.orbitDb){e.next=4;break}throw Error(\"OrbitDb not defined!\");case 4:return e.next=6,this.loadRoomsDb();case 6:return e.next=8,this.setRoomsFromDb();case 8:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"createRoom\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.rootStore.dataStore.ipfsNode){e.next=2;break}throw Error(\"IPFS Node not defined!\");case 2:if(void 0!==this.rootStore.dataStore.orbitDb){e.next=4;break}throw Error(\"OrbitDb not defined!\");case 4:return console.log(t),r=new k(this.rootStore,t),this.rooms.push(r),e.next=9,this.roomsDb.add(t);case 9:return console.log(r),console.log(Object(p.p)(this.rooms)),e.abrupt(\"return\",r);case 12:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getRoom\",value:function(e){return this.rooms.find((function(t){return e===t.roomName}))}},{key:\"loadRoomsDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rootStore.dataStore.orbitDb.feed(\"rooms\");case 2:return this.roomsDb=e.sent,e.next=5,this.roomsDb.load();case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setRoomsFromDb\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,r=this;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.p)(this.roomsDb.all);case 2:t=e.sent,Object(p.o)((function(){t.map((function(e){var t=e.payload.value;console.log(e.payload.value);var n=new k(r.rootStore,t);return n.init(),r.rooms.push(n)}))}));case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setSelectedRoom\",value:function(e){var t,r=this;Object(p.o)(Object(s.a)(Object(n.a)().mark((function s(){return Object(n.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=r.getRoom(e.peerId)){n.next=7;break}return n.next=4,r.createRoom(e.peerId);case 4:return t=n.sent,n.next=7,t.init();case 7:r.selectedReceiver=e._username,r.selectedRoom=t;case 9:case\"end\":return n.stop()}}),s)}))))}},{key:\"isChatRoomReady\",value:function(e){return this.getRoom(e)}}]),e}(),y=r(250),S=r.n(y),D=\"orbit-chat-username\",N=function(){function e(t){Object(a.a)(this,e),this.rootStore=t,this._user=void 0,Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFromCache();case 2:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"_readUserFromCache\",value:function(){var e=S.a.get(D);return e||null}},{key:\"isAuthenticated\",value:function(){return!!this._user}},{key:\"_setUser\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error('\"username\" is not defined');case 2:this._cacheUser(t),this._user=t;case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"_cacheUser\",value:function(e){e?S.a.set(D,e):S.a.remove(D)}},{key:\"loadFromCache\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._readUserFromCache())){e.next=4;break}return e.next=4,this.login(t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"login\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"User login\"),e.next=3,this._setUser(t);case 3:return e.abrupt(\"return\",e.sent);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"logout\",value:function(){return console.log(\"User logout\"),this._setUser(null)}}]),e}(),I=Object(o.a)((function e(t,r){Object(a.a)(this,e),this._username=t,this.peerId=r})),P=function(){function e(t){Object(a.a)(this,e),this.rootStore=t,this.userDb=void 0,Object(p.l)(this)}return Object(o.a)(e,[{key:\"init\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setUserStore();case 2:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"isUserStoreReady\",value:function(){return this.userDb}},{key:\"setUserStore\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.rootStore.dataStore.orbitDb){e.next=2;break}throw Error(\"OrbitDb not defined!\");case 2:return t={accessController:{write:[this.rootStore.dataStore.orbitDb.identity.id]}},e.next=5,this.rootStore.dataStore.orbitDb.kvstore(\"user\",t);case 5:return this.userDb=e.sent,e.next=8,this.userDb.load();case 8:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"createUser\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r,s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.rootStore.dataStore.peerId,s=new I(t,r),e.next=4,this.userDb.set(\"user\",s);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"deleteProfileField\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var r;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDb.del(t);case 2:return r=e.sent,e.abrupt(\"return\",r);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getAllProfileFields\",value:function(){return this.userDb.all}},{key:\"getProfileField\",value:function(e){return this.userDb.get(e)}},{key:\"updateUserField\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(t,r){var s;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDb.set(t,r);case 2:return s=e.sent,e.abrupt(\"return\",s);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"getUserDbId\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDb.id;case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),R=function(){function e(){Object(a.a)(this,e),this.sessionStore=new N(this),this.dataStore=new O(this),this.userStore=new P(this),this.monitorStore=new f(this),this.roomStore=new g(this),this.initStores()}return Object(o.a)(e,[{key:\"initStores\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionStore.init();case 2:return e.next=4,this.initDbStores();case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"initDbStores\",value:function(){var e=Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sessionStore.isAuthenticated()){e.next=9;break}return e.next=3,this.dataStore.init();case 3:return e.next=5,this.userStore.init();case 5:return e.next=7,this.monitorStore.init();case 7:return e.next=9,this.roomStore.init();case 9:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),F=new R,C=i.a.createContext(F),M=function(){return i.a.useContext(C)}},927:function(e,t){},931:function(e,t){},964:function(e,t){}},[[1642,1,2]]]);","name":"static/js/main.ff7e7f21.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_router","react_router_dom","RootStore","mobxreact_esm","esm","ContentColorLight","PrimaryColor","jsx_runtime","Loader","Object","style","position","top","left","transform","children","ariaLabel","color","p","es","regeneratorRuntime","asyncToGenerator","slicedToArray","mobx_esm","use_file_picker_esm","ChatRoom","_ref","room","_useStores","dataStore","roomStore","console","log","selectedReceiver","_useFilePicker","accept","readAs","multiple","_useFilePicker2","openFileSelector","filesContent","_loadFile","mark","_callee","wrap","_context","prev","next","length","uploadFile","stop","apply","arguments","loadFile","data","chatRoomMessages","nodeId","peerId","backgroundColor","Back","Content","userName","Actions","loading","map","msg","type","file","model","direction","from","message","src","avatar","_id","Footer","sender","sentTime","CustomContent","fileIsImage","fileName","URL","createObjectURL","Blob","alt","width","height","href","download","placeholder","onSend","sendMessageToChatRoom","onAttachClick","_callee2","_context2","abrupt","mobx_react_lite_es","dist","ChatConversations","users","monitorStore","peers","item","user","name","_username","onClick","setSelectedRoom","selectChatRoom","generateRandomAvatar","status","decentioLogoLight","NoRoom_NoRoom","display","justifyContent","alignItems","HomePage","sessionStore","_me","_user","selectedRoom","responsive","scrollable","flexDirection","size","isMonitorReady","LoginPage","a","lazy","e","then","bind","MainPage","userStore","isAuthenticated","isUserStoreReady","Suspense","fallback","AppView","path","element","src_App","className","Provider","value","src_reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","react_dom","render","StrictMode","document","getElementById","d","store","StoresContext","RootStore_useStores","classCallCheck","createClass","ipfs_pubsub_peer_monitor","ipfs_pubsub_peer_monitor_default","MonitorStore_MonitorStore","MonitorStore","rootStore","monitor","undefined","peersDb","topicName","texDecoder","TextDecoder","key","_init","_this","ipfsNode","Error","orbitDb","subscribeToOwnPubsub","subscribeToDecentioPubsub","loadPeersDb","setPeersFromDb","pubsub","listenForJoinedPeers","listenForLeftPeers","_isMonitorReady","_callee3","_context3","_setPeersFromDb","_callee4","all","_this2","_context4","sent","payload","_listenForJoinedPeers","_callee7","_this3","_context7","on","_ref2","_callee6","peerJoined","_context6","t0","t1","concat","getPeers","t2","t3","call","setTimeout","_callee5","_context5","peerIsInDb","sendUserDbId","_x","_listenForLeftPeers","_callee9","_this4","_context9","_ref4","_callee8","peerLeft","_context8","_x2","peer","find","_savePeer","_callee11","_this5","_context11","_callee10","_context10","add","_x3","_removePeer","_callee12","entry","_context12","iterator","collect","remove","hash","_x4","_sendUserDbId","_callee13","userDbId","stringifyPayload","_context13","getUserDbId","JSON","stringify","userDb","publish","_x5","_subscribeToOwnPubsub","_callee15","peerInfoId","_this6","_context15","subscribe","_ref6","_callee14","parsedMsg","targetRoom","_context14","decode","parse","replicateUserDb","createRoom","init","getRoom","setMessage","_x6","_subscribeToDecentioPubsub","_callee16","_context16","_replicateUserDb","_callee18","peerDbOuter","_this7","_context18","open","events","_callee17","_context17","_x7","_loadPeersDb","_callee19","_context19","feed","load","_this8","_callee20","peersDbId","_context20","getPeerId","id","peerDb","_getPeersDbId","_callee21","_context21","OrbitDB","OrbitDB_default","src_default","DataStore_DataStore","DataStore","dbConfig","ipfsConfig","create","sync","localOnly","accessController","write","relay","enabled","hop","active","repo","EXPERIMENTAL","config","Addresses","Swarm","Bootstrap","start","_start","ipfsConf","orbitDbconf","startIpfsNode","startOrbitDb","_onPeerConnect","connection","remotePeer","_idB58String","_getPeerId","peerInfo","_connectToPeer","multiaddr","protocol","_args5","swarm","connect","_startIpfsNode","_startOrbitDb","createInstance","_getIpfsPeers","_handleStop","disconnect","asyncIterator","v4","Message_Message","Message","senderName","Room_ChatRoom","roomName","roomId","textDecoder","lastMessage","connectToChatRoom","loadMsgDb","setMessagesFromDb","_loadMsgDb","chatMessagesDb","_setMessagesFromDb","_connectToChatRoom","_sendMessageToChatRoom","stringifyMessage","_setMessage","date","includes","retrieveFileFromIpfs","Date","now","getHours","getMinutes","saveMessage","_saveMessage","_uploadFile","result","fileMessage","split","pop","match","_retrieveFileFromIpfs","ipfsFile","content","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_step","chunk","cat","done","return","finish","RoomStore_RoomStore","RoomStore","rooms","loadRoomsDb","setRoomsFromDb","_createRoom","chatRoom","roomsDb","_loadRoomsDb","_setRoomsFromDb","js_cookie","js_cookie_default","cookieKey","SessionStore_SessionStore","SessionStore","loadFromCache","username","get","_setUser2","_cacheUser","set","_loadFromCache","cached","_readUserFromCache","login","_login","_setUser","User_User","User","UserStore_UserStore","UserStore","setUserStore","_setUserStore","defaultOptions","identity","kvstore","_createUser","_deleteProfileField","cid","del","_updateUserField","_getUserDbId","RootStore_RootStore","initStores","_initStores","initDbStores","_initDbStores","createContext","useContext"],"sources":["static/js/main.ff7e7f21.chunk.js"],"mappings":"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"},"input":"(this[\"webpackJsonpdecentio-orbitdb\"] = this[\"webpackJsonpdecentio-orbitdb\"] || []).push([[0],{\n\n/***/ 1040:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1303:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1306:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1307:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1502:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1514:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1544:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1632:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 1633:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 1642:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(631);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(632);\n\n// EXTERNAL MODULE: ./node_modules/react-router/index.js\nvar react_router = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/index.js\nvar react_router_dom = __webpack_require__(363);\n\n// EXTERNAL MODULE: ./src/data/store/RootStore.js + 8 modules\nvar RootStore = __webpack_require__(89);\n\n// EXTERNAL MODULE: ./src/themes/default/main.scss\nvar main = __webpack_require__(1633);\n\n// EXTERNAL MODULE: ./node_modules/mobx-react/dist/mobxreact.esm.js\nvar mobxreact_esm = __webpack_require__(163);\n\n// EXTERNAL MODULE: ./node_modules/react-loader-spinner/dist/esm/index.js + 21 modules\nvar esm = __webpack_require__(627);\n\n// CONCATENATED MODULE: ./src/constants/constants.js\nvar ContentColorLight=\"#d2dce5\";var ContentColorDark=\"#9473b\";var PrimaryColor=\"#bf8464\";var SecondaryColor=\"#7c685f\";var TextLight=\"#483527\";var TextDark=\"#d2dce5\";\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(24);\n\n// CONCATENATED MODULE: ./src/components/Loader.js\nfunction Loader(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* Grid */],{ariaLabel:\"loading-indicator\",color:PrimaryColor})});}\n// CONCATENATED MODULE: ./src/images/kynes.jpg\n/* harmony default export */ var kynes = (__webpack_require__.p + \"static/media/kynes.a7e85946.jpg\");\n// CONCATENATED MODULE: ./src/images/baron_harkonnen.jpg\n/* harmony default export */ var baron_harkonnen = (__webpack_require__.p + \"static/media/baron_harkonnen.eb1ecd67.jpg\");\n// CONCATENATED MODULE: ./src/images/chani.jpg\n/* harmony default export */ var chani = (__webpack_require__.p + \"static/media/chani.ae9726ad.jpg\");\n// CONCATENATED MODULE: ./src/images/leto_atreides.jpg\n/* harmony default export */ var leto_atreides = (__webpack_require__.p + \"static/media/leto_atreides.401d00ab.jpg\");\n// CONCATENATED MODULE: ./src/images/lady_jessica.jpg\n/* harmony default export */ var lady_jessica = (__webpack_require__.p + \"static/media/lady_jessica.768db249.jpg\");\n// CONCATENATED MODULE: ./src/images/duncan_idaho.jpg\n/* harmony default export */ var duncan_idaho = (__webpack_require__.p + \"static/media/duncan_idaho.8c582ae9.jpg\");\n// CONCATENATED MODULE: ./src/images/paul_atreides.jpg\n/* harmony default export */ var paul_atreides = (__webpack_require__.p + \"static/media/paul_atreides.e2d96fd6.jpg\");\n// EXTERNAL MODULE: ./node_modules/@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\nvar styles_min = __webpack_require__(1635);\n\n// EXTERNAL MODULE: ./node_modules/@chatscope/chat-ui-kit-react/dist/es/index.js + 79 modules\nvar es = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\nvar regeneratorRuntime = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(75);\n\n// EXTERNAL MODULE: ./node_modules/mobx/dist/mobx.esm.js\nvar mobx_esm = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/react-file-icon/dist/react-file-icon.esm.js\nvar react_file_icon_esm = __webpack_require__(1638);\n\n// EXTERNAL MODULE: ./node_modules/use-file-picker/dist/use-file-picker.esm.js + 4 modules\nvar use_file_picker_esm = __webpack_require__(628);\n\n// CONCATENATED MODULE: ./src/pages/chat/ChatRoom.js\nvar ChatRoom=Object(mobxreact_esm[\"a\" /* observer */])(function(_ref){var room=_ref.room;var _useStores=Object(RootStore[\"c\" /* useStores */])(),dataStore=_useStores.dataStore,roomStore=_useStores.roomStore;// const room = toJS(roomStore.selectedRoom);\nconsole.log(room);console.log(roomStore.selectedReceiver);// useEffect(() => {\n//   async function initRoom() {\n//     await room.init();\n//   }\n//   initRoom();\n// }, [room]);\nvar _useFilePicker=Object(use_file_picker_esm[\"a\" /* useFilePicker */])({accept:[\"*\"],readAs:\"ArrayBuffer\",multiple:false}),_useFilePicker2=Object(slicedToArray[\"a\" /* default */])(_useFilePicker,2),openFileSelector=_useFilePicker2[0],filesContent=_useFilePicker2[1].filesContent;Object(react[\"useEffect\"])(function(){function loadFile(){return _loadFile.apply(this,arguments);}function _loadFile(){_loadFile=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(filesContent);if(!filesContent.length){_context.next=4;break;}_context.next=4;return room.uploadFile(filesContent);case 4:case\"end\":return _context.stop();}}},_callee);}));return _loadFile.apply(this,arguments);}loadFile();},[filesContent]);var data=Object(mobx_esm[\"p\" /* toJS */])(room.chatRoomMessages);var nodeId=dataStore.peerId;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"b\" /* ChatContainer */],{style:{backgroundColor:ContentColorLight},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"d\" /* ConversationHeader */],{style:{backgroundColor:PrimaryColor},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* ConversationHeader */].Back,{style:{backgroundColor:PrimaryColor}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* ConversationHeader */].Content,{style:{backgroundColor:PrimaryColor},userName:roomStore.selectedReceiver}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"d\" /* ConversationHeader */].Actions,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"m\" /* VoiceCallButton */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"l\" /* VideoCallButton */],{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"f\" /* InfoButton */],{})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"j\" /* MessageList */],{loading:!data,children:data?data.map(function(msg){if(msg.type===\"file\")console.log(msg.data.file);return msg.type===\"message\"?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"h\" /* Message */],{model:{direction:msg.from===nodeId?\"outgoing\":\"incoming\",position:\"first\",message:msg.data.msg},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Avatar */],{src:msg.avatar},msg._id),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"h\" /* Message */].Footer,{sender:msg.data.sender,sentTime:msg.sentTime})]},msg._id):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"h\" /* Message */],{model:{direction:msg.from===nodeId?\"outgoing\":\"incoming\",position:\"first\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"h\" /* Message */].CustomContent,{children:room.fileIsImage(msg.data.msg.fileName)?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:URL.createObjectURL(new Blob(msg.data.file)),alt:msg.data.msg.fileName,width:400,height:550}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:URL.createObjectURL(new Blob(msg.data.file)),download:msg.data.msg.fileName,children:msg.data.msg.fileName})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Avatar */],{src:msg.avatar},msg._id),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"h\" /* Message */].Footer,{sender:msg.data.sender,sentTime:msg.sentTime})]},msg._id);}):\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"i\" /* MessageInput */],{placeholder:\"Type message here\",onSend:function onSend(msg){room.sendMessageToChatRoom(msg);},onAttachClick:/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",openFileSelector());case 1:case\"end\":return _context2.stop();}}},_callee2);}))})]});});\n// EXTERNAL MODULE: ./node_modules/mobx-react-lite/es/index.js + 17 modules\nvar mobx_react_lite_es = __webpack_require__(70);\n\n// EXTERNAL MODULE: ./node_modules/random-avatar-generator/dist/index.js\nvar dist = __webpack_require__(167);\n\n// CONCATENATED MODULE: ./src/pages/chat/ChatConversations.js\nvar ChatConversations=Object(mobx_react_lite_es[\"b\" /* observer */])(function(){var _useStores=Object(RootStore[\"c\" /* useStores */])(),roomStore=_useStores.roomStore,monitorStore=_useStores.monitorStore;var users=monitorStore.peers;// console.log(users);\nfunction selectChatRoom(user){console.log(\"select\");roomStore.setSelectedRoom(user);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"e\" /* ConversationList */],{style:{backgroundColor:\"#bacee0\"},children:users.map(function(item){console.log(item);var user=item.user;console.log(user);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"c\" /* Conversation */],{name:user._username,onClick:function onClick(){return selectChatRoom(user);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Avatar */],{src:new dist[\"AvatarGenerator\"]().generateRandomAvatar(user.peerId),status:\"available\"})},user.peerId);})});});\n// EXTERNAL MODULE: ./src/icons/decentioLogoLight.png\nvar decentioLogoLight = __webpack_require__(606);\n\n// CONCATENATED MODULE: ./src/components/error/NoRoom.js\nvar NoRoom_NoRoom=function NoRoom(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{width:\"100%\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",backgroundColor:ContentColorLight},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"logo\",width:350,height:250,src:decentioLogoLight[\"a\" /* default */]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"You have no selected room\"})]})});};\n// CONCATENATED MODULE: ./src/pages/home/HomePage.js\nvar HomePage=Object(mobxreact_esm[\"a\" /* observer */])(function(){var _useStores=Object(RootStore[\"c\" /* useStores */])(),sessionStore=_useStores.sessionStore,roomStore=_useStores.roomStore,monitorStore=_useStores.monitorStore,dataStore=_useStores.dataStore;var _me=sessionStore._user;var room=roomStore.selectedRoom;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{position:\"relative\",height:\"100vh\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"g\" /* MainContainer */],{responsive:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"k\" /* Sidebar */],{position:\"left\",scrollable:false,style:{display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"d\" /* ConversationHeader */],{style:{backgroundColor:PrimaryColor},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* Avatar */],{src:new dist[\"AvatarGenerator\"]().generateRandomAvatar(dataStore.peerId),name:_me,status:\"available\",size:\"fluid\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* ConversationHeader */].Content,{style:{backgroundColor:PrimaryColor},userName:_me})]}),monitorStore.isMonitorReady()?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatConversations,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Loader,{})]}),room?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatRoom,{room:room}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NoRoom_NoRoom,{})]})});});\n// CONCATENATED MODULE: ./src/pages/main/MainPage.js\n// import LoginPage from \"../login/LoginPage.js\";\n// import { LoginPage } from \"../login/LoginPage.js\";\nvar LoginPage=/*#__PURE__*/react_default.a.lazy(function(){return __webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 1647));});var MainPage=Object(mobxreact_esm[\"a\" /* observer */])(function(){var _useStores=Object(RootStore[\"c\" /* useStores */])(),sessionStore=_useStores.sessionStore,userStore=_useStores.userStore;return sessionStore.isAuthenticated()?userStore.isUserStoreReady()?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HomePage,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Loader,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.Suspense,{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Loader,{}),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LoginPage,{})});});\n// CONCATENATED MODULE: ./src/App.js\nfunction AppView(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"c\" /* Routes */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MainPage,{})})});}function App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RootStore[\"a\" /* StoresContext */].Provider,{value:RootStore[\"b\" /* store */],children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AppView,{})})})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.js\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 4).then(__webpack_require__.bind(null, 1648)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(244);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// CONCATENATED MODULE: ./src/index.js\n// window.LOG = \"orbit*\";\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));// const root = document.getElementById(\"root\");\n// render(<App />, root);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ }),\n\n/***/ 275:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 342:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 606:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (__webpack_require__.p + \"static/media/decentioLogoLight.d9a5e096.png\");\n\n/***/ }),\n\n/***/ 609:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 610:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 631:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 632:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 647:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 672:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 686:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 688:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 734:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 736:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 792:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 806:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 859:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 860:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 89:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* binding */ store; });\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ StoresContext; });\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* binding */ RootStore_useStores; });\n\n// UNUSED EXPORTS: default\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\nvar regeneratorRuntime = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(28);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/ipfs-pubsub-peer-monitor/src/ipfs-pubsub-peer-monitor.js\nvar ipfs_pubsub_peer_monitor = __webpack_require__(362);\nvar ipfs_pubsub_peer_monitor_default = /*#__PURE__*/__webpack_require__.n(ipfs_pubsub_peer_monitor);\n\n// EXTERNAL MODULE: ./node_modules/mobx/dist/mobx.esm.js\nvar mobx_esm = __webpack_require__(23);\n\n// CONCATENATED MODULE: ./src/data/store/MonitorStore.js\nvar MonitorStore_MonitorStore=/*#__PURE__*/function(){function MonitorStore(rootStore){Object(classCallCheck[\"a\" /* default */])(this,MonitorStore);this.rootStore=rootStore;this.monitor=undefined;this.peersDb=undefined;this.peers=[];this.topicName=\"DecentioGlobalNetwork\";this.texDecoder=new TextDecoder();Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(MonitorStore,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(){var _this=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.rootStore.dataStore.ipfsNode===undefined)){_context2.next=2;break;}throw Error(\"IPFS Node not defined!\");case 2:if(!(this.rootStore.dataStore.orbitDb===undefined)){_context2.next=4;break;}throw Error(\"OrbitDb not defined!\");case 4:Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.subscribeToOwnPubsub();case 2:_context.next=4;return _this.subscribeToDecentioPubsub();case 4:_context.next=6;return _this.loadPeersDb();case 6:_context.next=8;return _this.setPeersFromDb();case 8:_this.monitor=new ipfs_pubsub_peer_monitor_default.a(_this.rootStore.dataStore.ipfsNode.pubsub,_this.topicName);_context.next=11;return _this.listenForJoinedPeers();case 11:_context.next=13;return _this.listenForLeftPeers();case 13:case\"end\":return _context.stop();}}},_callee);})));case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"isMonitorReady\",value:function(){var _isMonitorReady=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:return _context3.abrupt(\"return\",this.monitor);case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function isMonitorReady(){return _isMonitorReady.apply(this,arguments);}return isMonitorReady;}()},{key:\"setPeersFromDb\",value:function(){var _setPeersFromDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(){var _this2=this;var all;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Object(mobx_esm[\"p\" /* toJS */])(this.peersDb.all);case 2:all=_context4.sent;Object(mobx_esm[\"o\" /* runInAction */])(function(){all.map(function(e){// console.log(e.payload.value);\nreturn _this2.peers.push(e.payload.value);});});case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function setPeersFromDb(){return _setPeersFromDb.apply(this,arguments);}return setPeersFromDb;}()},{key:\"listenForJoinedPeers\",value:function(){var _listenForJoinedPeers=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee7(){var _this3=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:this.monitor.on(\"join\",/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee6(peerJoined){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:console.log(\"Peer joined: \"+peerJoined);_context6.t0=console;_context6.t1=\"Peers on Pubsub \".concat(_this3.topicName,\": \");_context6.next=5;return _this3.monitor.getPeers();case 5:_context6.t2=_context6.sent;_context6.t3=_context6.t1+_context6.t2;_context6.t0.log.call(_context6.t0,_context6.t3);setTimeout(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee5(){var peerInDb;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:peerInDb=_this3.peerIsInDb(peerJoined);if(!peerInDb){_context5.next=4;break;}_context5.next=6;break;case 4:_context5.next=6;return _this3.sendUserDbId(peerJoined);case 6:case\"end\":return _context5.stop();}}},_callee5);})),2000);case 9:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x){return _ref2.apply(this,arguments);};}());case 1:case\"end\":return _context7.stop();}}},_callee7,this);}));function listenForJoinedPeers(){return _listenForJoinedPeers.apply(this,arguments);}return listenForJoinedPeers;}()},{key:\"listenForLeftPeers\",value:function(){var _listenForLeftPeers=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee9(){var _this4=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:this.monitor.on(\"leave\",/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee8(peerLeft){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(\"Peer left: \"+peerLeft);_context8.t0=console;_context8.t1=\"Peers on Pubsub \".concat(_this4.topicName,\": \");_context8.next=5;return _this4.monitor.getPeers();case 5:_context8.t2=_context8.sent;_context8.t3=_context8.t1+_context8.t2;_context8.t0.log.call(_context8.t0,_context8.t3);case 8:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x2){return _ref4.apply(this,arguments);};}());case 1:case\"end\":return _context9.stop();}}},_callee9,this);}));function listenForLeftPeers(){return _listenForLeftPeers.apply(this,arguments);}return listenForLeftPeers;}()},{key:\"peerIsInDb\",value:function peerIsInDb(peer){console.log(peer);var peers=Object(mobx_esm[\"p\" /* toJS */])(this.peers);console.log(Object(mobx_esm[\"p\" /* toJS */])(this.peers));return peers.find(function(item){return item.user.peerId===peer;});}},{key:\"savePeer\",value:function(){var _savePeer=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee11(peer){var _this5=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee10(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:console.log(!_this5.peerIsInDb(peer));if(_this5.peerIsInDb(peer)){_context10.next=5;break;}_this5.peers.push(peer);_context10.next=5;return _this5.peersDb.add(peer);case 5:case\"end\":return _context10.stop();}}},_callee10);})));case 1:case\"end\":return _context11.stop();}}},_callee11);}));function savePeer(_x3){return _savePeer.apply(this,arguments);}return savePeer;}()},{key:\"removePeer\",value:function(){var _removePeer=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee12(peer){var entry;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.peersDb.iterator().collect().map(function(item){return item.payload.value===peer?item:undefined;});case 2:entry=_context12.sent;console.log(entry);if(!entry){_context12.next=7;break;}_context12.next=7;return this.peersDb.remove(entry[0].hash);case 7:case\"end\":return _context12.stop();}}},_callee12,this);}));function removePeer(_x4){return _removePeer.apply(this,arguments);}return removePeer;}()},{key:\"sendUserDbId\",value:function(){var _sendUserDbId=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee13(peer){var userDbId,stringifyPayload;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:console.log(this.peerIsInDb(peer));_context13.next=3;return this.rootStore.userStore.getUserDbId();case 3:userDbId=_context13.sent;stringifyPayload=JSON.stringify({userDb:userDbId});console.log(stringifyPayload);_context13.next=8;return this.rootStore.dataStore.ipfsNode.pubsub.publish(peer,stringifyPayload);case 8:case\"end\":return _context13.stop();}}},_callee13,this);}));function sendUserDbId(_x5){return _sendUserDbId.apply(this,arguments);}return sendUserDbId;}()},{key:\"subscribeToOwnPubsub\",value:function(){var _subscribeToOwnPubsub=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee15(){var _this6=this;var peerInfoId;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:peerInfoId=this.rootStore.dataStore.peerId;console.log(\"Peer ID: \"+peerInfoId);_context15.next=4;return this.rootStore.dataStore.ipfsNode.pubsub.subscribe(peerInfoId,/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee14(msg){var parsedMsg,room,targetRoom;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:console.log(msg.data);// this.processMessage(msg);\nif(typeof msg.data===\"object\")msg.data=_this6.texDecoder.decode(msg.data);parsedMsg=JSON.parse(msg.data);console.log(parsedMsg);console.log(parsedMsg.userDb);//TODO: tahle podminka vubec nefunguje\nif(!parsedMsg.userDb){_context14.next=15;break;}_context14.next=8;return _this6.replicateUserDb(parsedMsg);case 8:_context14.next=10;return _this6.rootStore.roomStore.createRoom(msg.from);case 10:room=_context14.sent;_context14.next=13;return room.init();case 13:_context14.next=18;break;case 15:targetRoom=_this6.rootStore.roomStore.getRoom(msg.from);console.log(targetRoom);if(targetRoom){targetRoom.setMessage(msg);}case 18:case\"end\":return _context14.stop();}}},_callee14);}));return function(_x6){return _ref6.apply(this,arguments);};}());case 4:case\"end\":return _context15.stop();}}},_callee15,this);}));function subscribeToOwnPubsub(){return _subscribeToOwnPubsub.apply(this,arguments);}return subscribeToOwnPubsub;}()},{key:\"subscribeToDecentioPubsub\",value:function(){var _subscribeToDecentioPubsub=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee16(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return this.rootStore.dataStore.ipfsNode.pubsub.subscribe(\"DecentioGlobalNetwork\",function(){});case 2:case\"end\":return _context16.stop();}}},_callee16,this);}));function subscribeToDecentioPubsub(){return _subscribeToDecentioPubsub.apply(this,arguments);}return subscribeToDecentioPubsub;}()},{key:\"replicateUserDb\",value:function(){var _replicateUserDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee18(parsedMsg){var _this7=this;var peerDbOuter;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return this.rootStore.dataStore.orbitDb.open(parsedMsg.userDb);case 2:peerDbOuter=_context18.sent;peerDbOuter.events.on(\"replicated\",/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee17(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:console.log(\"DB replicated\");_context17.next=3;return _this7.peersDb.add(peerDbOuter.all);case 3:console.log(peerDbOuter.all);_this7.peers.push(peerDbOuter.all);console.log(_this7.peersDb.all);console.log(_this7.peers);case 7:case\"end\":return _context17.stop();}}},_callee17);})));case 4:case\"end\":return _context18.stop();}}},_callee18,this);}));function replicateUserDb(_x7){return _replicateUserDb.apply(this,arguments);}return replicateUserDb;}()},{key:\"loadPeersDb\",value:function(){var _loadPeersDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee19(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_context19.next=2;return this.rootStore.dataStore.orbitDb.feed(\"peers\");case 2:this.peersDb=_context19.sent;_context19.next=5;return this.peersDb.load();case 5:case\"end\":return _context19.stop();}}},_callee19,this);}));function loadPeersDb(){return _loadPeersDb.apply(this,arguments);}return loadPeersDb;}()},{key:\"replicatePeersDB\",value:function replicatePeersDB(){var _this8=this;setTimeout(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee20(){var nodeId,peersDbId;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:_context20.next=2;return _this8.rootStore.dataStore.getPeerId();case 2:nodeId=_context20.sent;_context20.next=5;return _this8.peersDb.id;case 5:peersDbId=_context20.sent;console.log(nodeId);_context20.next=9;return _this8.peersDb.all.map(function(peer){var peerId=peer.payload.value;if(peerId!==nodeId){console.log(\"jsem tu \");console.log(peerId);console.log(peersDbId);var stringifyPayload=JSON.stringify({peerDb:peersDbId});_this8.rootStore.dataStore.ipfsNode.pubsub.publish(peerId,stringifyPayload);}});case 9:case\"end\":return _context20.stop();}}},_callee20);})),2000);}},{key:\"processMessage\",value:function processMessage(msg){if(typeof msg.data===\"object\")msg.data=this.texDecoder.decode(msg.data);}},{key:\"getPeersDbId\",value:function(){var _getPeersDbId=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee21(){var id;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee21$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:_context21.next=2;return this.peersDb.id;case 2:id=_context21.sent;return _context21.abrupt(\"return\",id);case 4:case\"end\":return _context21.stop();}}},_callee21,this);}));function getPeersDbId(){return _getPeersDbId.apply(this,arguments);}return getPeersDbId;}()}]);return MonitorStore;}();\n// EXTERNAL MODULE: ./node_modules/orbit-db/src/OrbitDB.js\nvar OrbitDB = __webpack_require__(607);\nvar OrbitDB_default = /*#__PURE__*/__webpack_require__.n(OrbitDB);\n\n// EXTERNAL MODULE: ./node_modules/ipfs/src/index.js\nvar src = __webpack_require__(608);\nvar src_default = /*#__PURE__*/__webpack_require__.n(src);\n\n// CONCATENATED MODULE: ./src/data/store/DataStore.js\nvar DataStore_DataStore=/*#__PURE__*/function(){function DataStore(rootStore){Object(classCallCheck[\"a\" /* default */])(this,DataStore);this.rootStore=rootStore;this.peers=[];Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(DataStore,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){var dbConfig,ipfsConfig;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(this.rootStore.sessionStore.isAuthenticated()){_context.next=2;break;}throw Error(\"User is not defined\");case 2:if(!(this.ipfsNode!==undefined)){_context.next=4;break;}return _context.abrupt(\"return\");case 4:if(!(this.orbitDb!==undefined)){_context.next=6;break;}return _context.abrupt(\"return\");case 6:dbConfig={// If database doesn't exist, create it\ncreate:true,// Don't wait to load from the network\nsync:true,// directory: `/orbitdb/decentio-orbitdb-chat-${Math.random()}}`,\n// Load only the local version of the database\nlocalOnly:false,// Allow anyone to write to the database,\n// otherwise only the creator of the database can write\naccessController:{write:[\"*\"]}};ipfsConfig={// preload: { enabled: false },\nrelay:{enabled:true,hop:{enabled:true,active:true}},// libp2p: {\n//   config: {\n//     dht: {\n//       enabled: true,\n//     },\n//     modules: {\n//       transport: [\"WebRTCStar\", \"WebSockets\"],\n//     },\n//     // transport: {\n//     //   WebRTCStar: {\n//     //     wrtc,\n//     //   },\n//     // },\n//   },\n// },\n// peerDiscovery: {\n//   autoDial: true, // Auto connect to discovered peers (limited by ConnectionManager minPeers)\n//   mdns: {\n//     // mdns options\n//     interval: 1000, // ms\n//     enabled: true,\n//   },\n//   webRTCStar: {\n//     // webrtc-star options\n//     interval: 1000, // ms\n//     enabled: false,\n//   },\n//   // .. other discovery module options.\n// },\n// Prevents large data transfers\n//TODO: nejak oddelit at to neni random ale treba username nebo neco\nrepo:\"/orbitdb/decentio-orbitdb-chat-ipfs-\".concat(this.rootStore.sessionStore._user,\"}\"),EXPERIMENTAL:{pubsub:true},config:{Addresses:{Swarm:[//       // Use IPFS dev signal server\n//       // Websocket:\n// \"/dns4/ws-star-signal-1.servep2p.com/tcp/443/wss/p2p-websocket-star\",\n// \"/dns4/ws-star-signal-2.servep2p.com/tcp/443/wss/p2p-websocket-star\",\n// \"/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star\",\n// WebRTC:\n// \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\n\"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star\"// // \"/ip4/0.0.0.0/tcp/4002\",\n// \"/ip4/127.0.0.1/tcp/4003/ws\",\n// \"/libp2p-webrtc-star/dns4/star-signal.cloud.ipfs.team/wss\",\n// \"/dns4/star-signal.cloud.ipfs.team/wss/p2p-webrtc-star\",\n//       // Use local signal server\n// \"/ip4/0.0.0.0/tcp/4011/ws\",\n// \"/ip6/::/tcp/4011/ws\",\n]},Bootstrap:[// \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\n// \"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\n// \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\n// \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\n]}};_context.next=10;return this.start(ipfsConfig,dbConfig);case 10:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"start\",value:function(){var _start=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(ipfsConf,orbitDbconf){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(this.ipfsNode);console.log(this.orbitDb);_context2.next=4;return this.startIpfsNode(ipfsConf);case 4:_context2.next=6;return this.startOrbitDb(orbitDbconf);case 6:console.log(this.ipfsNode);console.log(this.orbitDb);_context2.next=10;return this.getPeerId();case 10:this.peerId=_context2.sent;case 11:case\"end\":return _context2.stop();}}},_callee2,this);}));function start(_x,_x2){return _start.apply(this,arguments);}return start;}()},{key:\"onPeerConnect\",value:function(){var _onPeerConnect=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(connection){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"Peer connected:\"+connection.remotePeer._idB58String);case 1:case\"end\":return _context3.stop();}}},_callee3);}));function onPeerConnect(_x3){return _onPeerConnect.apply(this,arguments);}return onPeerConnect;}()},{key:\"getPeerId\",value:function(){var _getPeerId=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(){var peerInfo;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(this.ipfsNode===undefined)){_context4.next=2;break;}throw Error(\"IPFS Node not defined\");case 2:_context4.next=4;return this.ipfsNode.id();case 4:peerInfo=_context4.sent;return _context4.abrupt(\"return\",peerInfo.id);case 6:case\"end\":return _context4.stop();}}},_callee4,this);}));function getPeerId(){return _getPeerId.apply(this,arguments);}return getPeerId;}()},{key:\"connectToPeer\",value:function(){var _connectToPeer=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee5(multiaddr){var protocol,_args5=arguments;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:protocol=_args5.length>1&&_args5[1]!==undefined?_args5[1]:\"/dnsaddr/bootstrap.libp2p.io/p2p/\";_context5.prev=1;_context5.next=4;return this.ipfsNode.swarm.connect(protocol+multiaddr);case 4:_context5.next=11;break;case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](1);console.log(_context5.t0);_context5.next=11;return this.ipfsNode.swarm.connect(protocol+multiaddr);case 11:case\"end\":return _context5.stop();}}},_callee5,this,[[1,6]]);}));function connectToPeer(_x4){return _connectToPeer.apply(this,arguments);}return connectToPeer;}()},{key:\"startIpfsNode\",value:function(){var _startIpfsNode=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee6(ipfsConf){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return src_default.a.create(ipfsConf);case 2:this.ipfsNode=_context6.sent;case 3:case\"end\":return _context6.stop();}}},_callee6,this);}));function startIpfsNode(_x5){return _startIpfsNode.apply(this,arguments);}return startIpfsNode;}()},{key:\"startOrbitDb\",value:function(){var _startOrbitDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee7(orbitDbconf){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return OrbitDB_default.a.createInstance(this.ipfsNode,orbitDbconf);case 2:this.orbitDb=_context7.sent;case 3:case\"end\":return _context7.stop();}}},_callee7,this);}));function startOrbitDb(_x6){return _startOrbitDb.apply(this,arguments);}return startOrbitDb;}()},{key:\"getIpfsPeers\",value:function(){var _getIpfsPeers=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee8(){var peers;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.ipfsNode.swarm.peers();case 2:peers=_context8.sent;return _context8.abrupt(\"return\",peers);case 4:case\"end\":return _context8.stop();}}},_callee8,this);}));function getIpfsPeers(){return _getIpfsPeers.apply(this,arguments);}return getIpfsPeers;}()},{key:\"handleStop\",value:function(){var _handleStop=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee9(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.orbitDb.disconnect();case 2:_context9.next=4;return this.ipfsNode.stop();case 4:delete this.orbitDb;delete this.ipfsNode;case 6:case\"end\":return _context9.stop();}}},_callee9,this);}));function handleStop(){return _handleStop.apply(this,arguments);}return handleStop;}()}]);return DataStore;}();\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncIterator.js\nvar asyncIterator = __webpack_require__(66);\n\n// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules\nvar v4 = __webpack_require__(1646);\n\n// CONCATENATED MODULE: ./src/data/models/Message.js\nvar Message_Message=/*#__PURE__*/Object(createClass[\"a\" /* default */])(function Message(from,senderName,data,sentTime,avatar,type){Object(classCallCheck[\"a\" /* default */])(this,Message);this._id=Object(v4[\"a\" /* default */])();this.from=from;this.senderName=senderName;this.data=data;this.sentTime=sentTime;this.avatar=avatar;this.type=type;});\n// EXTERNAL MODULE: ./node_modules/random-avatar-generator/dist/index.js\nvar dist = __webpack_require__(167);\n\n// CONCATENATED MODULE: ./src/data/models/Room.js\nvar Room_ChatRoom=/*#__PURE__*/function(){function ChatRoom(rootStore,roomName){Object(classCallCheck[\"a\" /* default */])(this,ChatRoom);this.roomId=Object(v4[\"a\" /* default */])();this.rootStore=rootStore;this.ipfsNode=rootStore.dataStore.ipfsNode;this.pubsub=rootStore.dataStore.ipfsNode.pubsub;this.orbitDb=rootStore.dataStore.orbitDb;this.roomName=roomName;this.textDecoder=new TextDecoder();this.chatRoomMessages=[];this.lastMessage=\"\";Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(ChatRoom,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.connectToChatRoom();case 2:_context.next=4;return this.loadMsgDb();case 4:_context.next=6;return this.setMessagesFromDb();case 6:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"loadMsgDb\",value:function(){var _loadMsgDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.orbitDb.feed(\"\".concat(this.roomName,\"-messages\"));case 2:this.chatMessagesDb=_context2.sent;_context2.next=5;return this.chatMessagesDb.load();case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function loadMsgDb(){return _loadMsgDb.apply(this,arguments);}return loadMsgDb;}()},{key:\"setMessagesFromDb\",value:function(){var _setMessagesFromDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(){var _this=this;var all;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Object(mobx_esm[\"p\" /* toJS */])(this.chatMessagesDb.all);case 2:all=_context3.sent;// console.log(toJS(this.chatRoomMessages));\nObject(mobx_esm[\"o\" /* runInAction */])(function(){all.map(function(e){// console.log(e.payload.value);\nreturn _this.chatRoomMessages.push(e.payload.value);});});case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function setMessagesFromDb(){return _setMessagesFromDb.apply(this,arguments);}return setMessagesFromDb;}()},{key:\"connectToChatRoom\",value:function(){var _connectToChatRoom=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee5(){var _this2=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=_this2.pubsub;_context4.t1=_this2.roomName;_context4.next=4;return _this2.setMessage.bind(_this2);case 4:_context4.t2=_context4.sent;_context4.next=7;return _context4.t0.subscribe.call(_context4.t0,_context4.t1,_context4.t2);case 7:case\"end\":return _context4.stop();}}},_callee4);})));case 1:case\"end\":return _context5.stop();}}},_callee5);}));function connectToChatRoom(){return _connectToChatRoom.apply(this,arguments);}return connectToChatRoom;}()},{key:\"sendMessageToChatRoom\",value:function(){var _sendMessageToChatRoom=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee7(msg){var _this3=this;var sender,message,stringifyMessage;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log(\"Msg in sending: \"+msg);sender=this.rootStore.sessionStore._user;message={sender:sender,msg:msg};stringifyMessage=JSON.stringify(message);Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee6(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _this3.pubsub.publish(_this3.roomName,stringifyMessage);case 2:case\"end\":return _context6.stop();}}},_callee6);})));case 5:case\"end\":return _context7.stop();}}},_callee7,this);}));function sendMessageToChatRoom(_x){return _sendMessageToChatRoom.apply(this,arguments);}return sendMessageToChatRoom;}()},{key:\"setMessage\",value:function(){var _setMessage=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee8(msg){var parsedMsg,userName,type,file,date,message;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log(msg.data);//TODO: nevim proc ale kdyz je to zprava odeslana ze stejneho peeru tak je to string a jinak je to object\nif(typeof msg.data===\"object\")msg.data=this.textDecoder.decode(msg.data);parsedMsg=JSON.parse(msg.data);userName=parsedMsg.sender;console.log(parsedMsg);type=\"message\";if(!msg.data.includes(\"path\")){_context8.next=13;break;}_context8.next=9;return this.retrieveFileFromIpfs(parsedMsg.msg.path);case 9:file=_context8.sent;console.log(file);parsedMsg[\"file\"]=file;type=\"file\";case 13:console.log(parsedMsg);date=new Date(Date.now());message=new Message_Message(msg.from,userName,parsedMsg,\"\".concat(date.getHours(),\":\").concat(date.getMinutes()),new dist[\"AvatarGenerator\"]().generateRandomAvatar(msg.from),type);console.log(message);_context8.next=19;return this.saveMessage(message);case 19:case\"end\":return _context8.stop();}}},_callee8,this);}));function setMessage(_x2){return _setMessage.apply(this,arguments);}return setMessage;}()},{key:\"saveMessage\",value:function(){var _saveMessage=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee10(message){var _this4=this;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee9(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this4.chatRoomMessages.push(message);_this4.lastMessage=message;_context9.next=4;return _this4.chatMessagesDb.add(message);case 4:case\"end\":return _context9.stop();}}},_callee9);})));case 1:case\"end\":return _context10.stop();}}},_callee10);}));function saveMessage(_x3){return _saveMessage.apply(this,arguments);}return saveMessage;}()},{key:\"uploadFile\",value:function(){var _uploadFile=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee11(filesContent){var result,fileMessage;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0://TODO: maybe Multiple files if interested\nconsole.log(filesContent[0]);console.log(filesContent[0].name.split(\".\").pop());_context11.next=4;return this.ipfsNode.add(filesContent[0]);case 4:result=_context11.sent;console.log(result);fileMessage={fileName:filesContent[0].name,path:result.path};console.log(fileMessage);this.sendMessageToChatRoom(fileMessage);case 9:case\"end\":return _context11.stop();}}},_callee11,this);}));function uploadFile(_x4){return _uploadFile.apply(this,arguments);}return uploadFile;}()},{key:\"getFileExtension\",value:function getFileExtension(fileName){return fileName.split(\".\").pop();}},{key:\"fileIsImage\",value:function fileIsImage(fileName){var match=fileName.match(/\\.(jpg|jpeg|png|gif)$/i);console.log(match);return match!==null;}},{key:\"retrieveFileFromIpfs\",value:function(){var _retrieveFileFromIpfs=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee12(path){var ipfsFile,file,content,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,chunk;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return this.ipfsNode.cat(path);case 2:ipfsFile=_context12.sent;console.log(ipfsFile);content=[];_iteratorAbruptCompletion=false;_didIteratorError=false;_context12.prev=7;_iterator=Object(asyncIterator[\"a\" /* default */])(ipfsFile);case 9:_context12.next=11;return _iterator.next();case 11:if(!(_iteratorAbruptCompletion=!(_step=_context12.sent).done)){_context12.next=17;break;}chunk=_step.value;content.push(chunk);case 14:_iteratorAbruptCompletion=false;_context12.next=9;break;case 17:_context12.next=23;break;case 19:_context12.prev=19;_context12.t0=_context12[\"catch\"](7);_didIteratorError=true;_iteratorError=_context12.t0;case 23:_context12.prev=23;_context12.prev=24;if(!(_iteratorAbruptCompletion&&_iterator.return!=null)){_context12.next=28;break;}_context12.next=28;return _iterator.return();case 28:_context12.prev=28;if(!_didIteratorError){_context12.next=31;break;}throw _iteratorError;case 31:return _context12.finish(28);case 32:return _context12.finish(23);case 33:console.log(content);file=content;return _context12.abrupt(\"return\",file);case 36:case\"end\":return _context12.stop();}}},_callee12,this,[[7,19,23,33],[24,,28,32]]);}));function retrieveFileFromIpfs(_x5){return _retrieveFileFromIpfs.apply(this,arguments);}return retrieveFileFromIpfs;}()}]);return ChatRoom;}();\n// CONCATENATED MODULE: ./src/data/store/RoomStore.js\n// var util = require(\"util\");\nvar RoomStore_RoomStore=/*#__PURE__*/function(){//TODO:load rooms from db\nfunction RoomStore(rootStore){Object(classCallCheck[\"a\" /* default */])(this,RoomStore);this.rootStore=rootStore;this.rooms=[];this.selectedRoom=undefined;this.selectedReceiver=undefined;Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(RoomStore,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.rootStore.dataStore.ipfsNode===undefined)){_context.next=2;break;}throw Error(\"IPFS Node not defined!\");case 2:if(!(this.rootStore.dataStore.orbitDb===undefined)){_context.next=4;break;}throw Error(\"OrbitDb not defined!\");case 4:_context.next=6;return this.loadRoomsDb();case 6:_context.next=8;return this.setRoomsFromDb();case 8:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"createRoom\",value:function(){var _createRoom=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(roomName){var chatRoom;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.rootStore.dataStore.ipfsNode===undefined)){_context2.next=2;break;}throw Error(\"IPFS Node not defined!\");case 2:if(!(this.rootStore.dataStore.orbitDb===undefined)){_context2.next=4;break;}throw Error(\"OrbitDb not defined!\");case 4:console.log(roomName);chatRoom=new Room_ChatRoom(this.rootStore,roomName);this.rooms.push(chatRoom);_context2.next=9;return this.roomsDb.add(roomName);case 9:console.log(chatRoom);console.log(Object(mobx_esm[\"p\" /* toJS */])(this.rooms));// const roomJSON = util.inspect(chatRoom);\n// console.log(roomJSON);\nreturn _context2.abrupt(\"return\",chatRoom);case 12:case\"end\":return _context2.stop();}}},_callee2,this);}));function createRoom(_x){return _createRoom.apply(this,arguments);}return createRoom;}()},{key:\"getRoom\",value:function getRoom(roomName){return this.rooms.find(function(room){return roomName===room.roomName;});}},{key:\"loadRoomsDb\",value:function(){var _loadRoomsDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.rootStore.dataStore.orbitDb.feed(\"rooms\");case 2:this.roomsDb=_context3.sent;_context3.next=5;return this.roomsDb.load();case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function loadRoomsDb(){return _loadRoomsDb.apply(this,arguments);}return loadRoomsDb;}()},{key:\"setRoomsFromDb\",value:function(){var _setRoomsFromDb=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(){var _this=this;var all;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Object(mobx_esm[\"p\" /* toJS */])(this.roomsDb.all);case 2:all=_context4.sent;Object(mobx_esm[\"o\" /* runInAction */])(function(){all.map(function(item){var roomName=item.payload.value;console.log(item.payload.value);var room=new Room_ChatRoom(_this.rootStore,roomName);room.init();return _this.rooms.push(room);});});case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function setRoomsFromDb(){return _setRoomsFromDb.apply(this,arguments);}return setRoomsFromDb;}()},{key:\"setSelectedRoom\",value:function setSelectedRoom(user){var _this2=this;var room;Object(mobx_esm[\"o\" /* runInAction */])(/*#__PURE__*/Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee5(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:room=_this2.getRoom(user.peerId);if(room){_context5.next=7;break;}_context5.next=4;return _this2.createRoom(user.peerId);case 4:room=_context5.sent;_context5.next=7;return room.init();case 7:_this2.selectedReceiver=user._username;_this2.selectedRoom=room;case 9:case\"end\":return _context5.stop();}}},_callee5);})));}},{key:\"isChatRoomReady\",value:function isChatRoomReady(roomName){var room=this.getRoom(roomName);return room;}}]);return RoomStore;}();\n// EXTERNAL MODULE: ./node_modules/js-cookie/dist/js.cookie.js\nvar js_cookie = __webpack_require__(250);\nvar js_cookie_default = /*#__PURE__*/__webpack_require__.n(js_cookie);\n\n// CONCATENATED MODULE: ./src/data/store/SessionStore.js\nvar cookieKey=\"orbit-chat-username\";var SessionStore_SessionStore=/*#__PURE__*/function(){function SessionStore(rootStore){Object(classCallCheck[\"a\" /* default */])(this,SessionStore);this.rootStore=rootStore;this._user=undefined;Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(SessionStore,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.loadFromCache();case 2:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"_readUserFromCache\",value:function _readUserFromCache(){var username=js_cookie_default.a.get(cookieKey);return username?username:null;}},{key:\"isAuthenticated\",value:function isAuthenticated(){return!!this._user;}},{key:\"_setUser\",value:function(){var _setUser2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(user){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(user){_context2.next=2;break;}throw new Error('\"username\" is not defined');case 2:// ;if (user && !user.username) throw new Error('\"user.username\" is not defined')\nthis._cacheUser(user);this._user=user;case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function _setUser(_x){return _setUser2.apply(this,arguments);}return _setUser;}()},{key:\"_cacheUser\",value:function _cacheUser(user){if(user){js_cookie_default.a.set(cookieKey,user);}else{js_cookie_default.a.remove(cookieKey);}}},{key:\"loadFromCache\",value:function(){var _loadFromCache=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(){var cached;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cached=this._readUserFromCache();if(!cached){_context3.next=4;break;}_context3.next=4;return this.login(cached);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function loadFromCache(){return _loadFromCache.apply(this,arguments);}return loadFromCache;}()},{key:\"login\",value:function(){var _login=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(user){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"User login\");_context4.next=3;return this._setUser(user);case 3:return _context4.abrupt(\"return\",_context4.sent);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function login(_x2){return _login.apply(this,arguments);}return login;}()},{key:\"logout\",value:function logout(){console.log(\"User logout\");return this._setUser(null);}}]);return SessionStore;}();\n// CONCATENATED MODULE: ./src/data/models/User.js\nvar User_User=/*#__PURE__*/Object(createClass[\"a\" /* default */])(function User(username,peerId){Object(classCallCheck[\"a\" /* default */])(this,User);this._username=username;this.peerId=peerId;});\n// CONCATENATED MODULE: ./src/data/store/UserStore.js\nvar UserStore_UserStore=/*#__PURE__*/function(){function UserStore(rootStore){Object(classCallCheck[\"a\" /* default */])(this,UserStore);this.rootStore=rootStore;this.userDb=undefined;Object(mobx_esm[\"l\" /* makeAutoObservable */])(this);}Object(createClass[\"a\" /* default */])(UserStore,[{key:\"init\",value:function(){var _init=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.setUserStore();case 2:case\"end\":return _context.stop();}}},_callee,this);}));function init(){return _init.apply(this,arguments);}return init;}()},{key:\"isUserStoreReady\",value:function isUserStoreReady(){return this.userDb;}},{key:\"setUserStore\",value:function(){var _setUserStore=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(){var defaultOptions;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.rootStore.dataStore.orbitDb===undefined)){_context2.next=2;break;}throw Error(\"OrbitDb not defined!\");case 2:defaultOptions={accessController:{write:[this.rootStore.dataStore.orbitDb.identity.id]}};_context2.next=5;return this.rootStore.dataStore.orbitDb.kvstore(\"user\",defaultOptions);case 5:this.userDb=_context2.sent;_context2.next=8;return this.userDb.load();case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function setUserStore(){return _setUserStore.apply(this,arguments);}return setUserStore;}()},{key:\"createUser\",value:function(){var _createUser=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee3(username){var peerId,user;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:peerId=this.rootStore.dataStore.peerId;user=new User_User(username,peerId);_context3.next=4;return this.userDb.set(\"user\",user);case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function createUser(_x){return _createUser.apply(this,arguments);}return createUser;}()},{key:\"deleteProfileField\",value:function(){var _deleteProfileField=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee4(key){var cid;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.userDb.del(key);case 2:cid=_context4.sent;return _context4.abrupt(\"return\",cid);case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function deleteProfileField(_x2){return _deleteProfileField.apply(this,arguments);}return deleteProfileField;}()},{key:\"getAllProfileFields\",value:function getAllProfileFields(){return this.userDb.all;}},{key:\"getProfileField\",value:function getProfileField(key){return this.userDb.get(key);}},{key:\"updateUserField\",value:function(){var _updateUserField=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee5(key,value){var cid;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.userDb.set(key,value);case 2:cid=_context5.sent;return _context5.abrupt(\"return\",cid);case 4:case\"end\":return _context5.stop();}}},_callee5,this);}));function updateUserField(_x3,_x4){return _updateUserField.apply(this,arguments);}return updateUserField;}()},{key:\"getUserDbId\",value:function(){var _getUserDbId=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee6(){var id;return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return this.userDb.id;case 2:id=_context6.sent;return _context6.abrupt(\"return\",id);case 4:case\"end\":return _context6.stop();}}},_callee6,this);}));function getUserDbId(){return _getUserDbId.apply(this,arguments);}return getUserDbId;}()}]);return UserStore;}();\n// CONCATENATED MODULE: ./src/data/store/RootStore.js\nvar RootStore_RootStore=/*#__PURE__*/function(){function RootStore(){Object(classCallCheck[\"a\" /* default */])(this,RootStore);this.sessionStore=new SessionStore_SessionStore(this);this.dataStore=new DataStore_DataStore(this);this.userStore=new UserStore_UserStore(this);this.monitorStore=new MonitorStore_MonitorStore(this);this.roomStore=new RoomStore_RoomStore(this);this.initStores();}Object(createClass[\"a\" /* default */])(RootStore,[{key:\"initStores\",value:function(){var _initStores=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.sessionStore.init();case 2:_context.next=4;return this.initDbStores();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function initStores(){return _initStores.apply(this,arguments);}return initStores;}()},{key:\"initDbStores\",value:function(){var _initDbStores=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/Object(regeneratorRuntime[\"a\" /* default */])().mark(function _callee2(){return Object(regeneratorRuntime[\"a\" /* default */])().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!this.sessionStore.isAuthenticated()){_context2.next=9;break;}_context2.next=3;return this.dataStore.init();case 3:_context2.next=5;return this.userStore.init();case 5:_context2.next=7;return this.monitorStore.init();case 7:_context2.next=9;return this.roomStore.init();case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function initDbStores(){return _initDbStores.apply(this,arguments);}return initDbStores;}()}]);return RootStore;}();var store=new RootStore_RootStore();var StoresContext=/*#__PURE__*/react_default.a.createContext(store);var RootStore_useStores=function useStores(){return react_default.a.useContext(StoresContext);};\n\n/***/ }),\n\n/***/ 927:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 931:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 964:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n\n},[[1642,1,2]]]);","inputSourceMap":{"version":3,"sources":["ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\mortice\\lib cluster","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\ipfs-http-client\\src ipfs-utils/src/files/glob-source","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\ipfs-http-client\\src\\lib http","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\ipfs-http-client\\src\\lib https","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\libp2p\\src @motrix/nat-api","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\it-ws ws","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\@stablelib\\random\\lib\\source crypto","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\seedrandom crypto","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-6-0!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-6-1!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\resolve-url-loader\\index.js??ref--5-oneOf-6-3!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\sass-loader\\dist\\cjs.js??ref--5-oneOf-6-4!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\themes\\default\\main.scss","C:/Users/zajan/GitHub/chatApplication/src/constants/constants.js","C:/Users/zajan/GitHub/chatApplication/src/components/Loader.js","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\kynes.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\baron_harkonnen.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\chani.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\leto_atreides.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\lady_jessica.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\duncan_idaho.jpg","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\images\\paul_atreides.jpg","C:/Users/zajan/GitHub/chatApplication/src/pages/chat/ChatRoom.js","C:/Users/zajan/GitHub/chatApplication/src/pages/chat/ChatConversations.js","C:/Users/zajan/GitHub/chatApplication/src/components/error/NoRoom.js","C:/Users/zajan/GitHub/chatApplication/src/pages/home/HomePage.js","C:/Users/zajan/GitHub/chatApplication/src/pages/main/MainPage.js","C:/Users/zajan/GitHub/chatApplication/src/App.js","C:/Users/zajan/GitHub/chatApplication/src/reportWebVitals.js","C:/Users/zajan/GitHub/chatApplication/src/index.js","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\node-forge\\lib crypto","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\libp2p-delegated-content-routing\\node_modules\\node-forge\\lib crypto","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\icons\\decentioLogoLight.png","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\@noble\\ed25519\\lib\\esm crypto","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\@noble\\secp256k1\\lib\\esm crypto","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\index.css","C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\zajan\\GitHub\\chatApplication\\src\\App.css","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\clean-stack os","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\logplease\\src fs","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\readable-stream\\lib util","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\readable-stream\\lib\\internal\\streams util","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\stream-browserify\\node_modules\\readable-stream\\lib util","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\stream-browserify\\node_modules\\readable-stream\\lib\\internal\\streams util","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\asn1.js\\node_modules\\bn.js\\lib buffer","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\orbit-db-keystore\\node_modules\\tweetnacl crypto","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\elliptic\\node_modules\\bn.js\\lib buffer","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\brorand crypto","C:/Users/zajan/GitHub/chatApplication/src/data/store/MonitorStore.js","C:/Users/zajan/GitHub/chatApplication/src/data/store/DataStore.js","C:/Users/zajan/GitHub/chatApplication/src/data/models/Message.js","C:/Users/zajan/GitHub/chatApplication/src/data/models/Room.js","C:/Users/zajan/GitHub/chatApplication/src/data/store/RoomStore.js","C:/Users/zajan/GitHub/chatApplication/src/data/store/SessionStore.js","C:/Users/zajan/GitHub/chatApplication/src/data/models/User.js","C:/Users/zajan/GitHub/chatApplication/src/data/store/UserStore.js","C:/Users/zajan/GitHub/chatApplication/src/data/store/RootStore.js","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\ipfs-core\\src ipfs-utils/src/files/glob-source","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\ipfs-utils\\src electron-fetch","ignored C:\\Users\\zajan\\GitHub\\chatApplication\\node_modules\\noble-secp256k1 crypto"],"names":["ContentColorLight","ContentColorDark","PrimaryColor","SecondaryColor","TextLight","TextDark","Loader","position","top","left","transform","ChatRoom","observer","room","useStores","dataStore","roomStore","console","log","selectedReceiver","useFilePicker","accept","readAs","multiple","openFileSelector","filesContent","useEffect","loadFile","length","uploadFile","data","toJS","chatRoomMessages","nodeId","peerId","backgroundColor","map","msg","type","file","direction","from","message","avatar","_id","sender","sentTime","fileIsImage","fileName","URL","createObjectURL","Blob","sendMessageToChatRoom","ChatConversations","monitorStore","users","peers","selectChatRoom","user","setSelectedRoom","item","_username","AvatarGenerator","generateRandomAvatar","NoRoom","width","display","justifyContent","alignItems","DecentioLogo","HomePage","sessionStore","_me","_user","selectedRoom","height","flexDirection","isMonitorReady","LoginPage","React","lazy","MainPage","userStore","isAuthenticated","isUserStoreReady","AppView","App","store","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","MonitorStore","rootStore","monitor","undefined","peersDb","topicName","texDecoder","TextDecoder","makeAutoObservable","ipfsNode","Error","orbitDb","runInAction","subscribeToOwnPubsub","subscribeToDecentioPubsub","loadPeersDb","setPeersFromDb","IpfsPubsubPeerMonitor","pubsub","listenForJoinedPeers","listenForLeftPeers","all","e","push","payload","value","on","peerJoined","getPeers","setTimeout","peerInDb","peerIsInDb","sendUserDbId","peerLeft","peer","find","add","iterator","collect","entry","remove","hash","getUserDbId","userDbId","stringifyPayload","JSON","stringify","userDb","publish","peerInfoId","subscribe","decode","parsedMsg","parse","replicateUserDb","createRoom","init","targetRoom","getRoom","setMessage","open","peerDbOuter","events","feed","load","getPeerId","id","peersDbId","peerDb","DataStore","dbConfig","create","sync","localOnly","accessController","write","ipfsConfig","relay","enabled","hop","active","repo","EXPERIMENTAL","config","Addresses","Swarm","Bootstrap","start","ipfsConf","orbitDbconf","startIpfsNode","startOrbitDb","connection","remotePeer","_idB58String","peerInfo","multiaddr","protocol","swarm","connect","IPFS","OrbitDB","createInstance","disconnect","stop","Message","senderName","uuidv4","roomName","roomId","textDecoder","lastMessage","connectToChatRoom","loadMsgDb","setMessagesFromDb","chatMessagesDb","bind","stringifyMessage","userName","includes","retrieveFileFromIpfs","path","date","Date","now","getHours","getMinutes","saveMessage","name","split","pop","result","fileMessage","match","cat","ipfsFile","content","chunk","RoomStore","rooms","loadRoomsDb","setRoomsFromDb","chatRoom","roomsDb","cookieKey","SessionStore","loadFromCache","username","Cookies","get","_cacheUser","set","cached","_readUserFromCache","login","_setUser","User","UserStore","setUserStore","defaultOptions","identity","kvstore","key","del","cid","RootStore","initStores","initDbStores","StoresContext","createContext","useContext"],"mappings":"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","file":"x","sourcesContent":["/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// extracted by mini-css-extract-plugin","const ContentColorLight = \"#d2dce5\";\r\nconst ContentColorDark = \"#9473b\";\r\nconst PrimaryColor = \"#bf8464\";\r\nconst SecondaryColor = \"#7c685f\";\r\nconst TextLight = \"#483527\";\r\nconst TextDark = \"#d2dce5\";\r\n\r\nexport { ContentColorLight, ContentColorDark, PrimaryColor, SecondaryColor, TextLight, TextDark };\r\n","import { Grid } from \"react-loader-spinner\";\r\nimport { PrimaryColor } from \"../constants/constants.js\";\r\n\r\nexport function Loader() {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        transform: \"translate(-50%, -50%)\",\r\n      }}\r\n    >\r\n      <Grid ariaLabel=\"loading-indicator\" color={PrimaryColor} />\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/kynes.a7e85946.jpg\";","export default __webpack_public_path__ + \"static/media/baron_harkonnen.eb1ecd67.jpg\";","export default __webpack_public_path__ + \"static/media/chani.ae9726ad.jpg\";","export default __webpack_public_path__ + \"static/media/leto_atreides.401d00ab.jpg\";","export default __webpack_public_path__ + \"static/media/lady_jessica.768db249.jpg\";","export default __webpack_public_path__ + \"static/media/duncan_idaho.8c582ae9.jpg\";","export default __webpack_public_path__ + \"static/media/paul_atreides.e2d96fd6.jpg\";","import {\r\n  Avatar,\r\n  ChatContainer,\r\n  ConversationHeader,\r\n  InfoButton,\r\n  Message,\r\n  MessageInput,\r\n  MessageList,\r\n  VideoCallButton,\r\n  VoiceCallButton,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { FileIcon } from \"react-file-icon\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useFilePicker } from \"use-file-picker\";\r\nimport { ContentColorLight, PrimaryColor } from \"../../constants/constants.js\";\r\nimport { useStores } from \"../../data/store/RootStore.js\";\r\n\r\nexport const ChatRoom = observer(({ room }) => {\r\n  const { dataStore, roomStore } = useStores();\r\n  // const room = toJS(roomStore.selectedRoom);\r\n  console.log(room);\r\n  console.log(roomStore.selectedReceiver);\r\n\r\n  // useEffect(() => {\r\n  //   async function initRoom() {\r\n  //     await room.init();\r\n  //   }\r\n  //   initRoom();\r\n  // }, [room]);\r\n  const [openFileSelector, { filesContent }] = useFilePicker({\r\n    accept: [\"*\"],\r\n    readAs: \"ArrayBuffer\",\r\n    multiple: false,\r\n  });\r\n  useEffect(() => {\r\n    async function loadFile() {\r\n      console.log(filesContent);\r\n      if (filesContent.length) await room.uploadFile(filesContent);\r\n    }\r\n    loadFile();\r\n  }, [filesContent]);\r\n\r\n  const data = toJS(room.chatRoomMessages);\r\n  const nodeId = dataStore.peerId;\r\n  return (\r\n    <ChatContainer style={{ backgroundColor: ContentColorLight }}>\r\n      <ConversationHeader style={{ backgroundColor: PrimaryColor }}>\r\n        <ConversationHeader.Back style={{ backgroundColor: PrimaryColor }} />\r\n        {/* <Avatar src={Chani} name=\"Zoe\" /> */}\r\n        <ConversationHeader.Content style={{ backgroundColor: PrimaryColor }} userName={roomStore.selectedReceiver} />\r\n        <ConversationHeader.Actions>\r\n          <VoiceCallButton />\r\n          <VideoCallButton />\r\n          <InfoButton />\r\n        </ConversationHeader.Actions>\r\n      </ConversationHeader>\r\n      <MessageList loading={!data}>\r\n        {data\r\n          ? data.map((msg) => {\r\n              if (msg.type === \"file\") console.log(msg.data.file);\r\n              return msg.type === \"message\" ? (\r\n                <Message key={msg._id} model={{ direction: msg.from === nodeId ? \"outgoing\" : \"incoming\", position: \"first\", message: msg.data.msg }}>\r\n                  <Avatar key={msg._id} src={msg.avatar}></Avatar>\r\n                  <Message.Footer sender={msg.data.sender} sentTime={msg.sentTime}></Message.Footer>\r\n                </Message>\r\n              ) : (\r\n                <Message key={msg._id} model={{ direction: msg.from === nodeId ? \"outgoing\" : \"incoming\", position: \"first\" }}>\r\n                  <Message.CustomContent>\r\n                    {room.fileIsImage(msg.data.msg.fileName) ? (\r\n                      <img src={URL.createObjectURL(new Blob(msg.data.file))} alt={msg.data.msg.fileName} width={400} height={550}></img>\r\n                    ) : (\r\n                      <a href={URL.createObjectURL(new Blob(msg.data.file))} download={msg.data.msg.fileName}>\r\n                        {/* <FileIcon extension={room.getFileExtension(msg.data.fileName)} labelTextStyle={{ width: 100, height: 100 }} type=\"image\" /> */}\r\n                        {msg.data.msg.fileName}\r\n                      </a>\r\n                    )}\r\n                  </Message.CustomContent>\r\n                  <Avatar key={msg._id} src={msg.avatar}></Avatar>\r\n                  <Message.Footer sender={msg.data.sender} sentTime={msg.sentTime}></Message.Footer>\r\n                </Message>\r\n              );\r\n            })\r\n          : \"\"}\r\n      </MessageList>\r\n      <MessageInput\r\n        placeholder=\"Type message here\"\r\n        onSend={(msg) => {\r\n          room.sendMessageToChatRoom(msg);\r\n        }}\r\n        onAttachClick={async () => openFileSelector()}\r\n      />\r\n    </ChatContainer>\r\n  );\r\n});\r\n","import { Avatar, Conversation, ConversationList } from \"@chatscope/chat-ui-kit-react\";\r\nimport { toJS } from \"mobx\";\r\nimport { observer } from \"mobx-react-lite\";\r\nimport { AvatarGenerator } from \"random-avatar-generator\";\r\nimport { useStores } from \"../../data/store/RootStore.js\";\r\n\r\nexport const ChatConversations = observer(() => {\r\n  const { roomStore, monitorStore } = useStores();\r\n  const users = monitorStore.peers;\r\n  // console.log(users);\r\n\r\n  function selectChatRoom(user) {\r\n    console.log(\"select\");\r\n    roomStore.setSelectedRoom(user);\r\n  }\r\n\r\n  return (\r\n    <ConversationList style={{ backgroundColor: \"#bacee0\" }}>\r\n      {users.map((item) => {\r\n        console.log(item);\r\n        const user = item.user;\r\n        console.log(user);\r\n        return (\r\n          <Conversation key={user.peerId} name={user._username} onClick={() => selectChatRoom(user)}>\r\n            <Avatar src={new AvatarGenerator().generateRandomAvatar(user.peerId)} status=\"available\" />\r\n          </Conversation>\r\n        );\r\n      })}\r\n    </ConversationList>\r\n  );\r\n});\r\n","import { ContentColorLight } from \"../../constants/constants.js\";\r\nimport DecentioLogo from \"../../icons/decentioLogoLight.png\";\r\n\r\nexport const NoRoom = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        backgroundColor: ContentColorLight,\r\n      }}\r\n    >\r\n      <div>\r\n        <img alt=\"logo\" width={350} height={250} src={DecentioLogo}></img>\r\n        <h3>You have no selected room</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import Kynes from \"../../images/kynes.jpg\";\r\nimport Baron from \"../../images/baron_harkonnen.jpg\";\r\nimport Chani from \"../../images/chani.jpg\";\r\nimport DukeLeto from \"../../images/leto_atreides.jpg\";\r\nimport LadyJessica from \"../../images/lady_jessica.jpg\";\r\nimport DuncanIdaho from \"../../images/duncan_idaho.jpg\";\r\nimport PaulAtreides from \"../../images/paul_atreides.jpg\";\r\nimport \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\r\nimport {\r\n  Avatar,\r\n  Conversation,\r\n  ConversationHeader,\r\n  ConversationList,\r\n  MainContainer,\r\n\r\n  // Search,\r\n  Sidebar,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { useStores } from \"../../data/store/RootStore.js\";\r\nimport { PrimaryColor } from \"../../constants/constants.js\";\r\nimport { observer } from \"mobx-react\";\r\nimport { ChatRoom } from \"../chat/ChatRoom.js\";\r\nimport { Loader } from \"../../components/Loader.js\";\r\nimport { ChatConversations } from \"../chat/ChatConversations.js\";\r\nimport { toJS } from \"mobx\";\r\nimport { useEffect } from \"react\";\r\nimport { NoRoom } from \"../../components/error/NoRoom.js\";\r\nimport { AvatarGenerator } from \"random-avatar-generator\";\r\n\r\nexport const HomePage = observer(() => {\r\n  const { sessionStore, roomStore, monitorStore, dataStore } = useStores();\r\n  const _me = sessionStore._user;\r\n\r\n  const room = roomStore.selectedRoom;\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", height: \"100vh\" }}>\r\n      <MainContainer responsive>\r\n        <Sidebar position=\"left\" scrollable={false} style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n          {/* <Search placeholder=\"Search...\" /> */}\r\n          <ConversationHeader style={{ backgroundColor: PrimaryColor }}>\r\n            <Avatar src={new AvatarGenerator().generateRandomAvatar(dataStore.peerId)} name={_me} status=\"available\" size=\"fluid\" />\r\n            <ConversationHeader.Content style={{ backgroundColor: PrimaryColor }} userName={_me}></ConversationHeader.Content>\r\n          </ConversationHeader>\r\n\r\n          {monitorStore.isMonitorReady() ? <ChatConversations></ChatConversations> : <Loader></Loader>}\r\n        </Sidebar>\r\n        {room ? <ChatRoom room={room}></ChatRoom> : <NoRoom></NoRoom>}\r\n      </MainContainer>\r\n    </div>\r\n  );\r\n});\r\n","import { observer } from \"mobx-react\";\r\nimport React from \"react\";\r\nimport { Loader } from \"../../components/Loader.js\";\r\nimport { useStores } from \"../../data/store/RootStore.js\";\r\nimport { HomePage } from \"../home/HomePage.js\";\r\n// import LoginPage from \"../login/LoginPage.js\";\r\n// import { LoginPage } from \"../login/LoginPage.js\";\r\n\r\nconst LoginPage = React.lazy(() => import(\"../login/LoginPage.js\"));\r\n\r\nexport const MainPage = observer(() => {\r\n  const { sessionStore, userStore } = useStores();\r\n\r\n  return sessionStore.isAuthenticated() ? (\r\n    userStore.isUserStoreReady() ? (\r\n      <HomePage></HomePage>\r\n    ) : (\r\n      <Loader></Loader>\r\n    )\r\n  ) : (\r\n    <React.Suspense fallback={<Loader></Loader>}>\r\n      <LoginPage></LoginPage>\r\n    </React.Suspense>\r\n  );\r\n});\r\n","import \"./App.css\";\r\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport { store, StoresContext } from \"./data/store/RootStore.js\";\r\nimport \"./themes/default/main.scss\";\r\nimport { MainPage } from \"./pages/main/MainPage.js\";\r\n\r\nfunction AppView() {\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/\" element={<MainPage />}></Route>\r\n    </Routes>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <StoresContext.Provider value={store}>{<AppView></AppView>}</StoresContext.Provider>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// window.LOG = \"orbit*\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n// const root = document.getElementById(\"root\");\r\n// render(<App />, root);\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","/* (ignored) */","/* (ignored) */","export default __webpack_public_path__ + \"static/media/decentioLogoLight.d9a5e096.png\";","/* (ignored) */","/* (ignored) */","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import IpfsPubsubPeerMonitor from \"ipfs-pubsub-peer-monitor\";\r\nimport { makeAutoObservable, runInAction, toJS } from \"mobx\";\r\n\r\nexport class MonitorStore {\r\n  monitor;\r\n  topicName;\r\n  peers;\r\n  peersDb;\r\n  texDecoder;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.monitor = undefined;\r\n    this.peersDb = undefined;\r\n    this.peers = [];\r\n    this.topicName = \"DecentioGlobalNetwork\";\r\n    this.texDecoder = new TextDecoder();\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    if (this.rootStore.dataStore.ipfsNode === undefined) throw Error(\"IPFS Node not defined!\");\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n    runInAction(async () => {\r\n      await this.subscribeToOwnPubsub();\r\n      await this.subscribeToDecentioPubsub();\r\n      await this.loadPeersDb();\r\n      await this.setPeersFromDb();\r\n      this.monitor = new IpfsPubsubPeerMonitor(this.rootStore.dataStore.ipfsNode.pubsub, this.topicName);\r\n      await this.listenForJoinedPeers();\r\n      await this.listenForLeftPeers();\r\n    });\r\n  }\r\n  async isMonitorReady() {\r\n    return this.monitor;\r\n  }\r\n\r\n  async setPeersFromDb() {\r\n    const all = await toJS(this.peersDb.all);\r\n    runInAction(() => {\r\n      all.map((e) => {\r\n        // console.log(e.payload.value);\r\n        return this.peers.push(e.payload.value);\r\n      });\r\n    });\r\n  }\r\n\r\n  async listenForJoinedPeers() {\r\n    this.monitor.on(\"join\", async (peerJoined) => {\r\n      console.log(\"Peer joined: \" + peerJoined);\r\n      console.log(`Peers on Pubsub ${this.topicName}: ` + (await this.monitor.getPeers()));\r\n      setTimeout(async () => {\r\n        let peerInDb = this.peerIsInDb(peerJoined);\r\n\r\n        if (peerInDb) {\r\n          // const room = await this.rootStore.roomStore.getRoom(peerJoined);\r\n          // //mozna lepsi ten init\r\n          // await room.connectToChatRoom();\r\n        } else {\r\n          await this.sendUserDbId(peerJoined);\r\n          // const room = await this.rootStore.roomStore.createRoom(peerJoined);\r\n          // await room.init();\r\n        }\r\n      }, 2000);\r\n    });\r\n  }\r\n\r\n  async listenForLeftPeers() {\r\n    this.monitor.on(\"leave\", async (peerLeft) => {\r\n      console.log(\"Peer left: \" + peerLeft);\r\n      console.log(`Peers on Pubsub ${this.topicName}: ` + (await this.monitor.getPeers()));\r\n      // await this.removePeer(peerLeft);\r\n    });\r\n  }\r\n\r\n  peerIsInDb(peer) {\r\n    console.log(peer);\r\n    const peers = toJS(this.peers);\r\n    console.log(toJS(this.peers));\r\n    return peers.find((item) => item.user.peerId === peer);\r\n  }\r\n\r\n  async savePeer(peer) {\r\n    runInAction(async () => {\r\n      console.log(!this.peerIsInDb(peer));\r\n      if (!this.peerIsInDb(peer)) {\r\n        this.peers.push(peer);\r\n        await this.peersDb.add(peer);\r\n      }\r\n    });\r\n  }\r\n  async removePeer(peer) {\r\n    const entry = await this.peersDb\r\n      .iterator()\r\n      .collect()\r\n      .map((item) => (item.payload.value === peer ? item : undefined));\r\n    console.log(entry);\r\n    if (entry) {\r\n      await this.peersDb.remove(entry[0].hash);\r\n    }\r\n  }\r\n  async sendUserDbId(peer) {\r\n    console.log(this.peerIsInDb(peer));\r\n\r\n    const userDbId = await this.rootStore.userStore.getUserDbId();\r\n\r\n    const stringifyPayload = JSON.stringify({ userDb: userDbId });\r\n    console.log(stringifyPayload);\r\n    await this.rootStore.dataStore.ipfsNode.pubsub.publish(peer, stringifyPayload);\r\n  }\r\n\r\n  async subscribeToOwnPubsub() {\r\n    const peerInfoId = this.rootStore.dataStore.peerId;\r\n    console.log(\"Peer ID: \" + peerInfoId);\r\n    await this.rootStore.dataStore.ipfsNode.pubsub.subscribe(peerInfoId, async (msg) => {\r\n      console.log(msg.data);\r\n\r\n      // this.processMessage(msg);\r\n      if (typeof msg.data === \"object\") msg.data = this.texDecoder.decode(msg.data);\r\n      const parsedMsg = JSON.parse(msg.data);\r\n      console.log(parsedMsg);\r\n      console.log(parsedMsg.userDb);\r\n      //TODO: tahle podminka vubec nefunguje\r\n\r\n      if (parsedMsg.userDb) {\r\n        await this.replicateUserDb(parsedMsg);\r\n        const room = await this.rootStore.roomStore.createRoom(msg.from);\r\n        await room.init();\r\n      } else {\r\n        const targetRoom = this.rootStore.roomStore.getRoom(msg.from);\r\n        console.log(targetRoom);\r\n        if (targetRoom) {\r\n          targetRoom.setMessage(msg);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async subscribeToDecentioPubsub() {\r\n    await this.rootStore.dataStore.ipfsNode.pubsub.subscribe(\"DecentioGlobalNetwork\", () => {});\r\n  }\r\n\r\n  async replicateUserDb(parsedMsg) {\r\n    var peerDbOuter = await this.rootStore.dataStore.orbitDb.open(parsedMsg.userDb);\r\n    peerDbOuter.events.on(\"replicated\", async () => {\r\n      console.log(\"DB replicated\");\r\n      await this.peersDb.add(peerDbOuter.all);\r\n      console.log(peerDbOuter.all);\r\n      this.peers.push(peerDbOuter.all);\r\n      console.log(this.peersDb.all);\r\n      console.log(this.peers);\r\n    });\r\n  }\r\n\r\n  async loadPeersDb() {\r\n    this.peersDb = await this.rootStore.dataStore.orbitDb.feed(\"peers\");\r\n    await this.peersDb.load();\r\n  }\r\n\r\n  replicatePeersDB() {\r\n    setTimeout(async () => {\r\n      const nodeId = await this.rootStore.dataStore.getPeerId();\r\n      const peersDbId = await this.peersDb.id;\r\n      console.log(nodeId);\r\n      await this.peersDb.all.map((peer) => {\r\n        const peerId = peer.payload.value;\r\n        if (peerId !== nodeId) {\r\n          console.log(\"jsem tu \");\r\n          console.log(peerId);\r\n          console.log(peersDbId);\r\n          const stringifyPayload = JSON.stringify({ peerDb: peersDbId });\r\n          this.rootStore.dataStore.ipfsNode.pubsub.publish(peerId, stringifyPayload);\r\n        }\r\n      });\r\n    }, 2000);\r\n  }\r\n  processMessage(msg) {\r\n    if (typeof msg.data === \"object\") msg.data = this.texDecoder.decode(msg.data);\r\n  }\r\n  async getPeersDbId() {\r\n    const id = await this.peersDb.id;\r\n    return id;\r\n  }\r\n}\r\n","import OrbitDB from \"orbit-db\";\r\nimport IPFS from \"ipfs\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nexport default class DataStore {\r\n  ipfsNode;\r\n  orbitDb;\r\n  peerId;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.peers = [];\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    if (!this.rootStore.sessionStore.isAuthenticated()) throw Error(\"User is not defined\");\r\n    if (this.ipfsNode !== undefined) return;\r\n    if (this.orbitDb !== undefined) return;\r\n\r\n    const dbConfig = {\r\n      // If database doesn't exist, create it\r\n      create: true,\r\n      // Don't wait to load from the network\r\n      sync: true,\r\n      // directory: `/orbitdb/decentio-orbitdb-chat-${Math.random()}}`,\r\n      // Load only the local version of the database\r\n      localOnly: false,\r\n      // Allow anyone to write to the database,\r\n      // otherwise only the creator of the database can write\r\n      accessController: {\r\n        write: [\"*\"],\r\n      },\r\n    };\r\n    const ipfsConfig = {\r\n      // preload: { enabled: false },\r\n      relay: { enabled: true, hop: { enabled: true, active: true } },\r\n      // libp2p: {\r\n      //   config: {\r\n      //     dht: {\r\n      //       enabled: true,\r\n      //     },\r\n      //     modules: {\r\n      //       transport: [\"WebRTCStar\", \"WebSockets\"],\r\n      //     },\r\n      //     // transport: {\r\n      //     //   WebRTCStar: {\r\n      //     //     wrtc,\r\n      //     //   },\r\n      //     // },\r\n      //   },\r\n      // },\r\n      // peerDiscovery: {\r\n      //   autoDial: true, // Auto connect to discovered peers (limited by ConnectionManager minPeers)\r\n      //   mdns: {\r\n      //     // mdns options\r\n      //     interval: 1000, // ms\r\n      //     enabled: true,\r\n      //   },\r\n      //   webRTCStar: {\r\n      //     // webrtc-star options\r\n      //     interval: 1000, // ms\r\n      //     enabled: false,\r\n      //   },\r\n      //   // .. other discovery module options.\r\n      // },\r\n      // Prevents large data transfers\r\n      //TODO: nejak oddelit at to neni random ale treba username nebo neco\r\n      repo: `/orbitdb/decentio-orbitdb-chat-ipfs-${this.rootStore.sessionStore._user}}`,\r\n      EXPERIMENTAL: {\r\n        pubsub: true,\r\n      },\r\n\r\n      config: {\r\n        Addresses: {\r\n          Swarm: [\r\n            //       // Use IPFS dev signal server\r\n            //       // Websocket:\r\n            // \"/dns4/ws-star-signal-1.servep2p.com/tcp/443/wss/p2p-websocket-star\",\r\n            // \"/dns4/ws-star-signal-2.servep2p.com/tcp/443/wss/p2p-websocket-star\",\r\n            // \"/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star\",\r\n            // WebRTC:\r\n            // \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\r\n            \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\r\n            \"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\r\n            \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\r\n            \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\r\n            // // \"/ip4/0.0.0.0/tcp/4002\",\r\n            // \"/ip4/127.0.0.1/tcp/4003/ws\",\r\n            // \"/libp2p-webrtc-star/dns4/star-signal.cloud.ipfs.team/wss\",\r\n            // \"/dns4/star-signal.cloud.ipfs.team/wss/p2p-webrtc-star\",\r\n            //       // Use local signal server\r\n            // \"/ip4/0.0.0.0/tcp/4011/ws\",\r\n            // \"/ip6/::/tcp/4011/ws\",\r\n          ],\r\n        },\r\n        Bootstrap: [\r\n          // \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/\",\r\n          // \"/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/\",\r\n          // \"/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\r\n          // \"/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star\",\r\n        ],\r\n      },\r\n    };\r\n\r\n    await this.start(ipfsConfig, dbConfig);\r\n  }\r\n\r\n  async start(ipfsConf, orbitDbconf) {\r\n    console.log(this.ipfsNode);\r\n    console.log(this.orbitDb);\r\n    await this.startIpfsNode(ipfsConf);\r\n    await this.startOrbitDb(orbitDbconf);\r\n    console.log(this.ipfsNode);\r\n    console.log(this.orbitDb);\r\n    this.peerId = await this.getPeerId();\r\n    // setInterval(async () => {\r\n    //   const peers = await this.getIpfsPeers();\r\n    //   console.log(peers);\r\n    //   // await peers.map(async (peerId) => {\r\n    //   //   try {\r\n    //   //     await this.connectToPeer(peerId.peer);\r\n    //   //   } catch {}\r\n    //   // });\r\n    //   // const topics = await this.ipfsNode.pubsub.ls();\r\n    //   // console.log(topics);\r\n    // }, 10000);\r\n    // this.ipfsNode.libp2p.connectionManager.on(\"peer:connect\", this.onPeerConnect.bind(this));\r\n  }\r\n  async onPeerConnect(connection) {\r\n    console.log(\"Peer connected:\" + connection.remotePeer._idB58String);\r\n  }\r\n\r\n  async getPeerId() {\r\n    if (this.ipfsNode === undefined) throw Error(\"IPFS Node not defined\");\r\n    const peerInfo = await this.ipfsNode.id();\r\n    return peerInfo.id;\r\n  }\r\n\r\n  async connectToPeer(multiaddr, protocol = \"/dnsaddr/bootstrap.libp2p.io/p2p/\") {\r\n    try {\r\n      await this.ipfsNode.swarm.connect(protocol + multiaddr);\r\n    } catch (err) {\r\n      console.log(err);\r\n      await this.ipfsNode.swarm.connect(protocol + multiaddr);\r\n    }\r\n  }\r\n\r\n  async startIpfsNode(ipfsConf) {\r\n    this.ipfsNode = await IPFS.create(ipfsConf);\r\n  }\r\n  async startOrbitDb(orbitDbconf) {\r\n    this.orbitDb = await OrbitDB.createInstance(this.ipfsNode, orbitDbconf);\r\n  }\r\n  async getIpfsPeers() {\r\n    const peers = await this.ipfsNode.swarm.peers();\r\n    // console.log(peers);\r\n    return peers;\r\n  }\r\n\r\n  async handleStop() {\r\n    await this.orbitDb.disconnect();\r\n    await this.ipfsNode.stop();\r\n    delete this.orbitDb;\r\n    delete this.ipfsNode;\r\n  }\r\n}\r\n","import { v4 as uuidv4 } from \"uuid\";\r\nexport class Message {\r\n  _id;\r\n  from;\r\n  senderName;\r\n  data;\r\n  sentTime;\r\n  avatar;\r\n  type;\r\n  constructor(from, senderName, data, sentTime, avatar, type) {\r\n    this._id = uuidv4();\r\n    this.from = from;\r\n    this.senderName = senderName;\r\n    this.data = data;\r\n    this.sentTime = sentTime;\r\n    this.avatar = avatar;\r\n    this.type = type;\r\n  }\r\n}\r\n","import { get, makeAutoObservable, runInAction, toJS } from \"mobx\";\r\nimport { Message } from \"./Message.js\";\r\nimport { AvatarGenerator } from \"random-avatar-generator\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nexport class ChatRoom {\r\n  roomId;\r\n  pubsub;\r\n  ipfsNode;\r\n  orbitDb;\r\n  roomName;\r\n  textDecoder;\r\n  chatMessagesDb;\r\n  chatRoomMessages;\r\n  lastMessage;\r\n\r\n  constructor(rootStore, roomName) {\r\n    this.roomId = uuidv4();\r\n    this.rootStore = rootStore;\r\n    this.ipfsNode = rootStore.dataStore.ipfsNode;\r\n    this.pubsub = rootStore.dataStore.ipfsNode.pubsub;\r\n    this.orbitDb = rootStore.dataStore.orbitDb;\r\n    this.roomName = roomName;\r\n    this.textDecoder = new TextDecoder();\r\n    this.chatRoomMessages = [];\r\n    this.lastMessage = \"\";\r\n    makeAutoObservable(this);\r\n  }\r\n  async init() {\r\n    await this.connectToChatRoom();\r\n    await this.loadMsgDb();\r\n    await this.setMessagesFromDb();\r\n  }\r\n\r\n  async loadMsgDb() {\r\n    this.chatMessagesDb = await this.orbitDb.feed(`${this.roomName}-messages`);\r\n    await this.chatMessagesDb.load();\r\n  }\r\n\r\n  async setMessagesFromDb() {\r\n    // if (this.chatRoomMessages !== []) return;\r\n    const all = await toJS(this.chatMessagesDb.all);\r\n    // console.log(toJS(this.chatRoomMessages));\r\n    runInAction(() => {\r\n      all.map((e) => {\r\n        // console.log(e.payload.value);\r\n        return this.chatRoomMessages.push(e.payload.value);\r\n      });\r\n    });\r\n  }\r\n\r\n  async connectToChatRoom() {\r\n    runInAction(async () => {\r\n      // await this.pubsub.unsubscribe(this.roomName, (msg) => console.log(msg));\r\n      await this.pubsub.subscribe(this.roomName, await this.setMessage.bind(this));\r\n    });\r\n  }\r\n\r\n  async sendMessageToChatRoom(msg) {\r\n    console.log(\"Msg in sending: \" + msg);\r\n    const sender = this.rootStore.sessionStore._user;\r\n\r\n    const message = { sender: sender, msg: msg };\r\n    const stringifyMessage = JSON.stringify(message);\r\n    runInAction(async () => {\r\n      await this.pubsub.publish(this.roomName, stringifyMessage);\r\n    });\r\n  }\r\n\r\n  async setMessage(msg) {\r\n    console.log(msg.data);\r\n    //TODO: nevim proc ale kdyz je to zprava odeslana ze stejneho peeru tak je to string a jinak je to object\r\n    if (typeof msg.data === \"object\") msg.data = this.textDecoder.decode(msg.data);\r\n    const parsedMsg = JSON.parse(msg.data);\r\n    const userName = parsedMsg.sender;\r\n    console.log(parsedMsg);\r\n    let type = \"message\";\r\n    if (msg.data.includes(\"path\")) {\r\n      let file = await this.retrieveFileFromIpfs(parsedMsg.msg.path);\r\n      console.log(file);\r\n      parsedMsg[\"file\"] = file;\r\n      type = \"file\";\r\n    }\r\n    console.log(parsedMsg);\r\n    const date = new Date(Date.now());\r\n    const message = new Message(\r\n      msg.from,\r\n      userName,\r\n      parsedMsg,\r\n      `${date.getHours()}:${date.getMinutes()}`,\r\n      new AvatarGenerator().generateRandomAvatar(msg.from),\r\n      type\r\n    );\r\n    console.log(message);\r\n\r\n    await this.saveMessage(message);\r\n  }\r\n\r\n  async saveMessage(message) {\r\n    runInAction(async () => {\r\n      this.chatRoomMessages.push(message);\r\n      this.lastMessage = message;\r\n      await this.chatMessagesDb.add(message);\r\n    });\r\n  }\r\n\r\n  async uploadFile(filesContent) {\r\n    //TODO: maybe Multiple files if interested\r\n    console.log(filesContent[0]);\r\n    console.log(filesContent[0].name.split(\".\").pop());\r\n    const result = await this.ipfsNode.add(filesContent[0]);\r\n    console.log(result);\r\n    const fileMessage = { fileName: filesContent[0].name, path: result.path };\r\n    console.log(fileMessage);\r\n    this.sendMessageToChatRoom(fileMessage);\r\n  }\r\n  getFileExtension(fileName) {\r\n    return fileName.split(\".\").pop();\r\n  }\r\n\r\n  fileIsImage(fileName) {\r\n    const match = fileName.match(/\\.(jpg|jpeg|png|gif)$/i);\r\n    console.log(match);\r\n    return match !== null;\r\n  }\r\n  async retrieveFileFromIpfs(path) {\r\n    const ipfsFile = await this.ipfsNode.cat(path);\r\n\r\n    console.log(ipfsFile);\r\n\r\n    let file;\r\n\r\n    const content = [];\r\n    for await (const chunk of ipfsFile) {\r\n      content.push(chunk);\r\n    }\r\n    console.log(content);\r\n\r\n    file = content;\r\n\r\n    return file;\r\n  }\r\n}\r\n","import { makeAutoObservable, runInAction, toJS } from \"mobx\";\r\nimport { ChatRoom } from \"../models/Room.js\";\r\n// var util = require(\"util\");\r\n\r\nexport class RoomStore {\r\n  //TODO:load rooms from db\r\n  rooms;\r\n  selectedRoom;\r\n  selectedReceiver;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.rooms = [];\r\n    this.selectedRoom = undefined;\r\n    this.selectedReceiver = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    if (this.rootStore.dataStore.ipfsNode === undefined) throw Error(\"IPFS Node not defined!\");\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n    await this.loadRoomsDb();\r\n    await this.setRoomsFromDb();\r\n  }\r\n\r\n  async createRoom(roomName) {\r\n    if (this.rootStore.dataStore.ipfsNode === undefined) throw Error(\"IPFS Node not defined!\");\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n    console.log(roomName);\r\n\r\n    const chatRoom = new ChatRoom(this.rootStore, roomName);\r\n\r\n    this.rooms.push(chatRoom);\r\n    await this.roomsDb.add(roomName);\r\n\r\n    console.log(chatRoom);\r\n    console.log(toJS(this.rooms));\r\n    // const roomJSON = util.inspect(chatRoom);\r\n    // console.log(roomJSON);\r\n    return chatRoom;\r\n  }\r\n  getRoom(roomName) {\r\n    return this.rooms.find((room) => roomName === room.roomName);\r\n  }\r\n\r\n  async loadRoomsDb() {\r\n    this.roomsDb = await this.rootStore.dataStore.orbitDb.feed(\"rooms\");\r\n    await this.roomsDb.load();\r\n  }\r\n  async setRoomsFromDb() {\r\n    const all = await toJS(this.roomsDb.all);\r\n    runInAction(() => {\r\n      all.map((item) => {\r\n        const roomName = item.payload.value;\r\n        console.log(item.payload.value);\r\n        const room = new ChatRoom(this.rootStore, roomName);\r\n        room.init();\r\n        return this.rooms.push(room);\r\n      });\r\n    });\r\n  }\r\n  setSelectedRoom(user) {\r\n    let room;\r\n    runInAction(async () => {\r\n      room = this.getRoom(user.peerId);\r\n      if (!room) {\r\n        room = await this.createRoom(user.peerId);\r\n        await room.init();\r\n      }\r\n      this.selectedReceiver = user._username;\r\n      this.selectedRoom = room;\r\n    });\r\n  }\r\n\r\n  isChatRoomReady(roomName) {\r\n    const room = this.getRoom(roomName);\r\n    return room;\r\n  }\r\n}\r\n","import Cookies from \"js-cookie\";\r\nimport { makeAutoObservable } from \"mobx\";\r\nconst cookieKey = \"orbit-chat-username\";\r\nexport default class SessionStore {\r\n  _user;\r\n\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this._user = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    await this.loadFromCache();\r\n  }\r\n  _readUserFromCache() {\r\n    const username = Cookies.get(cookieKey);\r\n    return username ? username : null;\r\n  }\r\n  isAuthenticated() {\r\n    return !!this._user;\r\n  }\r\n\r\n  async _setUser(user) {\r\n    if (!user) throw new Error('\"username\" is not defined');\r\n    // ;if (user && !user.username) throw new Error('\"user.username\" is not defined')\r\n    this._cacheUser(user);\r\n    this._user = user;\r\n  }\r\n\r\n  _cacheUser(user) {\r\n    if (user) {\r\n      Cookies.set(cookieKey, user);\r\n    } else {\r\n      Cookies.remove(cookieKey);\r\n    }\r\n  }\r\n\r\n  async loadFromCache() {\r\n    const cached = this._readUserFromCache();\r\n    if (cached) await this.login(cached);\r\n  }\r\n\r\n  async login(user) {\r\n    console.log(\"User login\");\r\n    return await this._setUser(user);\r\n  }\r\n\r\n  logout() {\r\n    console.log(\"User logout\");\r\n    return this._setUser(null);\r\n  }\r\n}\r\n","export default class User {\r\n  _username;\r\n  avatar;\r\n  peerId;\r\n  constructor(username, peerId) {\r\n    this._username = username;\r\n    this.peerId = peerId;\r\n  }\r\n}\r\n","import { makeAutoObservable, runInAction } from \"mobx\";\r\nimport User from \"../models/User.js\";\r\n\r\nexport default class UserStore {\r\n  userDb;\r\n  constructor(rootStore) {\r\n    this.rootStore = rootStore;\r\n    this.userDb = undefined;\r\n    makeAutoObservable(this);\r\n  }\r\n\r\n  async init() {\r\n    await this.setUserStore();\r\n  }\r\n  isUserStoreReady() {\r\n    return this.userDb;\r\n  }\r\n  async setUserStore() {\r\n    if (this.rootStore.dataStore.orbitDb === undefined) throw Error(\"OrbitDb not defined!\");\r\n    const defaultOptions = { accessController: { write: [this.rootStore.dataStore.orbitDb.identity.id] } };\r\n\r\n    this.userDb = await this.rootStore.dataStore.orbitDb.kvstore(\"user\", defaultOptions);\r\n    await this.userDb.load();\r\n  }\r\n  async createUser(username) {\r\n    const peerId = this.rootStore.dataStore.peerId;\r\n    const user = new User(username, peerId);\r\n\r\n    await this.userDb.set(\"user\", user);\r\n  }\r\n\r\n  async deleteProfileField(key) {\r\n    const cid = await this.userDb.del(key);\r\n    return cid;\r\n  }\r\n\r\n  getAllProfileFields() {\r\n    return this.userDb.all;\r\n  }\r\n\r\n  getProfileField(key) {\r\n    return this.userDb.get(key);\r\n  }\r\n\r\n  async updateUserField(key, value) {\r\n    const cid = await this.userDb.set(key, value);\r\n    return cid;\r\n  }\r\n\r\n  async getUserDbId() {\r\n    const id = await this.userDb.id;\r\n    return id;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { MonitorStore } from \"./MonitorStore.js\";\r\nimport DataStore from \"./DataStore.js\";\r\nimport { RoomStore } from \"./RoomStore.js\";\r\nimport SessionStore from \"./SessionStore.js\";\r\nimport UserStore from \"./UserStore.js\";\r\n\r\nexport default class RootStore {\r\n  constructor() {\r\n    this.sessionStore = new SessionStore(this);\r\n    this.dataStore = new DataStore(this);\r\n    this.userStore = new UserStore(this);\r\n    this.monitorStore = new MonitorStore(this);\r\n    this.roomStore = new RoomStore(this);\r\n    this.initStores();\r\n  }\r\n  async initStores() {\r\n    await this.sessionStore.init();\r\n    await this.initDbStores();\r\n  }\r\n\r\n  async initDbStores() {\r\n    if (this.sessionStore.isAuthenticated()) {\r\n      await this.dataStore.init();\r\n      await this.userStore.init();\r\n      await this.monitorStore.init();\r\n      await this.roomStore.init();\r\n    }\r\n  }\r\n}\r\nexport const store = new RootStore();\r\nexport const StoresContext = React.createContext(store);\r\nexport const useStores = () => React.useContext(StoresContext);\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"]}}